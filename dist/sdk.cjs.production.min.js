<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e,r,n,o,i,a,u,s,c=t(require("jsbi")),p=t(require("tiny-invariant")),f=t(require("big.js")),d=t(require("decimal.js-light")),l=t(require("toformat")),h=(t(require("tiny-warning")),require("@ethersproject/address")),m=require("@ethersproject/solidity"),y=require("@ethersproject/contracts"),v=require("@ethersproject/networks"),T=require("@ethersproject/providers");(i=exports.ChainId||(exports.ChainId={}))[i.MAINNET=1]="MAINNET",i[i.ROPSTEN=3]="ROPSTEN",i[i.RINKEBY=4]="RINKEBY",i[i["GÖRLI"]=5]="GÖRLI",i[i.KOVAN=42]="KOVAN",i[i.HARDHAT=1337]="HARDHAT",(a=exports.Exchange||(exports.Exchange={}))[a.UNI=0]="UNI",a[a.SUSHI=1]="SUSHI",a[a.UNDEFINED=2]="UNDEFINED",(u=exports.TradeType||(exports.TradeType={}))[u.EXACT_INPUT=0]="EXACT_INPUT",u[u.EXACT_OUTPUT=1]="EXACT_OUTPUT",(s=exports.Rounding||(exports.Rounding={}))[s.ROUND_DOWN=0]="ROUND_DOWN",s[s.ROUND_HALF_UP=1]="ROUND_HALF_UP",s[s.ROUND_UP=2]="ROUND_UP";var x,E=c.BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),g=((e={})[exports.Exchange.UNI]="0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f",e[exports.Exchange.SUSHI]="0xC0AEe478e3658e2610c5F7A4A2E1777cE9e4f2Ac",e[exports.Exchange.UNDEFINED]="0x0",e),A=((r={})[exports.Exchange.UNI]="0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D",r[exports.Exchange.SUSHI]="0xd9e1cE17f2641f24aE83637ab66a2cca9C378B9",r[exports.Exchange.UNDEFINED]="0x0",r),w=((n={})[exports.Exchange.UNI]="0x96e8ac4277198ff8b6f785478aa9a39f403cb768dd02cbee326c3e7da348845f",n[exports.Exchange.SUSHI]="0xe18a34eb0e04b04f7a0ac29a6e80748dca96319b42c54d679cb821dca90c6303",n[exports.Exchange.UNDEFINED]="0x0",n),k=c.BigInt(1e3),I=c.BigInt(0),q=c.BigInt(1),F=c.BigInt(2),b=c.BigInt(3),N=c.BigInt(5),O=c.BigInt(10),R=c.BigInt(100),C=c.BigInt(997),U=c.BigInt(1e3);(x=exports.SolidityType||(exports.SolidityType={})).uint8="uint8",x.uint256="uint256";var P,_=((o={})[exports.SolidityType.uint8]=c.BigInt("0xff"),o[exports.SolidityType.uint256]=c.BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),o);(P=exports.MethodName||(exports.MethodName={})).swapETHForExactTokens="swapETHForExactTokens",P.swapExactETHForTokens="swapExactETHForTokens",P.swapExactTokensForETH="swapExactTokensForETH",P.swapExactTokensForTokens="swapExactTokensForTokens",P.swapTokensForExactETH="swapTokensForExactETH",P.swapTokensForExactTokens="swapTokensForExactTokens";var S={swapETHForExactTokens:"155485",swapExactETHForTokens:"151393",swapExactTokensForETH:"211606",swapExactTokensForTokens:"216959",swapTokensForExactETH:"241879",swapTokensForExactTokens:"244052"};function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function H(t,e,r){return e&&D(t.prototype,e),r&&D(t,r),t}function B(){return(B=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function M(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function L(t,e,r){return(L=X()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&W(o,r.prototype),o}).apply(null,arguments)}function K(t){var e="function"==typeof Map?new Map:void 0;return(K=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return L(t,arguments,j(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),W(r,t)})(t)}function V(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function G(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Y(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}var J,Q,Z,$="setPrototypeOf"in Object,z=function(t){function e(){var r;return(r=t.call(this)||this).isInsufficientReservesError=!0,r.name=r.constructor.name,$&&Object.setPrototypeOf(V(r),(this instanceof e?this.constructor:void 0).prototype),r}return M(e,t),e}(K(Error)),tt=function(t){function e(){var r;return(r=t.call(this)||this).isInsufficientInputAmountError=!0,r.name=r.constructor.name,$&&Object.setPrototypeOf(V(r),(this instanceof e?this.constructor:void 0).prototype),r}return M(e,t),e}(K(Error)),et=function(t,e,r,n){Number.isSafeInteger(t)||p(!1),e>=0&&e<255&&Number.isInteger(e)||p(!1),this.chainId=t,this.decimals=e,this.symbol=r,this.name=n},rt=l(d),nt=l(f),ot=((J={})[exports.Rounding.ROUND_DOWN]=rt.ROUND_DOWN,J[exports.Rounding.ROUND_HALF_UP]=rt.ROUND_HALF_UP,J[exports.Rounding.ROUND_UP]=rt.ROUND_UP,J),it=((Q={})[exports.Rounding.ROUND_DOWN]=0,Q[exports.Rounding.ROUND_HALF_UP]=1,Q[exports.Rounding.ROUND_UP]=3,Q),at=function(){function t(t,e){void 0===e&&(e=c.BigInt(1)),this.numerator=c.BigInt(t),this.denominator=c.BigInt(e)}t.tryParseFraction=function(e){if(e instanceof c||"number"==typeof e||"string"==typeof e)return new t(e);if("numerator"in e&&"denominator"in e)return e;throw new Error("Could not parse fraction")};var e=t.prototype;return e.invert=function(){return new t(this.denominator,this.numerator)},e.add=function(e){var r=t.tryParseFraction(e);return c.equal(this.denominator,r.denominator)?new t(c.add(this.numerator,r.numerator),this.denominator):new t(c.add(c.multiply(this.numerator,r.denominator),c.multiply(r.numerator,this.denominator)),c.multiply(this.denominator,r.denominator))},e.subtract=function(e){var r=t.tryParseFraction(e);return c.equal(this.denominator,r.denominator)?new t(c.subtract(this.numerator,r.numerator),this.denominator):new t(c.subtract(c.multiply(this.numerator,r.denominator),c.multiply(r.numerator,this.denominator)),c.multiply(this.denominator,r.denominator))},e.lessThan=function(e){var r=t.tryParseFraction(e);return c.lessThan(c.multiply(this.numerator,r.denominator),c.multiply(r.numerator,this.denominator))},e.equalTo=function(e){var r=t.tryParseFraction(e);return c.equal(c.multiply(this.numerator,r.denominator),c.multiply(r.numerator,this.denominator))},e.greaterThan=function(e){var r=t.tryParseFraction(e);return c.greaterThan(c.multiply(this.numerator,r.denominator),c.multiply(r.numerator,this.denominator))},e.multiply=function(e){var r=t.tryParseFraction(e);return new t(c.multiply(this.numerator,r.numerator),c.multiply(this.denominator,r.denominator))},e.divide=function(e){var r=t.tryParseFraction(e);return new t(c.multiply(this.numerator,r.denominator),c.multiply(this.denominator,r.numerator))},e.toSignificant=function(t,e,r){void 0===e&&(e={groupSeparator:""}),void 0===r&&(r=exports.Rounding.ROUND_HALF_UP),Number.isInteger(t)||p(!1),t>0||p(!1),rt.set({precision:t+1,rounding:ot[r]});var n=new rt(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(t);return n.toFormat(n.decimalPlaces(),e)},e.toFixed=function(t,e,r){return void 0===e&&(e={groupSeparator:""}),void 0===r&&(r=exports.Rounding.ROUND_HALF_UP),Number.isInteger(t)||p(!1),t>=0||p(!1),nt.DP=t,nt.RM=it[r],new nt(this.numerator.toString()).div(this.denominator.toString()).toFormat(t,e)},H(t,[{key:"quotient",get:function(){return c.divide(this.numerator,this.denominator)}},{key:"remainder",get:function(){return new t(c.remainder(this.numerator,this.denominator),this.denominator)}},{key:"asFraction",get:function(){return new t(this.numerator,this.denominator)}}]),t}(),ut=l(f),st=function(t){function e(e,r,n){var o;return o=t.call(this,r,n)||this,c.lessThanOrEqual(o.quotient,E)||p(!1),o.currency=e,o.decimalScale=c.exponentiate(c.BigInt(10),c.BigInt(e.decimals)),o}M(e,t),e.fromRawAmount=function(t,r){return new e(t,r)},e.fromFractionalAmount=function(t,r,n){return new e(t,r,n)};var r=e.prototype;return r.add=function(r){this.currency.equals(r.currency)||p(!1);var n=t.prototype.add.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},r.subtract=function(r){this.currency.equals(r.currency)||p(!1);var n=t.prototype.subtract.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},r.multiply=function(r){var n=t.prototype.multiply.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},r.divide=function(r){var n=t.prototype.divide.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},r.toSignificant=function(e,r,n){return void 0===e&&(e=6),void 0===n&&(n=exports.Rounding.ROUND_DOWN),t.prototype.divide.call(this,this.decimalScale).toSignificant(e,r,n)},r.toFixed=function(e,r,n){return void 0===e&&(e=this.currency.decimals),void 0===n&&(n=exports.Rounding.ROUND_DOWN),e<=this.currency.decimals||p(!1),t.prototype.divide.call(this,this.decimalScale).toFixed(e,r,n)},r.toExact=function(t){return void 0===t&&(t={groupSeparator:""}),ut.DP=this.currency.decimals,new ut(this.quotient.toString()).div(this.decimalScale.toString()).toFormat(t)},H(e,[{key:"wrapped",get:function(){return this.currency.isToken?this:e.fromFractionalAmount(this.currency.wrapped,this.numerator,this.denominator)}}]),e}(at),ct=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).isNative=!0,e.isToken=!1,e}return M(e,t),e}(et),pt=function(t){function e(){for(var e,r,n,o,i,a=arguments.length,u=new Array(a),s=0;s<a;s++)u[s]=arguments[s];if(4===u.length)r=u[0],n=u[1],o=u[2],i=u[3];else{var p=u[0].quoteAmount.divide(u[0].baseAmount),f=[u[0].baseAmount.currency,u[0].quoteAmount.currency,p.denominator,p.numerator];r=f[0],n=f[1],o=f[2],i=f[3]}return(e=t.call(this,i,o)||this).baseCurrency=r,e.quoteCurrency=n,e.scalar=new at(c.exponentiate(c.BigInt(10),c.BigInt(r.decimals)),c.exponentiate(c.BigInt(10),c.BigInt(n.decimals))),e}M(e,t);var r=e.prototype;return r.invert=function(){return new e(this.quoteCurrency,this.baseCurrency,this.numerator,this.denominator)},r.multiply=function(r){this.quoteCurrency.equals(r.baseCurrency)||p(!1);var n=t.prototype.multiply.call(this,r);return new e(this.baseCurrency,r.quoteCurrency,n.denominator,n.numerator)},r.quote=function(e){e.currency.equals(this.baseCurrency)||p(!1);var r=t.prototype.multiply.call(this,e);return st.fromFractionalAmount(this.quoteCurrency,r.numerator,r.denominator)},r.toSignificant=function(t,e,r){return void 0===t&&(t=6),this.adjustedForDecimals.toSignificant(t,e,r)},r.toFixed=function(t,e,r){return void 0===t&&(t=4),this.adjustedForDecimals.toFixed(t,e,r)},H(e,[{key:"adjustedForDecimals",get:function(){return t.prototype.multiply.call(this,this.scalar)}}]),e}(at),ft=new at(R),dt=function(t){function e(){return t.apply(this,arguments)||this}M(e,t);var r=e.prototype;return r.toSignificant=function(t,e,r){return void 0===t&&(t=5),this.multiply(ft).toSignificant(t,e,r)},r.toFixed=function(t,e,r){return void 0===t&&(t=2),this.multiply(ft).toFixed(t,e,r)},e}(at);function lt(t){try{return h.getAddress(t)}catch(t){p(!1)}}function ht(t){return t instanceof c?t:c.BigInt(t)}function mt(t,e){void 0===t&&(t="swapTokensForExactETH"),void 0===e&&(e="1");var r=ht(S[t]),n=ht("0"),o=c.multiply(ht(e),n);return c.add(r,o)}function yt(t,e,r){t=ht(t),e=ht(e);var n=vt(t,r);return c.multiply(n,e)}function vt(t,e){t=ht(t),e=c.multiply(ht(e),ht("100"));var r=c.multiply(t,c.add(ht("10000"),e)),n=ht("10000");return c.divide(r,n)}function Tt(t){var e,r;e=t,r=exports.SolidityType.uint256,c.greaterThanOrEqual(e,I)||p(!1),c.lessThanOrEqual(e,_[r])||p(!1);var n,o=I;if(c.greaterThan(t,b))for(o=t,n=c.add(c.divide(t,F),q);c.lessThan(n,o);)o=n,n=c.divide(c.add(c.divide(t,n),n),F);else c.notEqual(t,I)&&(o=q);return o}function xt(t,e,r,n){if(r>0||p(!1),t.length<=r||p(!1),0===t.length)return t.push(e),null;var o=t.length===r;if(o&&n(t[t.length-1],e)<=0)return e;for(var i=0,a=t.length;i<a;){var u=i+a>>>1;n(t[u],e)<=0?i=u+1:a=u}return t.splice(i,0,e),o?t.pop():null}var Et=function(t){function e(e,r,n,o,i){var a;return(a=t.call(this,e,n,o,i)||this).isNative=!1,a.isToken=!0,a.chainId=e,a.address=lt(r),a}M(e,t);var r=e.prototype;return r.equals=function(t){return t.isToken&&this.chainId===t.chainId&&this.address===t.address},r.sortsBefore=function(t){return this.chainId!==t.chainId&&p(!1),this.address===t.address&&p(!1),this.address.toLowerCase()<t.address.toLowerCase()},H(e,[{key:"wrapped",get:function(){return this}}]),e}(et);function gt(t,e){return t instanceof Et&&e instanceof Et?t.equals(e):!(t instanceof Et||e instanceof Et||t!==e)}var At=((Z={})[exports.ChainId.MAINNET]=new Et(exports.ChainId.MAINNET,"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",18,"WETH","Wrapped Ether"),Z[exports.ChainId.HARDHAT]=new Et(exports.ChainId.HARDHAT,"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",18,"WETH","Wrapped Ether"),Z[exports.ChainId.ROPSTEN]=new Et(exports.ChainId.ROPSTEN,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),Z[exports.ChainId.RINKEBY]=new Et(exports.ChainId.RINKEBY,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),Z[exports.ChainId.GÖRLI]=new Et(exports.ChainId.GÖRLI,"0xB4FBF271143F4FBf7B91A5ded31805e42b2208d6",18,"WETH","Wrapped Ether"),Z[exports.ChainId.KOVAN]=new Et(exports.ChainId.KOVAN,"0xd0A1E359811322d97991E03f863a0C30C2cF029C",18,"WETH","Wrapped Ether"),Z),wt=function(){function t(e,r,n){var o=e.currency.sortsBefore(r.currency)?[e,r]:[r,e];this.liquidityToken=new Et(o[0].currency.chainId,t.getAddress(o[0].currency,o[1].currency,n),18,"UNI-V2","Uniswap V2"),this.tokenAmounts=o,this.exchange=n}t.getAddress=function(t,e,r){return function(t){var e=t.exchange,r=t.tokenA,n=t.tokenB,o=r.sortsBefore(n)?[r,n]:[n,r];return h.getCreate2Address(g[e],m.keccak256(["bytes"],[m.pack(["address","address"],[o[0].address,o[1].address])]),w[e])}({exchange:r,tokenA:t,tokenB:e})};var e=t.prototype;return e.involvesToken=function(t){return t.equals(this.token0)||t.equals(this.token1)},e.priceOf=function(t){return this.involvesToken(t)||p(!1),t.equals(this.token0)?this.token0Price:this.token1Price},e.reserveOf=function(t){return this.involvesToken(t)||p(!1),t.equals(this.token0)?this.reserve0:this.reserve1},e.getOutputAmount=function(e){if(this.involvesToken(e.currency)||p(!1),c.equal(this.reserve0.quotient,I)||c.equal(this.reserve1.quotient,I))throw new z;var r=this.reserveOf(e.currency),n=this.reserveOf(e.currency.equals(this.token0)?this.token1:this.token0),o=c.multiply(e.quotient,C),i=c.multiply(o,n.quotient),a=c.add(c.multiply(r.quotient,U),o),u=st.fromRawAmount(e.currency.equals(this.token0)?this.token1:this.token0,c.divide(i,a));if(c.equal(u.quotient,I))throw new tt;return[u,new t(r.add(e),n.subtract(u),this.exchange)]},e.getInputAmount=function(e){if(this.involvesToken(e.currency)||p(!1),c.equal(this.reserve0.quotient,I)||c.equal(this.reserve1.quotient,I)||c.greaterThanOrEqual(e.quotient,this.reserveOf(e.currency).quotient))throw new z;var r=this.reserveOf(e.currency),n=this.reserveOf(e.currency.equals(this.token0)?this.token1:this.token0),o=c.multiply(c.multiply(n.quotient,e.quotient),U),i=c.multiply(c.subtract(r.quotient,e.quotient),C),a=st.fromRawAmount(e.currency.equals(this.token0)?this.token1:this.token0,c.add(c.divide(o,i),q));return[a,new t(n.add(a),r.subtract(e),this.exchange)]},e.getLiquidityMinted=function(t,e,r){t.currency.equals(this.liquidityToken)||p(!1);var n,o=e.currency.sortsBefore(r.currency)?[e,r]:[r,e];if(o[0].currency.equals(this.token0)&&o[1].currency.equals(this.token1)||p(!1),c.equal(t.quotient,I))n=c.subtract(Tt(c.multiply(o[0].quotient,o[1].quotient)),k);else{var i=c.divide(c.multiply(o[0].quotient,t.quotient),this.reserve0.quotient),a=c.divide(c.multiply(o[1].quotient,t.quotient),this.reserve1.quotient);n=c.lessThanOrEqual(i,a)?i:a}if(!c.greaterThan(n,I))throw new tt;return st.fromRawAmount(this.liquidityToken,n)},e.getLiquidityValue=function(t,e,r,n,o){var i;if(void 0===n&&(n=!1),this.involvesToken(t)||p(!1),e.currency.equals(this.liquidityToken)||p(!1),r.currency.equals(this.liquidityToken)||p(!1),c.lessThanOrEqual(r.quotient,e.quotient)||p(!1),n){o||p(!1);var a=c.BigInt(o);if(c.equal(a,I))i=e;else{var u=Tt(c.multiply(this.reserve0.quotient,this.reserve1.quotient)),s=Tt(a);if(c.greaterThan(u,s)){var f=c.multiply(e.quotient,c.subtract(u,s)),d=c.add(c.multiply(u,N),s),l=c.divide(f,d);i=e.add(st.fromRawAmount(this.liquidityToken,l))}else i=e}}else i=e;return st.fromRawAmount(t,c.divide(c.multiply(r.quotient,this.reserveOf(t).quotient),i.quotient))},H(t,[{key:"token0Price",get:function(){var t=this.tokenAmounts[1].divide(this.tokenAmounts[0]);return new pt(this.token0,this.token1,t.denominator,t.numerator)}},{key:"token1Price",get:function(){var t=this.tokenAmounts[0].divide(this.tokenAmounts[1]);return new pt(this.token1,this.token0,t.denominator,t.numerator)}},{key:"chainId",get:function(){return this.token0.chainId}},{key:"token0",get:function(){return this.tokenAmounts[0].currency}},{key:"token1",get:function(){return this.tokenAmounts[1].currency}},{key:"reserve0",get:function(){return this.tokenAmounts[0]}},{key:"reserve1",get:function(){return this.tokenAmounts[1]}}]),t}(),kt=function(){function t(t,e,r){this._midPrice=null,t.length>0||p(!1);var n=t[0].chainId;t.every((function(t){return t.chainId===n}))||p(!1);var o=e.wrapped;t[0].involvesToken(o)||p(!1),void 0===r||t[t.length-1].involvesToken(r.wrapped)||p(!1);for(var i,a=[o],u=G(t.entries());!(i=u()).done;){var s=i.value,c=s[1],f=a[s[0]];f.equals(c.token0)||f.equals(c.token1)||p(!1);var d=f.equals(c.token0)?c.token1:c.token0;a.push(d)}this.pairs=t,this.path=a,this.input=e,this.output=r}return H(t,[{key:"midPrice",get:function(){if(null!==this._midPrice)return this._midPrice;for(var t,e=[],r=G(this.pairs.entries());!(t=r()).done;){var n=t.value,o=n[1];e.push(this.path[n[0]].equals(o.token0)?new pt(o.reserve0.currency,o.reserve1.currency,o.reserve0.quotient,o.reserve1.quotient):new pt(o.reserve1.currency,o.reserve0.currency,o.reserve1.quotient,o.reserve0.quotient))}var i=e.slice(1).reduce((function(t,e){return t.multiply(e)}),e[0]);return this._midPrice=new pt(this.input,this.output,i.denominator,i.numerator)}},{key:"chainId",get:function(){return this.pairs[0].chainId}}]),t}(),It=function(t){function e(e){return t.call(this,e,18,"ETH","Ether")||this}return M(e,t),e.onChain=function(t){var r;return null!==(r=this._etherCache[t])&&void 0!==r?r:this._etherCache[t]=new e(t)},e.prototype.equals=function(t){return t.isNative&&t.chainId===this.chainId},H(e,[{key:"wrapped",get:function(){var t=At[this.chainId];return t||p(!1),t}}]),e}(ct);function qt(t,e){return t.inputAmount.currency.equals(e.inputAmount.currency)||p(!1),t.outputAmount.currency.equals(e.outputAmount.currency)||p(!1),t.outputAmount.equalTo(e.outputAmount)?t.inputAmount.equalTo(e.inputAmount)?0:t.inputAmount.lessThan(e.inputAmount)?-1:1:t.outputAmount.lessThan(e.outputAmount)?1:-1}function Ft(t,e){var r=qt(t,e);return 0!==r?r:t.priceImpact.lessThan(e.priceImpact)?-1:t.priceImpact.greaterThan(e.priceImpact)?1:t.route.path.length-e.route.path.length}It._etherCache={};var bt=function(){function t(e,r,n,o,i){this.route=e,this.tradeType=n;var a=new Array(e.path.length),u=new Array(e.pairs.length),s=e.input.isNative,c=e.output.isNative,f=mt(t.methodNameForTradeType(n,s,c),(e.path.length-1).toString()),d=yt(o,f,i);this.estimatedGas=f.toString(),this.minerBribe=st.fromRawAmount(At[e.chainId],d);var l=r.wrapped,h=r.wrapped;if(n===exports.TradeType.EXACT_INPUT){gt(r.currency,e.input)||p(!1),a[0]=r.wrapped;for(var m=0;m<e.path.length-1;m++){var y=e.pairs[m],v=a[m];if(s&&0===m){v.greaterThan(this.minerBribe)||p(!1);var T=v.subtract(this.minerBribe);v=T,l=T}var x=y.getOutputAmount(v),E=x[0],g=x[1];if(c&&m===e.path.length-2){E.greaterThan(this.minerBribe)||p(!1);var A=E.subtract(this.minerBribe);a[m+1]=A,h=E}else h=E,a[m+1]=E;u[m]=g}}else{gt(r.currency,e.output)||p(!1),a[a.length-1]=r.wrapped;for(var w=e.path.length-1;w>0;w--){var k=a[w];if(c&&w===e.path.length-1){var I=k.add(this.minerBribe);k=I,h=I}else w===e.path.length-1&&(h=k);var q=e.pairs[w-1].getInputAmount(k),F=q[0],b=q[1];if(s&&1===w){var N=F.add(this.minerBribe);a[w-1]=N,l=F}else a[w-1]=1===w?l=F:F;u[w-1]=b}}this.exchange=e.pairs[0].exchange,this.inputAmount=st.fromFractionalAmount(e.input,a[0].numerator,a[0].denominator),this.outputAmount=st.fromFractionalAmount(e.output,a[a.length-1].numerator,a[a.length-1].denominator),this.executionPrice=new pt(e.input,e.output,l.quotient,h.quotient),this.priceImpact=function(t,e,r){var n=t.quote(e),o=n.subtract(r).divide(n);return new dt(o.numerator,o.denominator)}(e.midPrice,st.fromFractionalAmount(e.input,l.numerator,l.denominator),st.fromFractionalAmount(e.output,h.numerator,h.denominator))}t.exactIn=function(e,r,n,o){return new t(e,r,exports.TradeType.EXACT_INPUT,n,o)},t.exactOut=function(e,r,n,o){return new t(e,r,exports.TradeType.EXACT_OUTPUT,n,o)};var e=t.prototype;return e.minimumAmountOut=function(t){if(t.lessThan(I)&&p(!1),this.tradeType===exports.TradeType.EXACT_OUTPUT)return this.outputAmount;var e=new at(q).add(t).invert().multiply(this.outputAmount.quotient).quotient;return st.fromRawAmount(this.outputAmount.currency,e)},e.maximumAmountIn=function(t){if(t.lessThan(I)&&p(!1),this.tradeType===exports.TradeType.EXACT_INPUT)return this.inputAmount;var e=new at(q).add(t).multiply(this.inputAmount.quotient).quotient;return st.fromRawAmount(this.inputAmount.currency,e)},t.bestTradeExactIn=function(e,r,n,o,i,a,u,s,c){var f=void 0===a?{}:a,d=f.maxNumResults,l=void 0===d?3:d,h=f.maxHops,m=void 0===h?3:h;void 0===u&&(u=[]),void 0===s&&(s=r),void 0===c&&(c=[]),e.length>0||p(!1),m>0||p(!1),s===r||u.length>0||p(!1);for(var y=exports.TradeType.EXACT_INPUT,v=s.wrapped,T=n.wrapped,x=0;x<e.length;x++){var E=e[x];if((E.token0.equals(v.currency)||E.token1.equals(v.currency))&&!E.reserve0.equalTo(I)&&!E.reserve1.equalTo(I)){var g=void 0;try{g=E.getOutputAmount(v)[0]}catch(t){if(t.isInsufficientInputAmountError)continue;throw t}if(g.currency.equals(T))try{xt(c,new t(new kt([].concat(u,[E]),r.currency,n),r,y,o,i),l,Ft)}catch(t){}else if(m>1&&e.length>1){var A=e.slice(0,x).concat(e.slice(x+1,e.length));t.bestTradeExactIn(A,r,n,o,i,{maxNumResults:l,maxHops:m-1},[].concat(u,[E]),g,c)}}}return c},t.bestTradeExactOut=function(e,r,n,o,i,a,u,s,c){var f=void 0===a?{}:a,d=f.maxNumResults,l=void 0===d?3:d,h=f.maxHops,m=void 0===h?3:h;void 0===u&&(u=[]),void 0===s&&(s=n),void 0===c&&(c=[]),e.length>0||p(!1),m>0||p(!1),s===n||u.length>0||p(!1);for(var y=s.wrapped,v=r.wrapped,T=0;T<e.length;T++){var x=e[T];if((x.token0.equals(y.currency)||x.token1.equals(y.currency))&&!x.reserve0.equalTo(I)&&!x.reserve1.equalTo(I)){var E=void 0;try{E=x.getInputAmount(y)[0]}catch(t){if(t.isInsufficientReservesError)continue;throw t}if(E.currency.equals(v))try{xt(c,new t(new kt([x].concat(u),r,n.currency),n,exports.TradeType.EXACT_OUTPUT,o,i),l,Ft)}catch(t){}else if(m>1&&e.length>1){var g=e.slice(0,T).concat(e.slice(T+1,e.length));t.bestTradeExactOut(g,r,n,o,i,{maxNumResults:l,maxHops:m-1},[x].concat(u),E,c)}}}return c},t.methodNameForTradeType=function(t,e,r,n){var o;switch(t){case exports.TradeType.EXACT_INPUT:o=e?"swapExactETHForTokens":r?"swapExactTokensForETH":"swapExactTokensForTokens";break;case exports.TradeType.EXACT_OUTPUT:n&&p(!1),o=e?"swapETHForExactTokens":r?"swapTokensForExactETH":"swapTokensForExactTokens"}return o},t.estimateMinTradeAmounts=function(e,r,n,o,i,a,u){var s,c=(void 0===u?{}:u).maxHops,p=void 0===c?3:c,f=r.isNative,d=n.isNative;if(!f&&!d)return null;var l,h,m=mt(t.methodNameForTradeType(exports.TradeType.EXACT_INPUT,f,d),p.toString()),y=mt(t.methodNameForTradeType(exports.TradeType.EXACT_OUTPUT,f,d),p.toString()),v=vt(yt(o,m,i),a),T=vt(yt(o,y,i),a);if(f){var x=t.bestTradeExactOut(e,n,st.fromRawAmount(r,T),"0","0")[0];x&&(l=st.fromRawAmount(r,v),h=x.inputAmount)}else if(d){var E=t.bestTradeExactIn(e,st.fromRawAmount(n,v),r,"0","0")[0];E&&(l=E.outputAmount,h=st.fromRawAmount(r,T))}return l&&h?((s={})[exports.TradeType.EXACT_INPUT]=l,s[exports.TradeType.EXACT_OUTPUT]=h,s):null},t.estimateBribeAmounts=function(t,e){var r,n=It.onChain(1),o=((r={})[exports.MethodName.swapETHForExactTokens]=st.fromRawAmount(n,yt(t,mt("swapETHForExactTokens"),e)),r[exports.MethodName.swapExactETHForTokens]=st.fromRawAmount(n,yt(t,mt("swapExactETHForTokens"),e)),r[exports.MethodName.swapExactTokensForETH]=st.fromRawAmount(n,yt(t,mt("swapExactTokensForETH"),e)),r[exports.MethodName.swapExactTokensForTokens]=st.fromRawAmount(n,yt(t,mt("swapExactTokensForTokens"),e)),r[exports.MethodName.swapTokensForExactETH]=st.fromRawAmount(n,yt(t,mt("swapTokensForExactETH"),e)),r[exports.MethodName.swapTokensForExactTokens]=st.fromRawAmount(n,yt(t,mt("swapTokensForExactTokens"),e)),r),i=st.fromRawAmount(n,"1000000000000000000000000000000000000000000000000"),a=st.fromRawAmount(n,"0"),u=st.fromRawAmount(n,"0");for(var s in exports.MethodName){var p=o[s];u.add(p),p.lessThan(i)&&(i=p),p.greaterThan(a)&&(a=p)}var f=u.divide(String(Object.keys(exports.MethodName).length));return{estimates:o,minBribe:i,maxBribe:a,meanBribe:st.fromRawAmount(n,c.divide(f.numerator,f.denominator))}},t}();function Nt(t){return"0x"+t.quotient.toString(16)}var Ot,Rt=function(){function t(){}return t.swapCallParameters=function(t,e){var r=t.inputAmount.currency.isNative,n=t.outputAmount.currency.isNative;r&&n&&p(!1),!("ttl"in e)||e.ttl>0||p(!1);var o,i=lt(e.recipient),a=Nt(t.maximumAmountIn(e.allowedSlippage)),u=Nt(t.minimumAmountOut(e.allowedSlippage)),s=Nt(t.minerBribe),c=t.route.path.map((function(t){return t.address})),f="ttl"in e?"0x"+(Math.floor((new Date).getTime()/1e3)+e.ttl).toString(16):"0x"+e.deadline.toString(16),d=Boolean(e.feeOnTransfer),l={amount0:a,amount1:u,path:c,to:i,deadline:f},h=bt.methodNameForTradeType(t.tradeType,r,n,d);switch(h){case"swapExactETHForTokens":l.amount0=a,l.amount1=u,o=a;break;case"swapExactTokensForETH":l.amount0=a,l.amount1=u,o="0x0";break;case"swapExactTokensForTokens":l.amount0=a,l.amount1=u,o=s;break;case"swapETHForExactTokens":d&&p(!1),l.amount0=a,l.amount1=u,o=a;break;case"swapTokensForExactETH":case"swapTokensForExactTokens":d&&p(!1),l.amount0=u,l.amount1=a,o=s;break;default:o=""}var m=[[l.amount0,l.amount1,l.path,l.to,l.deadline],s];return h&&m&&o||p(!1),{methodName:h,args:m,value:o}},t}(),Ct=[{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],Ut=((Ot={})[exports.ChainId.MAINNET]={"0xE0B7927c4aF23765Cb51314A0E0521A9645F0E2A":9},Ot),Pt=function(){function t(){}return t.fetchTokenData=function(t,e,r,n,o){try{var i,a,u=function(r){return new Et(t,e,r,n,o)};void 0===r&&(r=T.getDefaultProvider(v.getNetwork(t)));var s="number"==typeof(null===(i=Ut)||void 0===i||null===(a=i[t])||void 0===a?void 0:a[e]);return Promise.resolve(s?u(Ut[t][e]):Promise.resolve(new y.Contract(e,Ct,r).decimals().then((function(r){var n,o,i;return Ut=B({},Ut,((i={})[t]=B({},null===(n=Ut)||void 0===n?void 0:n[t],((o={})[e]=r,o)),i)),r}))).then(u))}catch(t){return Promise.reject(t)}},t}();exports.JSBI=c,exports.AbstractCurrency=et,exports.CurrencyAmount=st,exports.Ether=It,exports.FACTORY_ADDRESS=g,exports.FIVE=N,exports.Fetcher=Pt,exports.Fraction=at,exports.GAS_ESTIMATES=S,exports.INIT_CODE_HASH=w,exports.InsufficientInputAmountError=tt,exports.InsufficientReservesError=z,exports.MINIMUM_LIQUIDITY=k,exports.MaxUint256=E,exports.NativeCurrency=ct,exports.ONE=q,exports.Pair=wt,exports.Percent=dt,exports.Price=pt,exports.ROUTER_ADDRESS=A,exports.Route=kt,exports.Router=Rt,exports.SOLIDITY_TYPE_MAXIMA=_,exports.TEN=O,exports.THREE=b,exports.TWO=F,exports.Token=Et,exports.Trade=bt,exports.WETH=At,exports.ZERO=I,exports._100=R,exports._1000=U,exports._997=C,exports.currencyEquals=gt,exports.inputOutputComparator=qt,exports.tradeComparator=Ft;
=======
<<<<<<< HEAD
"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e,r,n,o,i,a,u,s,c=t(require("jsbi")),p=t(require("tiny-invariant")),f=t(require("big.js")),d=t(require("decimal.js-light")),h=t(require("toformat")),l=(t(require("tiny-warning")),require("@ethersproject/address")),m=require("@ethersproject/solidity"),y=require("@ethersproject/contracts"),v=require("@ethersproject/networks"),T=require("@ethersproject/providers");(i=exports.ChainId||(exports.ChainId={}))[i.MAINNET=1]="MAINNET",i[i.ROPSTEN=3]="ROPSTEN",i[i.RINKEBY=4]="RINKEBY",i[i["GÖRLI"]=5]="GÖRLI",i[i.KOVAN=42]="KOVAN",i[i.HARDHAT=1337]="HARDHAT",(a=exports.Exchange||(exports.Exchange={}))[a.UNI=0]="UNI",a[a.SUSHI=1]="SUSHI",a[a.UNDEFINED=2]="UNDEFINED",(u=exports.TradeType||(exports.TradeType={}))[u.EXACT_INPUT=0]="EXACT_INPUT",u[u.EXACT_OUTPUT=1]="EXACT_OUTPUT",(s=exports.Rounding||(exports.Rounding={}))[s.ROUND_DOWN=0]="ROUND_DOWN",s[s.ROUND_HALF_UP=1]="ROUND_HALF_UP",s[s.ROUND_UP=2]="ROUND_UP";var x,E=c.BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),g=((e={})[exports.Exchange.UNI]="0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f",e[exports.Exchange.SUSHI]="0xC0AEe478e3658e2610c5F7A4A2E1777cE9e4f2Ac",e[exports.Exchange.UNDEFINED]="0x0",e),A=((r={})[exports.Exchange.UNI]="0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D",r[exports.Exchange.SUSHI]="0xd9e1cE17f2641f24aE83637ab66a2cca9C378B9",r[exports.Exchange.UNDEFINED]="0x0",r),w=((n={})[exports.Exchange.UNI]="0x96e8ac4277198ff8b6f785478aa9a39f403cb768dd02cbee326c3e7da348845f",n[exports.Exchange.SUSHI]="0xe18a34eb0e04b04f7a0ac29a6e80748dca96319b42c54d679cb821dca90c6303",n[exports.Exchange.UNDEFINED]="0x0",n),k=c.BigInt(1e3),I=c.BigInt(0),q=c.BigInt(1),b=c.BigInt(2),F=c.BigInt(3),N=c.BigInt(5),O=c.BigInt(10),R=c.BigInt(100),C=c.BigInt(997),U=c.BigInt(1e3);(x=exports.SolidityType||(exports.SolidityType={})).uint8="uint8",x.uint256="uint256";var P,_=((o={})[exports.SolidityType.uint8]=c.BigInt("0xff"),o[exports.SolidityType.uint256]=c.BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),o);(P=exports.MethodName||(exports.MethodName={})).swapETHForExactTokens="swapETHForExactTokens",P.swapExactETHForTokens="swapExactETHForTokens",P.swapExactTokensForETH="swapExactTokensForETH",P.swapExactTokensForTokens="swapExactTokensForTokens",P.swapTokensForExactETH="swapTokensForExactETH",P.swapTokensForExactTokens="swapTokensForExactTokens";var S={swapETHForExactTokens:"155485",swapExactETHForTokens:"151393",swapExactTokensForETH:"165009",swapExactTokensForTokens:"170272",swapTokensForExactETH:"195192",swapTokensForExactTokens:"197365"};function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function H(t,e,r){return e&&D(t.prototype,e),r&&D(t,r),t}function B(){return(B=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function M(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function L(t,e,r){return(L=X()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&W(o,r.prototype),o}).apply(null,arguments)}function K(t){var e="function"==typeof Map?new Map:void 0;return(K=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return L(t,arguments,j(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),W(r,t)})(t)}function V(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function G(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Y(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}var J,Q,Z,$="setPrototypeOf"in Object,z=function(t){function e(){var r;return(r=t.call(this)||this).isInsufficientReservesError=!0,r.name=r.constructor.name,$&&Object.setPrototypeOf(V(r),(this instanceof e?this.constructor:void 0).prototype),r}return M(e,t),e}(K(Error)),tt=function(t){function e(){var r;return(r=t.call(this)||this).isInsufficientInputAmountError=!0,r.name=r.constructor.name,$&&Object.setPrototypeOf(V(r),(this instanceof e?this.constructor:void 0).prototype),r}return M(e,t),e}(K(Error)),et=function(t,e,r,n){Number.isSafeInteger(t)||p(!1),e>=0&&e<255&&Number.isInteger(e)||p(!1),this.chainId=t,this.decimals=e,this.symbol=r,this.name=n},rt=h(d),nt=h(f),ot=((J={})[exports.Rounding.ROUND_DOWN]=rt.ROUND_DOWN,J[exports.Rounding.ROUND_HALF_UP]=rt.ROUND_HALF_UP,J[exports.Rounding.ROUND_UP]=rt.ROUND_UP,J),it=((Q={})[exports.Rounding.ROUND_DOWN]=0,Q[exports.Rounding.ROUND_HALF_UP]=1,Q[exports.Rounding.ROUND_UP]=3,Q),at=function(){function t(t,e){void 0===e&&(e=c.BigInt(1)),this.numerator=c.BigInt(t),this.denominator=c.BigInt(e)}t.tryParseFraction=function(e){if(e instanceof c||"number"==typeof e||"string"==typeof e)return new t(e);if("numerator"in e&&"denominator"in e)return e;throw new Error("Could not parse fraction")};var e=t.prototype;return e.invert=function(){return new t(this.denominator,this.numerator)},e.add=function(e){var r=t.tryParseFraction(e);return c.equal(this.denominator,r.denominator)?new t(c.add(this.numerator,r.numerator),this.denominator):new t(c.add(c.multiply(this.numerator,r.denominator),c.multiply(r.numerator,this.denominator)),c.multiply(this.denominator,r.denominator))},e.subtract=function(e){var r=t.tryParseFraction(e);return c.equal(this.denominator,r.denominator)?new t(c.subtract(this.numerator,r.numerator),this.denominator):new t(c.subtract(c.multiply(this.numerator,r.denominator),c.multiply(r.numerator,this.denominator)),c.multiply(this.denominator,r.denominator))},e.lessThan=function(e){var r=t.tryParseFraction(e);return c.lessThan(c.multiply(this.numerator,r.denominator),c.multiply(r.numerator,this.denominator))},e.equalTo=function(e){var r=t.tryParseFraction(e);return c.equal(c.multiply(this.numerator,r.denominator),c.multiply(r.numerator,this.denominator))},e.greaterThan=function(e){var r=t.tryParseFraction(e);return c.greaterThan(c.multiply(this.numerator,r.denominator),c.multiply(r.numerator,this.denominator))},e.multiply=function(e){var r=t.tryParseFraction(e);return new t(c.multiply(this.numerator,r.numerator),c.multiply(this.denominator,r.denominator))},e.divide=function(e){var r=t.tryParseFraction(e);return new t(c.multiply(this.numerator,r.denominator),c.multiply(this.denominator,r.numerator))},e.toSignificant=function(t,e,r){void 0===e&&(e={groupSeparator:""}),void 0===r&&(r=exports.Rounding.ROUND_HALF_UP),Number.isInteger(t)||p(!1),t>0||p(!1),rt.set({precision:t+1,rounding:ot[r]});var n=new rt(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(t);return n.toFormat(n.decimalPlaces(),e)},e.toFixed=function(t,e,r){return void 0===e&&(e={groupSeparator:""}),void 0===r&&(r=exports.Rounding.ROUND_HALF_UP),Number.isInteger(t)||p(!1),t>=0||p(!1),nt.DP=t,nt.RM=it[r],new nt(this.numerator.toString()).div(this.denominator.toString()).toFormat(t,e)},H(t,[{key:"quotient",get:function(){return c.divide(this.numerator,this.denominator)}},{key:"remainder",get:function(){return new t(c.remainder(this.numerator,this.denominator),this.denominator)}},{key:"asFraction",get:function(){return new t(this.numerator,this.denominator)}}]),t}(),ut=h(f),st=function(t){function e(e,r,n){var o;return o=t.call(this,r,n)||this,c.lessThanOrEqual(o.quotient,E)||p(!1),o.currency=e,o.decimalScale=c.exponentiate(c.BigInt(10),c.BigInt(e.decimals)),o}M(e,t),e.fromRawAmount=function(t,r){return new e(t,r)},e.fromFractionalAmount=function(t,r,n){return new e(t,r,n)};var r=e.prototype;return r.add=function(r){this.currency.equals(r.currency)||p(!1);var n=t.prototype.add.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},r.subtract=function(r){this.currency.equals(r.currency)||p(!1);var n=t.prototype.subtract.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},r.multiply=function(r){var n=t.prototype.multiply.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},r.divide=function(r){var n=t.prototype.divide.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},r.toSignificant=function(e,r,n){return void 0===e&&(e=6),void 0===n&&(n=exports.Rounding.ROUND_DOWN),t.prototype.divide.call(this,this.decimalScale).toSignificant(e,r,n)},r.toFixed=function(e,r,n){return void 0===e&&(e=this.currency.decimals),void 0===n&&(n=exports.Rounding.ROUND_DOWN),e<=this.currency.decimals||p(!1),t.prototype.divide.call(this,this.decimalScale).toFixed(e,r,n)},r.toExact=function(t){return void 0===t&&(t={groupSeparator:""}),ut.DP=this.currency.decimals,new ut(this.quotient.toString()).div(this.decimalScale.toString()).toFormat(t)},H(e,[{key:"wrapped",get:function(){return this.currency.isToken?this:e.fromFractionalAmount(this.currency.wrapped,this.numerator,this.denominator)}}]),e}(at),ct=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).isNative=!0,e.isToken=!1,e}return M(e,t),e}(et),pt=function(t){function e(){for(var e,r,n,o,i,a=arguments.length,u=new Array(a),s=0;s<a;s++)u[s]=arguments[s];if(4===u.length)r=u[0],n=u[1],o=u[2],i=u[3];else{var p=u[0].quoteAmount.divide(u[0].baseAmount),f=[u[0].baseAmount.currency,u[0].quoteAmount.currency,p.denominator,p.numerator];r=f[0],n=f[1],o=f[2],i=f[3]}return(e=t.call(this,i,o)||this).baseCurrency=r,e.quoteCurrency=n,e.scalar=new at(c.exponentiate(c.BigInt(10),c.BigInt(r.decimals)),c.exponentiate(c.BigInt(10),c.BigInt(n.decimals))),e}M(e,t);var r=e.prototype;return r.invert=function(){return new e(this.quoteCurrency,this.baseCurrency,this.numerator,this.denominator)},r.multiply=function(r){this.quoteCurrency.equals(r.baseCurrency)||p(!1);var n=t.prototype.multiply.call(this,r);return new e(this.baseCurrency,r.quoteCurrency,n.denominator,n.numerator)},r.quote=function(e){e.currency.equals(this.baseCurrency)||p(!1);var r=t.prototype.multiply.call(this,e);return st.fromFractionalAmount(this.quoteCurrency,r.numerator,r.denominator)},r.toSignificant=function(t,e,r){return void 0===t&&(t=6),this.adjustedForDecimals.toSignificant(t,e,r)},r.toFixed=function(t,e,r){return void 0===t&&(t=4),this.adjustedForDecimals.toFixed(t,e,r)},H(e,[{key:"adjustedForDecimals",get:function(){return t.prototype.multiply.call(this,this.scalar)}}]),e}(at),ft=new at(R),dt=function(t){function e(){return t.apply(this,arguments)||this}M(e,t);var r=e.prototype;return r.toSignificant=function(t,e,r){return void 0===t&&(t=5),this.multiply(ft).toSignificant(t,e,r)},r.toFixed=function(t,e,r){return void 0===t&&(t=2),this.multiply(ft).toFixed(t,e,r)},e}(at);function ht(t){try{return l.getAddress(t)}catch(t){p(!1)}}function lt(t){return t instanceof c?t:c.BigInt(t)}function mt(t,e){void 0===t&&(t="swapTokensForExactETH"),void 0===e&&(e="1");var r=lt(S[t]),n=lt("0"),o=c.multiply(lt(e),n);return c.add(r,o)}function yt(t,e,r){t=lt(t),e=lt(e);var n=vt(t,r);return c.multiply(n,e)}function vt(t,e){t=lt(t),e=c.multiply(lt(e),lt("100"));var r=c.multiply(t,c.add(lt("10000"),e)),n=lt("10000");return c.divide(r,n)}function Tt(t){var e,r;e=t,r=exports.SolidityType.uint256,c.greaterThanOrEqual(e,I)||p(!1),c.lessThanOrEqual(e,_[r])||p(!1);var n,o=I;if(c.greaterThan(t,F))for(o=t,n=c.add(c.divide(t,b),q);c.lessThan(n,o);)o=n,n=c.divide(c.add(c.divide(t,n),n),b);else c.notEqual(t,I)&&(o=q);return o}function xt(t,e,r,n){if(r>0||p(!1),t.length<=r||p(!1),0===t.length)return t.push(e),null;var o=t.length===r;if(o&&n(t[t.length-1],e)<=0)return e;for(var i=0,a=t.length;i<a;){var u=i+a>>>1;n(t[u],e)<=0?i=u+1:a=u}return t.splice(i,0,e),o?t.pop():null}var Et=function(t){function e(e,r,n,o,i){var a;return(a=t.call(this,e,n,o,i)||this).isNative=!1,a.isToken=!0,a.chainId=e,a.address=ht(r),a}M(e,t);var r=e.prototype;return r.equals=function(t){return t.isToken&&this.chainId===t.chainId&&this.address===t.address},r.sortsBefore=function(t){return this.chainId!==t.chainId&&p(!1),this.address===t.address&&p(!1),this.address.toLowerCase()<t.address.toLowerCase()},H(e,[{key:"wrapped",get:function(){return this}}]),e}(et);function gt(t,e){return t instanceof Et&&e instanceof Et?t.equals(e):!(t instanceof Et||e instanceof Et||t!==e)}var At=((Z={})[exports.ChainId.MAINNET]=new Et(exports.ChainId.MAINNET,"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",18,"WETH","Wrapped Ether"),Z[exports.ChainId.HARDHAT]=new Et(exports.ChainId.HARDHAT,"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",18,"WETH","Wrapped Ether"),Z[exports.ChainId.ROPSTEN]=new Et(exports.ChainId.ROPSTEN,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),Z[exports.ChainId.RINKEBY]=new Et(exports.ChainId.RINKEBY,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),Z[exports.ChainId.GÖRLI]=new Et(exports.ChainId.GÖRLI,"0xB4FBF271143F4FBf7B91A5ded31805e42b2208d6",18,"WETH","Wrapped Ether"),Z[exports.ChainId.KOVAN]=new Et(exports.ChainId.KOVAN,"0xd0A1E359811322d97991E03f863a0C30C2cF029C",18,"WETH","Wrapped Ether"),Z),wt=function(){function t(e,r,n){var o=e.currency.sortsBefore(r.currency)?[e,r]:[r,e];this.liquidityToken=new Et(o[0].currency.chainId,t.getAddress(o[0].currency,o[1].currency,n),18,"UNI-V2","Uniswap V2"),this.tokenAmounts=o,this.exchange=n}t.getAddress=function(t,e,r){return function(t){var e=t.exchange,r=t.tokenA,n=t.tokenB,o=r.sortsBefore(n)?[r,n]:[n,r];return l.getCreate2Address(g[e],m.keccak256(["bytes"],[m.pack(["address","address"],[o[0].address,o[1].address])]),w[e])}({exchange:r,tokenA:t,tokenB:e})};var e=t.prototype;return e.involvesToken=function(t){return t.equals(this.token0)||t.equals(this.token1)},e.priceOf=function(t){return this.involvesToken(t)||p(!1),t.equals(this.token0)?this.token0Price:this.token1Price},e.reserveOf=function(t){return this.involvesToken(t)||p(!1),t.equals(this.token0)?this.reserve0:this.reserve1},e.getOutputAmount=function(e){if(this.involvesToken(e.currency)||p(!1),c.equal(this.reserve0.quotient,I)||c.equal(this.reserve1.quotient,I))throw new z;var r=this.reserveOf(e.currency),n=this.reserveOf(e.currency.equals(this.token0)?this.token1:this.token0),o=c.multiply(e.quotient,C),i=c.multiply(o,n.quotient),a=c.add(c.multiply(r.quotient,U),o),u=st.fromRawAmount(e.currency.equals(this.token0)?this.token1:this.token0,c.divide(i,a));if(c.equal(u.quotient,I))throw new tt;return[u,new t(r.add(e),n.subtract(u),this.exchange)]},e.getInputAmount=function(e){if(this.involvesToken(e.currency)||p(!1),c.equal(this.reserve0.quotient,I)||c.equal(this.reserve1.quotient,I)||c.greaterThanOrEqual(e.quotient,this.reserveOf(e.currency).quotient))throw new z;var r=this.reserveOf(e.currency),n=this.reserveOf(e.currency.equals(this.token0)?this.token1:this.token0),o=c.multiply(c.multiply(n.quotient,e.quotient),U),i=c.multiply(c.subtract(r.quotient,e.quotient),C),a=st.fromRawAmount(e.currency.equals(this.token0)?this.token1:this.token0,c.add(c.divide(o,i),q));return[a,new t(n.add(a),r.subtract(e),this.exchange)]},e.getLiquidityMinted=function(t,e,r){t.currency.equals(this.liquidityToken)||p(!1);var n,o=e.currency.sortsBefore(r.currency)?[e,r]:[r,e];if(o[0].currency.equals(this.token0)&&o[1].currency.equals(this.token1)||p(!1),c.equal(t.quotient,I))n=c.subtract(Tt(c.multiply(o[0].quotient,o[1].quotient)),k);else{var i=c.divide(c.multiply(o[0].quotient,t.quotient),this.reserve0.quotient),a=c.divide(c.multiply(o[1].quotient,t.quotient),this.reserve1.quotient);n=c.lessThanOrEqual(i,a)?i:a}if(!c.greaterThan(n,I))throw new tt;return st.fromRawAmount(this.liquidityToken,n)},e.getLiquidityValue=function(t,e,r,n,o){var i;if(void 0===n&&(n=!1),this.involvesToken(t)||p(!1),e.currency.equals(this.liquidityToken)||p(!1),r.currency.equals(this.liquidityToken)||p(!1),c.lessThanOrEqual(r.quotient,e.quotient)||p(!1),n){o||p(!1);var a=c.BigInt(o);if(c.equal(a,I))i=e;else{var u=Tt(c.multiply(this.reserve0.quotient,this.reserve1.quotient)),s=Tt(a);if(c.greaterThan(u,s)){var f=c.multiply(e.quotient,c.subtract(u,s)),d=c.add(c.multiply(u,N),s),h=c.divide(f,d);i=e.add(st.fromRawAmount(this.liquidityToken,h))}else i=e}}else i=e;return st.fromRawAmount(t,c.divide(c.multiply(r.quotient,this.reserveOf(t).quotient),i.quotient))},H(t,[{key:"token0Price",get:function(){var t=this.tokenAmounts[1].divide(this.tokenAmounts[0]);return new pt(this.token0,this.token1,t.denominator,t.numerator)}},{key:"token1Price",get:function(){var t=this.tokenAmounts[0].divide(this.tokenAmounts[1]);return new pt(this.token1,this.token0,t.denominator,t.numerator)}},{key:"chainId",get:function(){return this.token0.chainId}},{key:"token0",get:function(){return this.tokenAmounts[0].currency}},{key:"token1",get:function(){return this.tokenAmounts[1].currency}},{key:"reserve0",get:function(){return this.tokenAmounts[0]}},{key:"reserve1",get:function(){return this.tokenAmounts[1]}}]),t}(),kt=function(){function t(t,e,r){this._midPrice=null,t.length>0||p(!1);var n=t[0].chainId;t.every((function(t){return t.chainId===n}))||p(!1);var o=e.wrapped;t[0].involvesToken(o)||p(!1),void 0===r||t[t.length-1].involvesToken(r.wrapped)||p(!1);for(var i,a=[o],u=G(t.entries());!(i=u()).done;){var s=i.value,c=s[1],f=a[s[0]];f.equals(c.token0)||f.equals(c.token1)||p(!1);var d=f.equals(c.token0)?c.token1:c.token0;a.push(d)}this.pairs=t,this.path=a,this.input=e,this.output=r}return H(t,[{key:"midPrice",get:function(){if(null!==this._midPrice)return this._midPrice;for(var t,e=[],r=G(this.pairs.entries());!(t=r()).done;){var n=t.value,o=n[1];e.push(this.path[n[0]].equals(o.token0)?new pt(o.reserve0.currency,o.reserve1.currency,o.reserve0.quotient,o.reserve1.quotient):new pt(o.reserve1.currency,o.reserve0.currency,o.reserve1.quotient,o.reserve0.quotient))}var i=e.slice(1).reduce((function(t,e){return t.multiply(e)}),e[0]);return this._midPrice=new pt(this.input,this.output,i.denominator,i.numerator)}},{key:"chainId",get:function(){return this.pairs[0].chainId}}]),t}(),It=function(t){function e(e){return t.call(this,e,18,"ETH","Ether")||this}return M(e,t),e.onChain=function(t){var r;return null!==(r=this._etherCache[t])&&void 0!==r?r:this._etherCache[t]=new e(t)},e.prototype.equals=function(t){return t.isNative&&t.chainId===this.chainId},H(e,[{key:"wrapped",get:function(){var t=At[this.chainId];return t||p(!1),t}}]),e}(ct);function qt(t,e){return t.inputAmount.currency.equals(e.inputAmount.currency)||p(!1),t.outputAmount.currency.equals(e.outputAmount.currency)||p(!1),t.outputAmount.equalTo(e.outputAmount)?t.inputAmount.equalTo(e.inputAmount)?0:t.inputAmount.lessThan(e.inputAmount)?-1:1:t.outputAmount.lessThan(e.outputAmount)?1:-1}function bt(t,e){var r=qt(t,e);return 0!==r?r:t.priceImpact.lessThan(e.priceImpact)?-1:t.priceImpact.greaterThan(e.priceImpact)?1:t.route.path.length-e.route.path.length}It._etherCache={};var Ft=function(){function t(e,r,n,o,i){this.route=e,this.tradeType=n;var a=new Array(e.path.length),u=new Array(e.pairs.length),s=e.input.isNative,c=e.output.isNative,f=mt(t.methodNameForTradeType(n,s,c),(e.path.length-1).toString()),d=yt(o,f,i);this.estimatedGas=f.toString(),this.minerBribe=st.fromRawAmount(At[e.chainId],d);var h=r.wrapped,l=r.wrapped;if(n===exports.TradeType.EXACT_INPUT){gt(r.currency,e.input)||p(!1),a[0]=r.wrapped;for(var m=0;m<e.path.length-1;m++){var y=e.pairs[m],v=a[m];if(s&&0===m){v.greaterThan(this.minerBribe)||p(!1);var T=v.subtract(this.minerBribe);v=T,h=T}var x=y.getOutputAmount(v),E=x[0],g=x[1];if(c&&m===e.path.length-2){E.greaterThan(this.minerBribe)||p(!1);var A=E.subtract(this.minerBribe);a[m+1]=A,l=E}else l=E,a[m+1]=E;u[m]=g}}else{gt(r.currency,e.output)||p(!1),a[a.length-1]=r.wrapped;for(var w=e.path.length-1;w>0;w--){var k=a[w];if(c&&w===e.path.length-1){var I=k.add(this.minerBribe);k=I,l=I}else w===e.path.length-1&&(l=k);var q=e.pairs[w-1].getInputAmount(k),b=q[0],F=q[1];if(s&&1===w){var N=b.add(this.minerBribe);a[w-1]=N,h=b}else a[w-1]=1===w?h=b:b;u[w-1]=F}}this.exchange=e.pairs[0].exchange,this.inputAmount=st.fromFractionalAmount(e.input,a[0].numerator,a[0].denominator),this.outputAmount=st.fromFractionalAmount(e.output,a[a.length-1].numerator,a[a.length-1].denominator),this.executionPrice=new pt(e.input,e.output,h.quotient,l.quotient),this.priceImpact=function(t,e,r){var n=t.quote(e),o=n.subtract(r).divide(n);return new dt(o.numerator,o.denominator)}(e.midPrice,this.inputAmount,this.outputAmount)}t.exactIn=function(e,r,n,o){return new t(e,r,exports.TradeType.EXACT_INPUT,n,o)},t.exactOut=function(e,r,n,o){return new t(e,r,exports.TradeType.EXACT_OUTPUT,n,o)};var e=t.prototype;return e.minimumAmountOut=function(t){if(t.lessThan(I)&&p(!1),this.tradeType===exports.TradeType.EXACT_OUTPUT)return this.outputAmount;var e=new at(q).add(t).invert().multiply(this.outputAmount.quotient).quotient;return st.fromRawAmount(this.outputAmount.currency,e)},e.maximumAmountIn=function(t){if(t.lessThan(I)&&p(!1),this.tradeType===exports.TradeType.EXACT_INPUT)return this.inputAmount;var e=new at(q).add(t).multiply(this.inputAmount.quotient).quotient;return st.fromRawAmount(this.inputAmount.currency,e)},t.bestTradeExactIn=function(e,r,n,o,i,a,u,s,c){var f=void 0===a?{}:a,d=f.maxNumResults,h=void 0===d?3:d,l=f.maxHops,m=void 0===l?3:l;void 0===u&&(u=[]),void 0===s&&(s=r),void 0===c&&(c=[]),e.length>0||p(!1),m>0||p(!1),s===r||u.length>0||p(!1);for(var y=exports.TradeType.EXACT_INPUT,v=s.wrapped,T=n.wrapped,x=0;x<e.length;x++){var E=e[x];if((E.token0.equals(v.currency)||E.token1.equals(v.currency))&&!E.reserve0.equalTo(I)&&!E.reserve1.equalTo(I)){var g=void 0;try{g=E.getOutputAmount(v)[0]}catch(t){if(t.isInsufficientInputAmountError)continue;throw t}if(g.currency.equals(T))try{xt(c,new t(new kt([].concat(u,[E]),r.currency,n),r,y,o,i),h,bt)}catch(t){}else if(m>1&&e.length>1){var A=e.slice(0,x).concat(e.slice(x+1,e.length));t.bestTradeExactIn(A,r,n,o,i,{maxNumResults:h,maxHops:m-1},[].concat(u,[E]),g,c)}}}return c},t.bestTradeExactOut=function(e,r,n,o,i,a,u,s,c){var f=void 0===a?{}:a,d=f.maxNumResults,h=void 0===d?3:d,l=f.maxHops,m=void 0===l?3:l;void 0===u&&(u=[]),void 0===s&&(s=n),void 0===c&&(c=[]),e.length>0||p(!1),m>0||p(!1),s===n||u.length>0||p(!1);for(var y=s.wrapped,v=r.wrapped,T=0;T<e.length;T++){var x=e[T];if((x.token0.equals(y.currency)||x.token1.equals(y.currency))&&!x.reserve0.equalTo(I)&&!x.reserve1.equalTo(I)){var E=void 0;try{E=x.getInputAmount(y)[0]}catch(t){if(t.isInsufficientReservesError)continue;throw t}if(E.currency.equals(v))try{xt(c,new t(new kt([x].concat(u),r,n.currency),n,exports.TradeType.EXACT_OUTPUT,o,i),h,bt)}catch(t){}else if(m>1&&e.length>1){var g=e.slice(0,T).concat(e.slice(T+1,e.length));t.bestTradeExactOut(g,r,n,o,i,{maxNumResults:h,maxHops:m-1},[x].concat(u),E,c)}}}return c},t.methodNameForTradeType=function(t,e,r,n){var o;switch(t){case exports.TradeType.EXACT_INPUT:o=e?"swapExactETHForTokens":r?"swapExactTokensForETH":"swapExactTokensForTokens";break;case exports.TradeType.EXACT_OUTPUT:n&&p(!1),o=e?"swapETHForExactTokens":r?"swapTokensForExactETH":"swapTokensForExactTokens"}return o},t.estimateMinTradeAmounts=function(e,r,n,o,i,a,u){var s,c=(void 0===u?{}:u).maxHops,p=void 0===c?3:c,f=r.isNative,d=n.isNative;if(!f&&!d)return null;var h,l,m=mt(t.methodNameForTradeType(exports.TradeType.EXACT_INPUT,f,d),p.toString()),y=mt(t.methodNameForTradeType(exports.TradeType.EXACT_OUTPUT,f,d),p.toString()),v=vt(yt(o,m,i),a),T=vt(yt(o,y,i),a);if(f){var x=t.bestTradeExactOut(e,n,st.fromRawAmount(r,T),"0","0")[0];x&&(h=st.fromRawAmount(r,v),l=x.inputAmount)}else if(d){var E=t.bestTradeExactIn(e,st.fromRawAmount(r,v),r,"0","0")[0];E&&(h=E.outputAmount,l=st.fromRawAmount(r,T))}return h&&l?((s={})[exports.TradeType.EXACT_INPUT]=h,s[exports.TradeType.EXACT_OUTPUT]=l,s):null},t.estimateBribeAmounts=function(t,e){var r,n=It.onChain(1),o=((r={})[exports.MethodName.swapETHForExactTokens]=st.fromRawAmount(n,yt(t,mt("swapETHForExactTokens"),e)),r[exports.MethodName.swapExactETHForTokens]=st.fromRawAmount(n,yt(t,mt("swapExactETHForTokens"),e)),r[exports.MethodName.swapExactTokensForETH]=st.fromRawAmount(n,yt(t,mt("swapExactTokensForETH"),e)),r[exports.MethodName.swapExactTokensForTokens]=st.fromRawAmount(n,yt(t,mt("swapExactTokensForTokens"),e)),r[exports.MethodName.swapTokensForExactETH]=st.fromRawAmount(n,yt(t,mt("swapTokensForExactETH"),e)),r[exports.MethodName.swapTokensForExactTokens]=st.fromRawAmount(n,yt(t,mt("swapTokensForExactTokens"),e)),r),i=st.fromRawAmount(n,"1000000000000000000000000000000000000000000000000"),a=st.fromRawAmount(n,"0"),u=st.fromRawAmount(n,"0");for(var s in exports.MethodName){var p=o[s];u.add(p),p.lessThan(i)&&(i=p),p.greaterThan(a)&&(a=p)}var f=u.divide(String(Object.keys(exports.MethodName).length));return{estimates:o,minBribe:i,maxBribe:a,meanBribe:st.fromRawAmount(n,c.divide(f.numerator,f.denominator))}},t}();function Nt(t){return"0x"+t.quotient.toString(16)}var Ot,Rt=function(){function t(){}return t.swapCallParameters=function(t,e){var r=t.inputAmount.currency.isNative,n=t.outputAmount.currency.isNative;r&&n&&p(!1),!("ttl"in e)||e.ttl>0||p(!1);var o,i=ht(e.recipient),a=Nt(t.maximumAmountIn(e.allowedSlippage)),u=Nt(t.minimumAmountOut(e.allowedSlippage)),s=Nt(t.minerBribe),c=t.route.path.map((function(t){return t.address})),f="ttl"in e?"0x"+(Math.floor((new Date).getTime()/1e3)+e.ttl).toString(16):"0x"+e.deadline.toString(16),d=Boolean(e.feeOnTransfer),h={amount0:a,amount1:u,path:c,to:i,deadline:f},l=Ft.methodNameForTradeType(t.tradeType,r,n,d);switch(l){case"swapExactETHForTokens":h.amount0=a,h.amount1=u,o=a;break;case"swapExactTokensForETH":h.amount0=a,h.amount1=u,o="0x0";break;case"swapExactTokensForTokens":h.amount0=a,h.amount1=u,o=s;break;case"swapETHForExactTokens":d&&p(!1),h.amount0=a,h.amount1=u,o=a;break;case"swapTokensForExactETH":case"swapTokensForExactTokens":d&&p(!1),h.amount0=u,h.amount1=a,o=s;break;default:o=""}var m=[[h.amount0,h.amount1,h.path,h.to,h.deadline],s];return l&&m&&o||p(!1),{methodName:l,args:m,value:o}},t}(),Ct=[{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],Ut=((Ot={})[exports.ChainId.MAINNET]={"0xE0B7927c4aF23765Cb51314A0E0521A9645F0E2A":9},Ot),Pt=function(){function t(){}return t.fetchTokenData=function(t,e,r,n,o){try{var i,a,u=function(r){return new Et(t,e,r,n,o)};void 0===r&&(r=T.getDefaultProvider(v.getNetwork(t)));var s="number"==typeof(null===(i=Ut)||void 0===i||null===(a=i[t])||void 0===a?void 0:a[e]);return Promise.resolve(s?u(Ut[t][e]):Promise.resolve(new y.Contract(e,Ct,r).decimals().then((function(r){var n,o,i;return Ut=B({},Ut,((i={})[t]=B({},null===(n=Ut)||void 0===n?void 0:n[t],((o={})[e]=r,o)),i)),r}))).then(u))}catch(t){return Promise.reject(t)}},t}();exports.JSBI=c,exports.AbstractCurrency=et,exports.CurrencyAmount=st,exports.Ether=It,exports.FACTORY_ADDRESS=g,exports.FIVE=N,exports.Fetcher=Pt,exports.Fraction=at,exports.GAS_ESTIMATES=S,exports.INIT_CODE_HASH=w,exports.InsufficientInputAmountError=tt,exports.InsufficientReservesError=z,exports.MINIMUM_LIQUIDITY=k,exports.MaxUint256=E,exports.NativeCurrency=ct,exports.ONE=q,exports.Pair=wt,exports.Percent=dt,exports.Price=pt,exports.ROUTER_ADDRESS=A,exports.Route=kt,exports.Router=Rt,exports.SOLIDITY_TYPE_MAXIMA=_,exports.TEN=O,exports.THREE=F,exports.TWO=b,exports.Token=Et,exports.Trade=Ft,exports.WETH=At,exports.ZERO=I,exports._100=R,exports._1000=U,exports._997=C,exports.currencyEquals=gt,exports.inputOutputComparator=qt,exports.tradeComparator=bt;
=======
"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e,n,r,o,i,a,u,s,c=t(require("jsbi")),d=t(require("tiny-invariant")),p=(t(require("tiny-warning")),require("@ethersproject/address")),h=t(require("big.js")),l=t(require("toformat")),f=t(require("decimal.js-light")),m=require("@ethersproject/solidity"),T=require("@ethersproject/contracts"),v=require("@ethersproject/networks"),y=require("@ethersproject/providers");require("socket.io-client"),(i=exports.ChainId||(exports.ChainId={}))[i.MAINNET=1]="MAINNET",i[i.ROPSTEN=3]="ROPSTEN",i[i.RINKEBY=4]="RINKEBY",i[i["GÖRLI"]=5]="GÖRLI",i[i.KOVAN=42]="KOVAN",i[i.HARDHAT=1337]="HARDHAT",(a=exports.Exchange||(exports.Exchange={}))[a.UNI=0]="UNI",a[a.SUSHI=1]="SUSHI",a[a.UNDEFINED=2]="UNDEFINED",(u=exports.TradeType||(exports.TradeType={}))[u.EXACT_INPUT=0]="EXACT_INPUT",u[u.EXACT_OUTPUT=1]="EXACT_OUTPUT",(s=exports.Rounding||(exports.Rounding={}))[s.ROUND_DOWN=0]="ROUND_DOWN",s[s.ROUND_HALF_UP=1]="ROUND_HALF_UP",s[s.ROUND_UP=2]="ROUND_UP";var E,A=((e={})[exports.Exchange.UNI]="0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f",e[exports.Exchange.SUSHI]="0xC0AEe478e3658e2610c5F7A4A2E1777cE9e4f2Ac",e[exports.Exchange.UNDEFINED]="0x0",e),w=((n={})[exports.Exchange.UNI]="0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D",n[exports.Exchange.SUSHI]="0xd9e1cE17f2641f24aE83637ab66a2cca9C378B9",n[exports.Exchange.UNDEFINED]="0x0",n),I=((r={})[exports.Exchange.UNI]="0x96e8ac4277198ff8b6f785478aa9a39f403cb768dd02cbee326c3e7da348845f",r[exports.Exchange.SUSHI]="0xe18a34eb0e04b04f7a0ac29a6e80748dca96319b42c54d679cb821dca90c6303",r[exports.Exchange.UNDEFINED]="0x0",r),x=c.BigInt(1e3),g=c.BigInt(0),N=c.BigInt(1),k=c.BigInt(2),O=c.BigInt(3),S=c.BigInt(5),C=c.BigInt(10),R=c.BigInt(100),_=c.BigInt(997),b=c.BigInt(1e3);!function(t){t.uint8="uint8",t.uint256="uint256"}(E||(E={}));var U=((o={})[E.uint8]=c.BigInt("0xff"),o[E.uint256]=c.BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),o),q={swapETHForExactTokens:"174552",swapExactETHForTokens:"161308",swapExactTokensForETH:"146057",swapExactTokensForTokens:"143216",swapTokensForExactETH:"189218",swapTokensForExactTokens:"185096"};function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function F(t,e,n){return e&&D(t.prototype,e),n&&D(t,n),t}function P(){return(P=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function H(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function W(t,e,n){return(W=j()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&L(o,n.prototype),o}).apply(null,arguments)}function M(t){var e="function"==typeof Map?new Map:void 0;return(M=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return W(t,arguments,B(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),L(n,t)})(t)}function X(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function G(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return K(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}var Q="setPrototypeOf"in Object,V=function(t){function e(){var n;return(n=t.call(this)||this).isInsufficientReservesError=!0,n.name=n.constructor.name,Q&&Object.setPrototypeOf(X(n),(this instanceof e?this.constructor:void 0).prototype),n}return H(e,t),e}(M(Error)),Y=function(t){function e(){var n;return(n=t.call(this)||this).isInsufficientInputAmountError=!0,n.name=n.constructor.name,Q&&Object.setPrototypeOf(X(n),(this instanceof e?this.constructor:void 0).prototype),n}return H(e,t),e}(M(Error));function J(t,e){c.greaterThanOrEqual(t,g)||d(!1),c.lessThanOrEqual(t,U[e])||d(!1)}function $(t){try{return p.getAddress(t)}catch(t){d(!1)}}function z(t){return t instanceof c?t:c.BigInt("bigint"==typeof t?t.toString():t)}function Z(t,e){void 0===t&&(t="swapTokensForExactETH"),void 0===e&&(e="1");var n=z(q[t]),r=z("0"),o=c.multiply(z(e),r);return c.add(n,o)}function tt(t,e,n){t=z(t),e=z(e);var r=et(t,n);return c.multiply(r,e)}function et(t,e){t=z(t),e=c.multiply(z(e),z("100"));var n=c.multiply(t,c.add(z("10000"),e)),r=z("10000");return c.divide(n,r)}function nt(t){J(t,E.uint256);var e,n=g;if(c.greaterThan(t,O))for(n=t,e=c.add(c.divide(t,k),N);c.lessThan(e,n);)n=e,e=c.divide(c.add(c.divide(t,e),e),k);else c.notEqual(t,g)&&(n=N);return n}function rt(t,e,n,r){if(n>0||d(!1),t.length<=n||d(!1),0===t.length)return t.push(e),null;var o=t.length===n;if(o&&r(t[t.length-1],e)<=0)return e;for(var i=0,a=t.length;i<a;){var u=i+a>>>1;r(t[u],e)<=0?i=u+1:a=u}return t.splice(i,0,e),o?t.pop():null}var ot,it=function(t,e,n){J(c.BigInt(t),E.uint8),this.decimals=t,this.symbol=e,this.name=n},at=it.ETHER=new it(18,"ETH","Ether"),ut=function(t){function e(e,n,r,o,i){var a;return(a=t.call(this,r,o,i)||this).chainId=e,a.address=$(n),a}H(e,t);var n=e.prototype;return n.equals=function(t){return this===t||this.chainId===t.chainId&&this.address===t.address},n.sortsBefore=function(t){return this.chainId!==t.chainId&&d(!1),this.address===t.address&&d(!1),this.address.toLowerCase()<t.address.toLowerCase()},e}(it);function st(t,e){return t instanceof ut&&e instanceof ut?t.equals(e):!(t instanceof ut||e instanceof ut||t!==e)}var ct,dt,pt=((ot={})[exports.ChainId.MAINNET]=new ut(exports.ChainId.MAINNET,"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",18,"WETH","Wrapped Ether"),ot[exports.ChainId.HARDHAT]=new ut(exports.ChainId.HARDHAT,"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",18,"WETH","Wrapped Ether"),ot[exports.ChainId.ROPSTEN]=new ut(exports.ChainId.ROPSTEN,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),ot[exports.ChainId.RINKEBY]=new ut(exports.ChainId.RINKEBY,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),ot[exports.ChainId.GÖRLI]=new ut(exports.ChainId.GÖRLI,"0xB4FBF271143F4FBf7B91A5ded31805e42b2208d6",18,"WETH","Wrapped Ether"),ot[exports.ChainId.KOVAN]=new ut(exports.ChainId.KOVAN,"0xd0A1E359811322d97991E03f863a0C30C2cF029C",18,"WETH","Wrapped Ether"),ot),ht=l(f),lt=l(h),ft=((ct={})[exports.Rounding.ROUND_DOWN]=ht.ROUND_DOWN,ct[exports.Rounding.ROUND_HALF_UP]=ht.ROUND_HALF_UP,ct[exports.Rounding.ROUND_UP]=ht.ROUND_UP,ct),mt=((dt={})[exports.Rounding.ROUND_DOWN]=0,dt[exports.Rounding.ROUND_HALF_UP]=1,dt[exports.Rounding.ROUND_UP]=3,dt),Tt=function(){function t(t,e){void 0===e&&(e=N),this.numerator=z(t),this.denominator=z(e)}var e=t.prototype;return e.invert=function(){return new t(this.denominator,this.numerator)},e.add=function(e){var n=e instanceof t?e:new t(z(e));return c.equal(this.denominator,n.denominator)?new t(c.add(this.numerator,n.numerator),this.denominator):new t(c.add(c.multiply(this.numerator,n.denominator),c.multiply(n.numerator,this.denominator)),c.multiply(this.denominator,n.denominator))},e.subtract=function(e){var n=e instanceof t?e:new t(z(e));return c.equal(this.denominator,n.denominator)?new t(c.subtract(this.numerator,n.numerator),this.denominator):new t(c.subtract(c.multiply(this.numerator,n.denominator),c.multiply(n.numerator,this.denominator)),c.multiply(this.denominator,n.denominator))},e.lessThan=function(e){var n=e instanceof t?e:new t(z(e));return c.lessThan(c.multiply(this.numerator,n.denominator),c.multiply(n.numerator,this.denominator))},e.equalTo=function(e){var n=e instanceof t?e:new t(z(e));return c.equal(c.multiply(this.numerator,n.denominator),c.multiply(n.numerator,this.denominator))},e.greaterThan=function(e){var n=e instanceof t?e:new t(z(e));return c.greaterThan(c.multiply(this.numerator,n.denominator),c.multiply(n.numerator,this.denominator))},e.multiply=function(e){var n=e instanceof t?e:new t(z(e));return new t(c.multiply(this.numerator,n.numerator),c.multiply(this.denominator,n.denominator))},e.divide=function(e){var n=e instanceof t?e:new t(z(e));return new t(c.multiply(this.numerator,n.denominator),c.multiply(this.denominator,n.numerator))},e.toSignificant=function(t,e,n){void 0===e&&(e={groupSeparator:""}),void 0===n&&(n=exports.Rounding.ROUND_HALF_UP),Number.isInteger(t)||d(!1),t>0||d(!1),ht.set({precision:t+1,rounding:ft[n]});var r=new ht(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(t);return r.toFormat(r.decimalPlaces(),e)},e.toFixed=function(t,e,n){return void 0===e&&(e={groupSeparator:""}),void 0===n&&(n=exports.Rounding.ROUND_HALF_UP),Number.isInteger(t)||d(!1),t>=0||d(!1),lt.DP=t,lt.RM=mt[n],new lt(this.numerator.toString()).div(this.denominator.toString()).toFormat(t,e)},F(t,[{key:"quotient",get:function(){return c.divide(this.numerator,this.denominator)}},{key:"remainder",get:function(){return new t(c.remainder(this.numerator,this.denominator),this.denominator)}}]),t}(),vt=l(h),yt=function(t){function e(e,n){var r,o=z(n);return J(o,E.uint256),(r=t.call(this,o,c.exponentiate(C,c.BigInt(e.decimals)))||this).currency=e,r}H(e,t),e.ether=function(t){return new e(at,t)};var n=e.prototype;return n.add=function(t){return st(this.currency,t.currency)||d(!1),new e(this.currency,c.add(this.raw,t.raw))},n.subtract=function(t){return st(this.currency,t.currency)||d(!1),new e(this.currency,c.subtract(this.raw,t.raw))},n.toSignificant=function(e,n,r){return void 0===e&&(e=6),void 0===r&&(r=exports.Rounding.ROUND_DOWN),t.prototype.toSignificant.call(this,e,n,r)},n.toFixed=function(e,n,r){return void 0===e&&(e=this.currency.decimals),void 0===r&&(r=exports.Rounding.ROUND_DOWN),e<=this.currency.decimals||d(!1),t.prototype.toFixed.call(this,e,n,r)},n.toExact=function(t){return void 0===t&&(t={groupSeparator:""}),vt.DP=this.currency.decimals,new vt(this.numerator.toString()).div(this.denominator.toString()).toFormat(t)},F(e,[{key:"raw",get:function(){return this.numerator}}]),e}(Tt),Et=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).token=e,r}H(e,t);var n=e.prototype;return n.add=function(t){return this.token.equals(t.token)||d(!1),new e(this.token,c.add(this.raw,t.raw))},n.subtract=function(t){return this.token.equals(t.token)||d(!1),new e(this.token,c.subtract(this.raw,t.raw))},e}(yt),At=function(t){function e(e,n,r,o){var i;return(i=t.call(this,o,r)||this).baseCurrency=e,i.quoteCurrency=n,i.scalar=new Tt(c.exponentiate(C,c.BigInt(e.decimals)),c.exponentiate(C,c.BigInt(n.decimals))),i}H(e,t),e.fromRoute=function(t){for(var n,r=[],o=G(t.pairs.entries());!(n=o()).done;){var i=n.value,a=i[1];r.push(t.path[i[0]].equals(a.token0)?new e(a.reserve0.currency,a.reserve1.currency,a.reserve0.raw,a.reserve1.raw):new e(a.reserve1.currency,a.reserve0.currency,a.reserve1.raw,a.reserve0.raw))}return r.slice(1).reduce((function(t,e){return t.multiply(e)}),r[0])};var n=e.prototype;return n.invert=function(){return new e(this.quoteCurrency,this.baseCurrency,this.numerator,this.denominator)},n.multiply=function(n){st(this.quoteCurrency,n.baseCurrency)||d(!1);var r=t.prototype.multiply.call(this,n);return new e(this.baseCurrency,n.quoteCurrency,r.denominator,r.numerator)},n.quote=function(e){return st(e.currency,this.baseCurrency)||d(!1),this.quoteCurrency instanceof ut?new Et(this.quoteCurrency,t.prototype.multiply.call(this,e.raw).quotient):yt.ether(t.prototype.multiply.call(this,e.raw).quotient)},n.toSignificant=function(t,e,n){return void 0===t&&(t=6),this.adjusted.toSignificant(t,e,n)},n.toFixed=function(t,e,n){return void 0===t&&(t=4),this.adjusted.toFixed(t,e,n)},F(e,[{key:"raw",get:function(){return new Tt(this.numerator,this.denominator)}},{key:"adjusted",get:function(){return t.prototype.multiply.call(this,this.scalar)}}]),e}(Tt),wt={},It=function(){function t(e,n,r){var o=e.token.sortsBefore(n.token)?[e,n]:[n,e];this.liquidityToken=new ut(o[0].token.chainId,t.getAddress(o[0].token,o[1].token,r),18,"UNI-V2","Uniswap V2"),this.tokenAmounts=o,this.exchange=r}t.getAddress=function(t,e,n){var r,o,i,a,u,s=t.sortsBefore(e)?[t,e]:[e,t],c="|"+n;return void 0===(null===(r=wt)||void 0===r||null===(o=r[s[0].address+c])||void 0===o?void 0:o[s[1].address])&&(wt=P({},wt,((u={})[s[0].address+c]=P({},null===(i=wt)||void 0===i?void 0:i[s[0].address+c],((a={})[s[1].address]=p.getCreate2Address(A[n],m.keccak256(["bytes"],[m.pack(["address","address"],[s[0].address,s[1].address])]),I[n]),a)),u))),wt[s[0].address+c][s[1].address]};var e=t.prototype;return e.involvesToken=function(t){return t.equals(this.token0)||t.equals(this.token1)},e.priceOf=function(t){return this.involvesToken(t)||d(!1),t.equals(this.token0)?this.token0Price:this.token1Price},e.reserveOf=function(t){return this.involvesToken(t)||d(!1),t.equals(this.token0)?this.reserve0:this.reserve1},e.getOutputAmount=function(e){if(this.involvesToken(e.token)||d(!1),c.equal(this.reserve0.raw,g)||c.equal(this.reserve1.raw,g))throw new V;var n=this.reserveOf(e.token),r=this.reserveOf(e.token.equals(this.token0)?this.token1:this.token0),o=c.multiply(e.raw,_),i=c.multiply(o,r.raw),a=c.add(c.multiply(n.raw,b),o),u=new Et(e.token.equals(this.token0)?this.token1:this.token0,c.divide(i,a));if(c.equal(u.raw,g))throw new Y;return[u,new t(n.add(e),r.subtract(u),this.exchange)]},e.getInputAmount=function(e){if(this.involvesToken(e.token)||d(!1),c.equal(this.reserve0.raw,g)||c.equal(this.reserve1.raw,g)||c.greaterThanOrEqual(e.raw,this.reserveOf(e.token).raw))throw new V;var n=this.reserveOf(e.token),r=this.reserveOf(e.token.equals(this.token0)?this.token1:this.token0),o=c.multiply(c.multiply(r.raw,e.raw),b),i=c.multiply(c.subtract(n.raw,e.raw),_),a=new Et(e.token.equals(this.token0)?this.token1:this.token0,c.add(c.divide(o,i),N));return[a,new t(r.add(a),n.subtract(e),this.exchange)]},e.getLiquidityMinted=function(t,e,n){t.token.equals(this.liquidityToken)||d(!1);var r,o=e.token.sortsBefore(n.token)?[e,n]:[n,e];if(o[0].token.equals(this.token0)&&o[1].token.equals(this.token1)||d(!1),c.equal(t.raw,g))r=c.subtract(nt(c.multiply(o[0].raw,o[1].raw)),x);else{var i=c.divide(c.multiply(o[0].raw,t.raw),this.reserve0.raw),a=c.divide(c.multiply(o[1].raw,t.raw),this.reserve1.raw);r=c.lessThanOrEqual(i,a)?i:a}if(!c.greaterThan(r,g))throw new Y;return new Et(this.liquidityToken,r)},e.getLiquidityValue=function(t,e,n,r,o){var i;if(void 0===r&&(r=!1),this.involvesToken(t)||d(!1),e.token.equals(this.liquidityToken)||d(!1),n.token.equals(this.liquidityToken)||d(!1),c.lessThanOrEqual(n.raw,e.raw)||d(!1),r){o||d(!1);var a=z(o);if(c.equal(a,g))i=e;else{var u=nt(c.multiply(this.reserve0.raw,this.reserve1.raw)),s=nt(a);if(c.greaterThan(u,s)){var p=c.multiply(e.raw,c.subtract(u,s)),h=c.add(c.multiply(u,S),s),l=c.divide(p,h);i=e.add(new Et(this.liquidityToken,l))}else i=e}}else i=e;return new Et(t,c.divide(c.multiply(n.raw,this.reserveOf(t).raw),i.raw))},F(t,[{key:"token0Price",get:function(){return new At(this.token0,this.token1,this.tokenAmounts[0].raw,this.tokenAmounts[1].raw)}},{key:"token1Price",get:function(){return new At(this.token1,this.token0,this.tokenAmounts[1].raw,this.tokenAmounts[0].raw)}},{key:"chainId",get:function(){return this.token0.chainId}},{key:"token0",get:function(){return this.tokenAmounts[0].token}},{key:"token1",get:function(){return this.tokenAmounts[1].token}},{key:"reserve0",get:function(){return this.tokenAmounts[0]}},{key:"reserve1",get:function(){return this.tokenAmounts[1]}}]),t}(),xt=function(){function t(t,e,n){t.length>0||d(!1),t.every((function(e){return e.chainId===t[0].chainId}))||d(!1),e instanceof ut&&t[0].involvesToken(e)||e===at&&t[0].involvesToken(pt[t[0].chainId])||d(!1),void 0===n||n instanceof ut&&t[t.length-1].involvesToken(n)||n===at&&t[t.length-1].involvesToken(pt[t[0].chainId])||d(!1);for(var r,o=[e instanceof ut?e:pt[t[0].chainId]],i=G(t.entries());!(r=i()).done;){var a=r.value,u=a[1],s=o[a[0]];s.equals(u.token0)||s.equals(u.token1)||d(!1);var c=s.equals(u.token0)?u.token1:u.token0;o.push(c)}this.pairs=t,this.path=o,this.midPrice=At.fromRoute(this),this.input=e,this.output=null!=n?n:o[o.length-1]}return F(t,[{key:"chainId",get:function(){return this.pairs[0].chainId}}]),t}(),gt=new Tt(R),Nt=function(t){function e(){return t.apply(this,arguments)||this}H(e,t);var n=e.prototype;return n.toSignificant=function(t,e,n){return void 0===t&&(t=5),this.multiply(gt).toSignificant(t,e,n)},n.toFixed=function(t,e,n){return void 0===t&&(t=2),this.multiply(gt).toFixed(t,e,n)},e}(Tt);function kt(t,e){return st(t.inputAmount.currency,e.inputAmount.currency)||d(!1),st(t.outputAmount.currency,e.outputAmount.currency)||d(!1),t.outputAmount.equalTo(e.outputAmount)?t.inputAmount.equalTo(e.inputAmount)?0:t.inputAmount.lessThan(e.inputAmount)?-1:1:t.outputAmount.lessThan(e.outputAmount)?1:-1}function Ot(t,e){var n=kt(t,e);return 0!==n?n:t.priceImpact.lessThan(e.priceImpact)?-1:t.priceImpact.greaterThan(e.priceImpact)?1:t.route.path.length-e.route.path.length}function St(t,e){return t instanceof Et?t:t.currency===at?new Et(pt[e],t.raw):void d(!1)}function Ct(t,e){return t instanceof ut?t:t===at?pt[e]:void d(!1)}var Rt,_t=function(){function t(e,n,r,o,i){var a=new Array(e.path.length),u=new Array(e.pairs.length),s=e.input===at,c=e.output===at,p=Z(t.methodNameForTradeType(r,s,c),(e.path.length-1).toString()),h=tt(o,p,i);this.estimatedGas=p.toString(),this.minerBribe=yt.ether(h);var l=St(n,e.chainId),f=St(n,e.chainId);if(r===exports.TradeType.EXACT_INPUT){st(n.currency,e.input)||d(!1),a[0]=St(n,e.chainId);for(var m=0;m<e.path.length-1;m++){var T=e.pairs[m],v=a[m];if(s&&0===m){v.greaterThan(this.minerBribe)||d(!1);var y=v.subtract(St(this.minerBribe,e.chainId));v=y,l=y}var E=T.getOutputAmount(v),A=E[0],w=E[1];if(c&&m===e.path.length-2){A.greaterThan(this.minerBribe)||d(!1);var I=A.subtract(St(this.minerBribe,e.chainId));a[m+1]=I,f=A}else f=A,a[m+1]=A;u[m]=w}}else{st(n.currency,e.output)||d(!1),a[a.length-1]=St(n,e.chainId);for(var x=e.path.length-1;x>0;x--){var g=a[x];if(c&&x===e.path.length-1){var N=g.add(St(this.minerBribe,e.chainId));g=N,f=N}else x===e.path.length-1&&(f=g);var k=e.pairs[x-1].getInputAmount(g),O=k[0],S=k[1];if(s&&1===x){var C=O.add(St(this.minerBribe,e.chainId));a[x-1]=C,l=O}else a[x-1]=1===x?l=O:O;u[x-1]=S}}this.exchange=e.pairs[0].exchange,this.route=e,this.tradeType=r,this.inputAmount=r===exports.TradeType.EXACT_INPUT?n:e.input===at?yt.ether(a[0].raw):a[0],this.outputAmount=r===exports.TradeType.EXACT_OUTPUT?n:e.output===at?yt.ether(a[a.length-1].raw):a[a.length-1],this.executionPrice=new At(l.currency,f.currency,l.raw,f.raw),this.nextMidPrice=new xt(u,e.input).midPrice,this.priceImpact=function(t,e,n){var r=t.raw.multiply(e.raw),o=r.subtract(n.raw).divide(r);return new Nt(o.numerator,o.denominator)}(e.midPrice,l,f)}t.exactIn=function(e,n,r,o){return new t(e,n,exports.TradeType.EXACT_INPUT,r,o)},t.exactOut=function(e,n,r,o){return new t(e,n,exports.TradeType.EXACT_OUTPUT,r,o)};var e=t.prototype;return e.minimumAmountOut=function(t){if(t.lessThan(g)&&d(!1),this.tradeType===exports.TradeType.EXACT_OUTPUT)return this.outputAmount;var e=new Tt(N).add(t).invert().multiply(this.outputAmount.raw).quotient;return this.outputAmount instanceof Et?new Et(this.outputAmount.token,e):yt.ether(e)},e.maximumAmountIn=function(t){if(t.lessThan(g)&&d(!1),this.tradeType===exports.TradeType.EXACT_INPUT)return this.inputAmount;var e=new Tt(N).add(t).multiply(this.inputAmount.raw).quotient;return this.inputAmount instanceof Et?new Et(this.inputAmount.token,e):yt.ether(e)},t.bestTradeExactIn=function(e,n,r,o,i,a,u,s,c){var p=void 0===a?{}:a,h=p.maxNumResults,l=void 0===h?3:h,f=p.maxHops,m=void 0===f?3:f;void 0===u&&(u=[]),void 0===s&&(s=n),void 0===c&&(c=[]),e.length>0||d(!1),m>0||d(!1),s===n||u.length>0||d(!1);var T=n instanceof Et?n.token.chainId:r instanceof ut?r.chainId:void 0;void 0===T&&d(!1);for(var v=exports.TradeType.EXACT_INPUT,y=St(n,T),E=Ct(r,T),A=0;A<e.length;A++){var w=e[A];if((w.token0.equals(y.token)||w.token1.equals(y.token))&&!w.reserve0.equalTo(g)&&!w.reserve1.equalTo(g)){var I=void 0;try{I=w.getOutputAmount(y)[0]}catch(t){if(t.isInsufficientInputAmountError)continue;throw t}if(I.token.equals(E))rt(c,new t(new xt([].concat(u,[w]),s.currency,r),s,v,o,i),l,Ot);else if(m>1&&e.length>1){var x=e.slice(0,A).concat(e.slice(A+1,e.length));t.bestTradeExactIn(x,I,r,o,i,{maxNumResults:l,maxHops:m-1},[].concat(u,[w]),s,c)}}}return c},t.bestTradeExactOut=function(e,n,r,o,i,a,u,s,c){var p=void 0===a?{}:a,h=p.maxNumResults,l=void 0===h?3:h,f=p.maxHops,m=void 0===f?3:f;void 0===u&&(u=[]),void 0===s&&(s=r),void 0===c&&(c=[]),e.length>0||d(!1),m>0||d(!1),s===r||u.length>0||d(!1);var T=r instanceof Et?r.token.chainId:n instanceof ut?n.chainId:void 0;void 0===T&&d(!1);for(var v=St(r,T),y=Ct(n,T),E=0;E<e.length;E++){var A=e[E];if((A.token0.equals(v.token)||A.token1.equals(v.token))&&!A.reserve0.equalTo(g)&&!A.reserve1.equalTo(g)){var w=void 0;try{w=A.getInputAmount(v)[0]}catch(t){if(t.isInsufficientReservesError)continue;throw t}if(w.token.equals(y))rt(c,new t(new xt([A].concat(u),n,s.currency),s,exports.TradeType.EXACT_OUTPUT,o,i),l,Ot);else if(m>1&&e.length>1){var I=e.slice(0,E).concat(e.slice(E+1,e.length));t.bestTradeExactOut(I,n,w,o,i,{maxNumResults:l,maxHops:m-1},[A].concat(u),s,c)}}}return c},t.methodNameForTradeType=function(t,e,n,r){var o;switch(t){case exports.TradeType.EXACT_INPUT:o=e?"swapExactETHForTokens":n?"swapExactTokensForETH":"swapExactTokensForTokens";break;case exports.TradeType.EXACT_OUTPUT:r&&d(!1),o=e?"swapETHForExactTokens":n?"swapTokensForExactETH":"swapTokensForExactTokens"}return o},t.estimateMinTradeAmounts=function(e,n,r,o,i,a,u){var s,c=(void 0===u?{}:u).maxHops,p=void 0===c?3:c,h=n===at,l=r===at;if(!h&&!l)return null;var f=Z(t.methodNameForTradeType(exports.TradeType.EXACT_INPUT,h,l),p.toString()),m=Z(t.methodNameForTradeType(exports.TradeType.EXACT_OUTPUT,h,l),p.toString()),T=et(tt(o,f,i),a),v=et(tt(o,m,i),a),y=n.chainId||r.chainId||void 0;y||d(!1);var E,A,w=St(yt.ether(T),y);h&&(w=St(yt.ether(v),y));for(var I=0;I<e.length;I++){var x=e[I];if((x.token0.equals(w.token)||x.token1.equals(w.token))&&!x.reserve0.equalTo(g)&&!x.reserve1.equalTo(g))try{h?(E=yt.ether(T),A=x.getInputAmount(w)[0]):l&&(A=yt.ether(v),E=x.getInputAmount(w)[0])}catch(t){if(t.isInsufficientInputAmountError)continue;throw t}}return E&&A?((s={})[exports.TradeType.EXACT_INPUT]=E,s[exports.TradeType.EXACT_OUTPUT]=A,s):null},t}(),bt=[{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],Ut=((Rt={})[exports.ChainId.MAINNET]={"0xE0B7927c4aF23765Cb51314A0E0521A9645F0E2A":9},Rt),qt=function(){function t(){}return t.fetchTokenData=function(t,e,n,r,o){try{var i,a,u=function(n){return new ut(t,e,n,r,o)};void 0===n&&(n=y.getDefaultProvider(v.getNetwork(t)));var s="number"==typeof(null===(i=Ut)||void 0===i||null===(a=i[t])||void 0===a?void 0:a[e]);return Promise.resolve(s?u(Ut[t][e]):Promise.resolve(new T.Contract(e,bt,n).decimals().then((function(n){var r,o,i;return Ut=P({},Ut,((i={})[t]=P({},null===(r=Ut)||void 0===r?void 0:r[t],((o={})[e]=n,o)),i)),n}))).then(u))}catch(t){return Promise.reject(t)}},t}();function Dt(t){return"0x"+t.raw.toString(16)}var Ft,Pt,Ht,Bt=function(){function t(){}return t.swapCallParameters=function(t,e){var n=t.inputAmount.currency===at,r=t.outputAmount.currency===at;n&&r&&d(!1),!("ttl"in e)||e.ttl>0||d(!1);var o,i=$(e.recipient),a=Dt(t.maximumAmountIn(e.allowedSlippage)),u=Dt(t.minimumAmountOut(e.allowedSlippage)),s=Dt(t.minerBribe),c=t.route.path.map((function(t){return t.address})),p="ttl"in e?"0x"+(Math.floor((new Date).getTime()/1e3)+e.ttl).toString(16):"0x"+e.deadline.toString(16),h=Boolean(e.feeOnTransfer),l=w[t.exchange],f={amount0:a,amount1:u,path:c,to:i,deadline:p},m=_t.methodNameForTradeType(t.tradeType,n,r,h);switch(m){case"swapExactETHForTokens":f.amount0=a,f.amount1=u,o=a;break;case"swapExactTokensForETH":f.amount0=a,f.amount1=u,o="0x0";break;case"swapExactTokensForTokens":f.amount0=a,f.amount1=u,o=s;break;case"swapETHForExactTokens":h&&d(!1),f.amount0=a,f.amount1=u,o=a;break;case"swapTokensForExactETH":case"swapTokensForExactTokens":h&&d(!1),f.amount0=u,f.amount1=a,o=s;break;default:o=""}var T=[[f.amount0,f.amount1,f.path,f.to,f.deadline],l,s];return m&&T&&o||d(!1),{methodName:m,args:T,value:o}},t}();(Ft=exports.Event||(exports.Event={})).GAS_CHANGE="GAS_CHANGE",Ft.SOCKET_SESSION_RESPONSE="SOCKET_SESSION",Ft.SOCKET_ERR="SOCKET_ERR",Ft.TRANSACTION_REQUEST="TRANSACTION_REQUEST",Ft.TRANSACTION_CANCEL_REQUEST="TRANSACTION_CANCEL_REQUEST",Ft.TRANSACTION_RESPONSE="TRANSACTION_RESPONSE",Ft.TRANSACTION_DIAGNOSIS="TRANSACTION_DIAGNOSIS",Ft.TRANSACTION_STATUS_REQUEST="TRANSACTION_STATUS_REQUEST",Ft.TRANSACTION_CANCEL_RESPONSE="TRANSACTION_CANCEL_RESPONSE",(Pt=exports.Status||(exports.Status={})).PENDING_TRANSACTION="PENDING_TRANSACTION",Pt.FAILED_TRANSACTION="FAILED_TRANSACTION",Pt.SUCCESSFUL_TRANSACTION="SUCCESSFUL_TRANSACTION",Pt.CANCEL_TRANSACTION_SUCCESSFUL="CANCEL_TRANSACTION_SUCCESSFUL",(Ht=exports.Diagnosis||(exports.Diagnosis={})).LOWER_THAN_TAIL="LOWER_THAN_TAIL",Ht.NOT_A_FLASHBLOCK="NOT_A_FLASHBLOCK",Ht.BUNDLE_OUTBID="BUNDLE_OUTBID",Ht.ERROR_API_BEHIND="ERROR_API_BEHIND",Ht.MISSING_BLOCK_DATA="MISSING_BLOCK_DATA",Ht.ERROR_UNKNOWN="ERROR_UNKNOWN",exports.JSBI=c,exports.Currency=it,exports.CurrencyAmount=yt,exports.ETHER=at,exports.FACTORY_ADDRESS=A,exports.Fetcher=qt,exports.Fraction=Tt,exports.INIT_CODE_HASH=I,exports.InsufficientInputAmountError=Y,exports.InsufficientReservesError=V,exports.MINIMUM_LIQUIDITY=x,exports.Pair=It,exports.Percent=Nt,exports.Price=At,exports.Route=xt,exports.Router=Bt,exports.Token=ut,exports.TokenAmount=Et,exports.Trade=_t,exports.WETH=pt,exports.currencyEquals=st,exports.inputOutputComparator=kt,exports.tradeComparator=Ot;
>>>>>>> ac47820... add websocket module to sdk
>>>>>>> 96bbad6... add websocket module to sdk
=======
"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e,r,n,o,i,a,u,s,c=t(require("jsbi")),p=t(require("tiny-invariant")),f=t(require("big.js")),d=t(require("decimal.js-light")),h=t(require("toformat")),l=(t(require("tiny-warning")),require("@ethersproject/address")),m=require("@ethersproject/solidity"),T=require("@ethersproject/contracts"),y=require("@ethersproject/networks"),v=require("@ethersproject/providers");require("socket.io-client"),(i=exports.ChainId||(exports.ChainId={}))[i.MAINNET=1]="MAINNET",i[i.ROPSTEN=3]="ROPSTEN",i[i.RINKEBY=4]="RINKEBY",i[i["GÖRLI"]=5]="GÖRLI",i[i.KOVAN=42]="KOVAN",i[i.HARDHAT=1337]="HARDHAT",(a=exports.Exchange||(exports.Exchange={}))[a.UNI=0]="UNI",a[a.SUSHI=1]="SUSHI",a[a.UNDEFINED=2]="UNDEFINED",(u=exports.TradeType||(exports.TradeType={}))[u.EXACT_INPUT=0]="EXACT_INPUT",u[u.EXACT_OUTPUT=1]="EXACT_OUTPUT",(s=exports.Rounding||(exports.Rounding={}))[s.ROUND_DOWN=0]="ROUND_DOWN",s[s.ROUND_HALF_UP=1]="ROUND_HALF_UP",s[s.ROUND_UP=2]="ROUND_UP";var E,A=c.BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),x=((e={})[exports.Exchange.UNI]="0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f",e[exports.Exchange.SUSHI]="0xC0AEe478e3658e2610c5F7A4A2E1777cE9e4f2Ac",e[exports.Exchange.UNDEFINED]="0x0",e),N=((r={})[exports.Exchange.UNI]="0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D",r[exports.Exchange.SUSHI]="0xd9e1cE17f2641f24aE83637ab66a2cca9C378B9",r[exports.Exchange.UNDEFINED]="0x0",r),g=((n={})[exports.Exchange.UNI]="0x96e8ac4277198ff8b6f785478aa9a39f403cb768dd02cbee326c3e7da348845f",n[exports.Exchange.SUSHI]="0xe18a34eb0e04b04f7a0ac29a6e80748dca96319b42c54d679cb821dca90c6303",n[exports.Exchange.UNDEFINED]="0x0",n),I=c.BigInt(1e3),w=c.BigInt(0),k=c.BigInt(1),O=c.BigInt(2),S=c.BigInt(3),R=c.BigInt(5),q=c.BigInt(10),_=c.BigInt(100),C=c.BigInt(997),F=c.BigInt(1e3);(E=exports.SolidityType||(exports.SolidityType={})).uint8="uint8",E.uint256="uint256";var b,U=((o={})[exports.SolidityType.uint8]=c.BigInt("0xff"),o[exports.SolidityType.uint256]=c.BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),o);(b=exports.MethodName||(exports.MethodName={})).swapETHForExactTokens="swapETHForExactTokens",b.swapExactETHForTokens="swapExactETHForTokens",b.swapExactTokensForETH="swapExactTokensForETH",b.swapExactTokensForTokens="swapExactTokensForTokens",b.swapTokensForExactETH="swapTokensForExactETH",b.swapTokensForExactTokens="swapTokensForExactTokens";var P={swapETHForExactTokens:"155485",swapExactETHForTokens:"151393",swapExactTokensForETH:"165009",swapExactTokensForTokens:"170272",swapTokensForExactETH:"195192",swapTokensForExactTokens:"197365"};function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function H(t,e,r){return e&&D(t.prototype,e),r&&D(t,r),t}function B(){return(B=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function L(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function W(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function K(t,e,r){return(K=W()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&j(o,r.prototype),o}).apply(null,arguments)}function X(t){var e="function"==typeof Map?new Map:void 0;return(X=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return K(t,arguments,M(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),j(r,t)})(t)}function G(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Y(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return V(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}var Q,J,Z,$="setPrototypeOf"in Object,z=function(t){function e(){var r;return(r=t.call(this)||this).isInsufficientReservesError=!0,r.name=r.constructor.name,$&&Object.setPrototypeOf(G(r),(this instanceof e?this.constructor:void 0).prototype),r}return L(e,t),e}(X(Error)),tt=function(t){function e(){var r;return(r=t.call(this)||this).isInsufficientInputAmountError=!0,r.name=r.constructor.name,$&&Object.setPrototypeOf(G(r),(this instanceof e?this.constructor:void 0).prototype),r}return L(e,t),e}(X(Error)),et=function(t,e,r,n){Number.isSafeInteger(t)||p(!1),e>=0&&e<255&&Number.isInteger(e)||p(!1),this.chainId=t,this.decimals=e,this.symbol=r,this.name=n},rt=h(d),nt=h(f),ot=((Q={})[exports.Rounding.ROUND_DOWN]=rt.ROUND_DOWN,Q[exports.Rounding.ROUND_HALF_UP]=rt.ROUND_HALF_UP,Q[exports.Rounding.ROUND_UP]=rt.ROUND_UP,Q),it=((J={})[exports.Rounding.ROUND_DOWN]=0,J[exports.Rounding.ROUND_HALF_UP]=1,J[exports.Rounding.ROUND_UP]=3,J),at=function(){function t(t,e){void 0===e&&(e=c.BigInt(1)),this.numerator=c.BigInt(t),this.denominator=c.BigInt(e)}t.tryParseFraction=function(e){if(e instanceof c||"number"==typeof e||"string"==typeof e)return new t(e);if("numerator"in e&&"denominator"in e)return e;throw new Error("Could not parse fraction")};var e=t.prototype;return e.invert=function(){return new t(this.denominator,this.numerator)},e.add=function(e){var r=t.tryParseFraction(e);return c.equal(this.denominator,r.denominator)?new t(c.add(this.numerator,r.numerator),this.denominator):new t(c.add(c.multiply(this.numerator,r.denominator),c.multiply(r.numerator,this.denominator)),c.multiply(this.denominator,r.denominator))},e.subtract=function(e){var r=t.tryParseFraction(e);return c.equal(this.denominator,r.denominator)?new t(c.subtract(this.numerator,r.numerator),this.denominator):new t(c.subtract(c.multiply(this.numerator,r.denominator),c.multiply(r.numerator,this.denominator)),c.multiply(this.denominator,r.denominator))},e.lessThan=function(e){var r=t.tryParseFraction(e);return c.lessThan(c.multiply(this.numerator,r.denominator),c.multiply(r.numerator,this.denominator))},e.equalTo=function(e){var r=t.tryParseFraction(e);return c.equal(c.multiply(this.numerator,r.denominator),c.multiply(r.numerator,this.denominator))},e.greaterThan=function(e){var r=t.tryParseFraction(e);return c.greaterThan(c.multiply(this.numerator,r.denominator),c.multiply(r.numerator,this.denominator))},e.multiply=function(e){var r=t.tryParseFraction(e);return new t(c.multiply(this.numerator,r.numerator),c.multiply(this.denominator,r.denominator))},e.divide=function(e){var r=t.tryParseFraction(e);return new t(c.multiply(this.numerator,r.denominator),c.multiply(this.denominator,r.numerator))},e.toSignificant=function(t,e,r){void 0===e&&(e={groupSeparator:""}),void 0===r&&(r=exports.Rounding.ROUND_HALF_UP),Number.isInteger(t)||p(!1),t>0||p(!1),rt.set({precision:t+1,rounding:ot[r]});var n=new rt(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(t);return n.toFormat(n.decimalPlaces(),e)},e.toFixed=function(t,e,r){return void 0===e&&(e={groupSeparator:""}),void 0===r&&(r=exports.Rounding.ROUND_HALF_UP),Number.isInteger(t)||p(!1),t>=0||p(!1),nt.DP=t,nt.RM=it[r],new nt(this.numerator.toString()).div(this.denominator.toString()).toFormat(t,e)},H(t,[{key:"quotient",get:function(){return c.divide(this.numerator,this.denominator)}},{key:"remainder",get:function(){return new t(c.remainder(this.numerator,this.denominator),this.denominator)}},{key:"asFraction",get:function(){return new t(this.numerator,this.denominator)}}]),t}(),ut=h(f),st=function(t){function e(e,r,n){var o;return o=t.call(this,r,n)||this,c.lessThanOrEqual(o.quotient,A)||p(!1),o.currency=e,o.decimalScale=c.exponentiate(c.BigInt(10),c.BigInt(e.decimals)),o}L(e,t),e.fromRawAmount=function(t,r){return new e(t,r)},e.fromFractionalAmount=function(t,r,n){return new e(t,r,n)};var r=e.prototype;return r.add=function(r){this.currency.equals(r.currency)||p(!1);var n=t.prototype.add.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},r.subtract=function(r){this.currency.equals(r.currency)||p(!1);var n=t.prototype.subtract.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},r.multiply=function(r){var n=t.prototype.multiply.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},r.divide=function(r){var n=t.prototype.divide.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},r.toSignificant=function(e,r,n){return void 0===e&&(e=6),void 0===n&&(n=exports.Rounding.ROUND_DOWN),t.prototype.divide.call(this,this.decimalScale).toSignificant(e,r,n)},r.toFixed=function(e,r,n){return void 0===e&&(e=this.currency.decimals),void 0===n&&(n=exports.Rounding.ROUND_DOWN),e<=this.currency.decimals||p(!1),t.prototype.divide.call(this,this.decimalScale).toFixed(e,r,n)},r.toExact=function(t){return void 0===t&&(t={groupSeparator:""}),ut.DP=this.currency.decimals,new ut(this.quotient.toString()).div(this.decimalScale.toString()).toFormat(t)},H(e,[{key:"wrapped",get:function(){return this.currency.isToken?this:e.fromFractionalAmount(this.currency.wrapped,this.numerator,this.denominator)}}]),e}(at),ct=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).isNative=!0,e.isToken=!1,e}return L(e,t),e}(et),pt=function(t){function e(){for(var e,r,n,o,i,a=arguments.length,u=new Array(a),s=0;s<a;s++)u[s]=arguments[s];if(4===u.length)r=u[0],n=u[1],o=u[2],i=u[3];else{var p=u[0].quoteAmount.divide(u[0].baseAmount),f=[u[0].baseAmount.currency,u[0].quoteAmount.currency,p.denominator,p.numerator];r=f[0],n=f[1],o=f[2],i=f[3]}return(e=t.call(this,i,o)||this).baseCurrency=r,e.quoteCurrency=n,e.scalar=new at(c.exponentiate(c.BigInt(10),c.BigInt(r.decimals)),c.exponentiate(c.BigInt(10),c.BigInt(n.decimals))),e}L(e,t);var r=e.prototype;return r.invert=function(){return new e(this.quoteCurrency,this.baseCurrency,this.numerator,this.denominator)},r.multiply=function(r){this.quoteCurrency.equals(r.baseCurrency)||p(!1);var n=t.prototype.multiply.call(this,r);return new e(this.baseCurrency,r.quoteCurrency,n.denominator,n.numerator)},r.quote=function(e){e.currency.equals(this.baseCurrency)||p(!1);var r=t.prototype.multiply.call(this,e);return st.fromFractionalAmount(this.quoteCurrency,r.numerator,r.denominator)},r.toSignificant=function(t,e,r){return void 0===t&&(t=6),this.adjustedForDecimals.toSignificant(t,e,r)},r.toFixed=function(t,e,r){return void 0===t&&(t=4),this.adjustedForDecimals.toFixed(t,e,r)},H(e,[{key:"adjustedForDecimals",get:function(){return t.prototype.multiply.call(this,this.scalar)}}]),e}(at),ft=new at(_),dt=function(t){function e(){return t.apply(this,arguments)||this}L(e,t);var r=e.prototype;return r.toSignificant=function(t,e,r){return void 0===t&&(t=5),this.multiply(ft).toSignificant(t,e,r)},r.toFixed=function(t,e,r){return void 0===t&&(t=2),this.multiply(ft).toFixed(t,e,r)},e}(at);function ht(t){try{return l.getAddress(t)}catch(t){p(!1)}}function lt(t){return t instanceof c?t:c.BigInt(t)}function mt(t,e){void 0===t&&(t="swapTokensForExactETH"),void 0===e&&(e="1");var r=lt(P[t]),n=lt("0"),o=c.multiply(lt(e),n);return c.add(r,o)}function Tt(t,e,r){t=lt(t),e=lt(e);var n=yt(t,r);return c.multiply(n,e)}function yt(t,e){t=lt(t),e=c.multiply(lt(e),lt("100"));var r=c.multiply(t,c.add(lt("10000"),e)),n=lt("10000");return c.divide(r,n)}function vt(t){var e,r;e=t,r=exports.SolidityType.uint256,c.greaterThanOrEqual(e,w)||p(!1),c.lessThanOrEqual(e,U[r])||p(!1);var n,o=w;if(c.greaterThan(t,S))for(o=t,n=c.add(c.divide(t,O),k);c.lessThan(n,o);)o=n,n=c.divide(c.add(c.divide(t,n),n),O);else c.notEqual(t,w)&&(o=k);return o}function Et(t,e,r,n){if(r>0||p(!1),t.length<=r||p(!1),0===t.length)return t.push(e),null;var o=t.length===r;if(o&&n(t[t.length-1],e)<=0)return e;for(var i=0,a=t.length;i<a;){var u=i+a>>>1;n(t[u],e)<=0?i=u+1:a=u}return t.splice(i,0,e),o?t.pop():null}var At=function(t){function e(e,r,n,o,i){var a;return(a=t.call(this,e,n,o,i)||this).isNative=!1,a.isToken=!0,a.chainId=e,a.address=ht(r),a}L(e,t);var r=e.prototype;return r.equals=function(t){return t.isToken&&this.chainId===t.chainId&&this.address===t.address},r.sortsBefore=function(t){return this.chainId!==t.chainId&&p(!1),this.address===t.address&&p(!1),this.address.toLowerCase()<t.address.toLowerCase()},H(e,[{key:"wrapped",get:function(){return this}}]),e}(et);function xt(t,e){return t instanceof At&&e instanceof At?t.equals(e):!(t instanceof At||e instanceof At||t!==e)}var Nt=((Z={})[exports.ChainId.MAINNET]=new At(exports.ChainId.MAINNET,"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",18,"WETH","Wrapped Ether"),Z[exports.ChainId.HARDHAT]=new At(exports.ChainId.HARDHAT,"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",18,"WETH","Wrapped Ether"),Z[exports.ChainId.ROPSTEN]=new At(exports.ChainId.ROPSTEN,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),Z[exports.ChainId.RINKEBY]=new At(exports.ChainId.RINKEBY,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),Z[exports.ChainId.GÖRLI]=new At(exports.ChainId.GÖRLI,"0xB4FBF271143F4FBf7B91A5ded31805e42b2208d6",18,"WETH","Wrapped Ether"),Z[exports.ChainId.KOVAN]=new At(exports.ChainId.KOVAN,"0xd0A1E359811322d97991E03f863a0C30C2cF029C",18,"WETH","Wrapped Ether"),Z),gt=function(){function t(e,r,n){var o=e.currency.sortsBefore(r.currency)?[e,r]:[r,e];this.liquidityToken=new At(o[0].currency.chainId,t.getAddress(o[0].currency,o[1].currency,n),18,"UNI-V2","Uniswap V2"),this.tokenAmounts=o,this.exchange=n}t.getAddress=function(t,e,r){return function(t){var e=t.exchange,r=t.tokenA,n=t.tokenB,o=r.sortsBefore(n)?[r,n]:[n,r];return l.getCreate2Address(x[e],m.keccak256(["bytes"],[m.pack(["address","address"],[o[0].address,o[1].address])]),g[e])}({exchange:r,tokenA:t,tokenB:e})};var e=t.prototype;return e.involvesToken=function(t){return t.equals(this.token0)||t.equals(this.token1)},e.priceOf=function(t){return this.involvesToken(t)||p(!1),t.equals(this.token0)?this.token0Price:this.token1Price},e.reserveOf=function(t){return this.involvesToken(t)||p(!1),t.equals(this.token0)?this.reserve0:this.reserve1},e.getOutputAmount=function(e){if(this.involvesToken(e.currency)||p(!1),c.equal(this.reserve0.quotient,w)||c.equal(this.reserve1.quotient,w))throw new z;var r=this.reserveOf(e.currency),n=this.reserveOf(e.currency.equals(this.token0)?this.token1:this.token0),o=c.multiply(e.quotient,C),i=c.multiply(o,n.quotient),a=c.add(c.multiply(r.quotient,F),o),u=st.fromRawAmount(e.currency.equals(this.token0)?this.token1:this.token0,c.divide(i,a));if(c.equal(u.quotient,w))throw new tt;return[u,new t(r.add(e),n.subtract(u),this.exchange)]},e.getInputAmount=function(e){if(this.involvesToken(e.currency)||p(!1),c.equal(this.reserve0.quotient,w)||c.equal(this.reserve1.quotient,w)||c.greaterThanOrEqual(e.quotient,this.reserveOf(e.currency).quotient))throw new z;var r=this.reserveOf(e.currency),n=this.reserveOf(e.currency.equals(this.token0)?this.token1:this.token0),o=c.multiply(c.multiply(n.quotient,e.quotient),F),i=c.multiply(c.subtract(r.quotient,e.quotient),C),a=st.fromRawAmount(e.currency.equals(this.token0)?this.token1:this.token0,c.add(c.divide(o,i),k));return[a,new t(n.add(a),r.subtract(e),this.exchange)]},e.getLiquidityMinted=function(t,e,r){t.currency.equals(this.liquidityToken)||p(!1);var n,o=e.currency.sortsBefore(r.currency)?[e,r]:[r,e];if(o[0].currency.equals(this.token0)&&o[1].currency.equals(this.token1)||p(!1),c.equal(t.quotient,w))n=c.subtract(vt(c.multiply(o[0].quotient,o[1].quotient)),I);else{var i=c.divide(c.multiply(o[0].quotient,t.quotient),this.reserve0.quotient),a=c.divide(c.multiply(o[1].quotient,t.quotient),this.reserve1.quotient);n=c.lessThanOrEqual(i,a)?i:a}if(!c.greaterThan(n,w))throw new tt;return st.fromRawAmount(this.liquidityToken,n)},e.getLiquidityValue=function(t,e,r,n,o){var i;if(void 0===n&&(n=!1),this.involvesToken(t)||p(!1),e.currency.equals(this.liquidityToken)||p(!1),r.currency.equals(this.liquidityToken)||p(!1),c.lessThanOrEqual(r.quotient,e.quotient)||p(!1),n){o||p(!1);var a=c.BigInt(o);if(c.equal(a,w))i=e;else{var u=vt(c.multiply(this.reserve0.quotient,this.reserve1.quotient)),s=vt(a);if(c.greaterThan(u,s)){var f=c.multiply(e.quotient,c.subtract(u,s)),d=c.add(c.multiply(u,R),s),h=c.divide(f,d);i=e.add(st.fromRawAmount(this.liquidityToken,h))}else i=e}}else i=e;return st.fromRawAmount(t,c.divide(c.multiply(r.quotient,this.reserveOf(t).quotient),i.quotient))},H(t,[{key:"token0Price",get:function(){var t=this.tokenAmounts[1].divide(this.tokenAmounts[0]);return new pt(this.token0,this.token1,t.denominator,t.numerator)}},{key:"token1Price",get:function(){var t=this.tokenAmounts[0].divide(this.tokenAmounts[1]);return new pt(this.token1,this.token0,t.denominator,t.numerator)}},{key:"chainId",get:function(){return this.token0.chainId}},{key:"token0",get:function(){return this.tokenAmounts[0].currency}},{key:"token1",get:function(){return this.tokenAmounts[1].currency}},{key:"reserve0",get:function(){return this.tokenAmounts[0]}},{key:"reserve1",get:function(){return this.tokenAmounts[1]}}]),t}(),It=function(){function t(t,e,r){this._midPrice=null,t.length>0||p(!1);var n=t[0].chainId;t.every((function(t){return t.chainId===n}))||p(!1);var o=e.wrapped;t[0].involvesToken(o)||p(!1),void 0===r||t[t.length-1].involvesToken(r.wrapped)||p(!1);for(var i,a=[o],u=Y(t.entries());!(i=u()).done;){var s=i.value,c=s[1],f=a[s[0]];f.equals(c.token0)||f.equals(c.token1)||p(!1);var d=f.equals(c.token0)?c.token1:c.token0;a.push(d)}this.pairs=t,this.path=a,this.input=e,this.output=r}return H(t,[{key:"midPrice",get:function(){if(null!==this._midPrice)return this._midPrice;for(var t,e=[],r=Y(this.pairs.entries());!(t=r()).done;){var n=t.value,o=n[1];e.push(this.path[n[0]].equals(o.token0)?new pt(o.reserve0.currency,o.reserve1.currency,o.reserve0.quotient,o.reserve1.quotient):new pt(o.reserve1.currency,o.reserve0.currency,o.reserve1.quotient,o.reserve0.quotient))}var i=e.slice(1).reduce((function(t,e){return t.multiply(e)}),e[0]);return this._midPrice=new pt(this.input,this.output,i.denominator,i.numerator)}},{key:"chainId",get:function(){return this.pairs[0].chainId}}]),t}(),wt=function(t){function e(e){return t.call(this,e,18,"ETH","Ether")||this}return L(e,t),e.onChain=function(t){var r;return null!==(r=this._etherCache[t])&&void 0!==r?r:this._etherCache[t]=new e(t)},e.prototype.equals=function(t){return t.isNative&&t.chainId===this.chainId},H(e,[{key:"wrapped",get:function(){var t=Nt[this.chainId];return t||p(!1),t}}]),e}(ct);function kt(t,e){return t.inputAmount.currency.equals(e.inputAmount.currency)||p(!1),t.outputAmount.currency.equals(e.outputAmount.currency)||p(!1),t.outputAmount.equalTo(e.outputAmount)?t.inputAmount.equalTo(e.inputAmount)?0:t.inputAmount.lessThan(e.inputAmount)?-1:1:t.outputAmount.lessThan(e.outputAmount)?1:-1}function Ot(t,e){var r=kt(t,e);return 0!==r?r:t.priceImpact.lessThan(e.priceImpact)?-1:t.priceImpact.greaterThan(e.priceImpact)?1:t.route.path.length-e.route.path.length}wt._etherCache={};var St,Rt=function(){function t(e,r,n,o,i){this.route=e,this.tradeType=n;var a=new Array(e.path.length),u=new Array(e.pairs.length),s=e.input.isNative,c=e.output.isNative,f=mt(t.methodNameForTradeType(n,s,c),(e.path.length-1).toString()),d=Tt(o,f,i);this.estimatedGas=f.toString(),this.minerBribe=st.fromRawAmount(Nt[e.chainId],d);var h=r.wrapped,l=r.wrapped;if(n===exports.TradeType.EXACT_INPUT){xt(r.currency,e.input)||p(!1),a[0]=r.wrapped;for(var m=0;m<e.path.length-1;m++){var T=e.pairs[m],y=a[m];if(s&&0===m){y.greaterThan(this.minerBribe)||p(!1);var v=y.subtract(this.minerBribe);y=v,h=v}var E=T.getOutputAmount(y),A=E[0],x=E[1];if(c&&m===e.path.length-2){A.greaterThan(this.minerBribe)||p(!1);var N=A.subtract(this.minerBribe);a[m+1]=N,l=A}else l=A,a[m+1]=A;u[m]=x}}else{xt(r.currency,e.output)||p(!1),a[a.length-1]=r.wrapped;for(var g=e.path.length-1;g>0;g--){var I=a[g];if(c&&g===e.path.length-1){var w=I.add(this.minerBribe);I=w,l=w}else g===e.path.length-1&&(l=I);var k=e.pairs[g-1].getInputAmount(I),O=k[0],S=k[1];if(s&&1===g){var R=O.add(this.minerBribe);a[g-1]=R,h=O}else a[g-1]=1===g?h=O:O;u[g-1]=S}}this.exchange=e.pairs[0].exchange,this.inputAmount=st.fromFractionalAmount(e.input,a[0].numerator,a[0].denominator),this.outputAmount=st.fromFractionalAmount(e.output,a[a.length-1].numerator,a[a.length-1].denominator),this.executionPrice=new pt(e.input,e.output,h.quotient,l.quotient),this.priceImpact=function(t,e,r){var n=t.quote(e),o=n.subtract(r).divide(n);return new dt(o.numerator,o.denominator)}(e.midPrice,this.inputAmount,this.outputAmount)}t.exactIn=function(e,r,n,o){return new t(e,r,exports.TradeType.EXACT_INPUT,n,o)},t.exactOut=function(e,r,n,o){return new t(e,r,exports.TradeType.EXACT_OUTPUT,n,o)};var e=t.prototype;return e.minimumAmountOut=function(t){if(t.lessThan(w)&&p(!1),this.tradeType===exports.TradeType.EXACT_OUTPUT)return this.outputAmount;var e=new at(k).add(t).invert().multiply(this.outputAmount.quotient).quotient;return st.fromRawAmount(this.outputAmount.currency,e)},e.maximumAmountIn=function(t){if(t.lessThan(w)&&p(!1),this.tradeType===exports.TradeType.EXACT_INPUT)return this.inputAmount;var e=new at(k).add(t).multiply(this.inputAmount.quotient).quotient;return st.fromRawAmount(this.inputAmount.currency,e)},t.bestTradeExactIn=function(e,r,n,o,i,a,u,s,c){var f=void 0===a?{}:a,d=f.maxNumResults,h=void 0===d?3:d,l=f.maxHops,m=void 0===l?3:l;void 0===u&&(u=[]),void 0===s&&(s=r),void 0===c&&(c=[]),e.length>0||p(!1),m>0||p(!1),s===r||u.length>0||p(!1);for(var T=exports.TradeType.EXACT_INPUT,y=s.wrapped,v=n.wrapped,E=0;E<e.length;E++){var A=e[E];if((A.token0.equals(y.currency)||A.token1.equals(y.currency))&&!A.reserve0.equalTo(w)&&!A.reserve1.equalTo(w)){var x=void 0;try{x=A.getOutputAmount(y)[0]}catch(t){if(t.isInsufficientInputAmountError)continue;throw t}if(x.currency.equals(v))try{Et(c,new t(new It([].concat(u,[A]),r.currency,n),r,T,o,i),h,Ot)}catch(t){}else if(m>1&&e.length>1){var N=e.slice(0,E).concat(e.slice(E+1,e.length));t.bestTradeExactIn(N,r,n,o,i,{maxNumResults:h,maxHops:m-1},[].concat(u,[A]),x,c)}}}return c},t.bestTradeExactOut=function(e,r,n,o,i,a,u,s,c){var f=void 0===a?{}:a,d=f.maxNumResults,h=void 0===d?3:d,l=f.maxHops,m=void 0===l?3:l;void 0===u&&(u=[]),void 0===s&&(s=n),void 0===c&&(c=[]),e.length>0||p(!1),m>0||p(!1),s===n||u.length>0||p(!1);for(var T=s.wrapped,y=r.wrapped,v=0;v<e.length;v++){var E=e[v];if((E.token0.equals(T.currency)||E.token1.equals(T.currency))&&!E.reserve0.equalTo(w)&&!E.reserve1.equalTo(w)){var A=void 0;try{A=E.getInputAmount(T)[0]}catch(t){if(t.isInsufficientReservesError)continue;throw t}if(A.currency.equals(y))try{Et(c,new t(new It([E].concat(u),r,n.currency),n,exports.TradeType.EXACT_OUTPUT,o,i),h,Ot)}catch(t){}else if(m>1&&e.length>1){var x=e.slice(0,v).concat(e.slice(v+1,e.length));t.bestTradeExactOut(x,r,n,o,i,{maxNumResults:h,maxHops:m-1},[E].concat(u),A,c)}}}return c},t.methodNameForTradeType=function(t,e,r,n){var o;switch(t){case exports.TradeType.EXACT_INPUT:o=e?"swapExactETHForTokens":r?"swapExactTokensForETH":"swapExactTokensForTokens";break;case exports.TradeType.EXACT_OUTPUT:n&&p(!1),o=e?"swapETHForExactTokens":r?"swapTokensForExactETH":"swapTokensForExactTokens"}return o},t.estimateMinTradeAmounts=function(e,r,n,o,i,a,u){var s,c=(void 0===u?{}:u).maxHops,p=void 0===c?3:c,f=r.isNative,d=n.isNative;if(!f&&!d)return null;var h,l,m=mt(t.methodNameForTradeType(exports.TradeType.EXACT_INPUT,f,d),p.toString()),T=mt(t.methodNameForTradeType(exports.TradeType.EXACT_OUTPUT,f,d),p.toString()),y=yt(Tt(o,m,i),a),v=yt(Tt(o,T,i),a);if(f){var E=t.bestTradeExactOut(e,n,st.fromRawAmount(r,v),"0","0")[0];E&&(h=st.fromRawAmount(r,y),l=E.inputAmount)}else if(d){var A=t.bestTradeExactIn(e,st.fromRawAmount(r,y),r,"0","0")[0];A&&(h=A.outputAmount,l=st.fromRawAmount(r,v))}return h&&l?((s={})[exports.TradeType.EXACT_INPUT]=h,s[exports.TradeType.EXACT_OUTPUT]=l,s):null},t.estimateBribeAmounts=function(t,e){var r,n=wt.onChain(1),o=((r={})[exports.MethodName.swapETHForExactTokens]=st.fromRawAmount(n,Tt(t,mt("swapETHForExactTokens"),e)),r[exports.MethodName.swapExactETHForTokens]=st.fromRawAmount(n,Tt(t,mt("swapExactETHForTokens"),e)),r[exports.MethodName.swapExactTokensForETH]=st.fromRawAmount(n,Tt(t,mt("swapExactTokensForETH"),e)),r[exports.MethodName.swapExactTokensForTokens]=st.fromRawAmount(n,Tt(t,mt("swapExactTokensForTokens"),e)),r[exports.MethodName.swapTokensForExactETH]=st.fromRawAmount(n,Tt(t,mt("swapTokensForExactETH"),e)),r[exports.MethodName.swapTokensForExactTokens]=st.fromRawAmount(n,Tt(t,mt("swapTokensForExactTokens"),e)),r),i=st.fromRawAmount(n,"1000000000000000000000000000000000000000000000000"),a=st.fromRawAmount(n,"0"),u=st.fromRawAmount(n,"0");for(var s in exports.MethodName){var p=o[s];u.add(p),p.lessThan(i)&&(i=p),p.greaterThan(a)&&(a=p)}var f=u.divide(String(Object.keys(exports.MethodName).length));return{estimates:o,minBribe:i,maxBribe:a,meanBribe:st.fromRawAmount(n,c.divide(f.numerator,f.denominator))}},t}(),qt=[{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],_t=((St={})[exports.ChainId.MAINNET]={"0xE0B7927c4aF23765Cb51314A0E0521A9645F0E2A":9},St),Ct=function(){function t(){}return t.fetchTokenData=function(t,e,r,n,o){try{var i,a,u=function(r){return new At(t,e,r,n,o)};void 0===r&&(r=v.getDefaultProvider(y.getNetwork(t)));var s="number"==typeof(null===(i=_t)||void 0===i||null===(a=i[t])||void 0===a?void 0:a[e]);return Promise.resolve(s?u(_t[t][e]):Promise.resolve(new T.Contract(e,qt,r).decimals().then((function(r){var n,o,i;return _t=B({},_t,((i={})[t]=B({},null===(n=_t)||void 0===n?void 0:n[t],((o={})[e]=r,o)),i)),r}))).then(u))}catch(t){return Promise.reject(t)}},t}();function Ft(t){return"0x"+t.quotient.toString(16)}var bt,Ut,Pt,Dt=function(){function t(){}return t.swapCallParameters=function(t,e){var r=t.inputAmount.currency.isNative,n=t.outputAmount.currency.isNative;r&&n&&p(!1),!("ttl"in e)||e.ttl>0||p(!1);var o,i=ht(e.recipient),a=Ft(t.maximumAmountIn(e.allowedSlippage)),u=Ft(t.minimumAmountOut(e.allowedSlippage)),s=Ft(t.minerBribe),c=t.route.path.map((function(t){return t.address})),f="ttl"in e?"0x"+(Math.floor((new Date).getTime()/1e3)+e.ttl).toString(16):"0x"+e.deadline.toString(16),d=Boolean(e.feeOnTransfer),h={amount0:a,amount1:u,path:c,to:i,deadline:f},l=Rt.methodNameForTradeType(t.tradeType,r,n,d);switch(l){case"swapExactETHForTokens":h.amount0=a,h.amount1=u,o=a;break;case"swapExactTokensForETH":h.amount0=a,h.amount1=u,o="0x0";break;case"swapExactTokensForTokens":h.amount0=a,h.amount1=u,o=s;break;case"swapETHForExactTokens":d&&p(!1),h.amount0=a,h.amount1=u,o=a;break;case"swapTokensForExactETH":case"swapTokensForExactTokens":d&&p(!1),h.amount0=u,h.amount1=a,o=s;break;default:o=""}var m=[[h.amount0,h.amount1,h.path,h.to,h.deadline],s];return l&&m&&o||p(!1),{methodName:l,args:m,value:o}},t}();(bt=exports.Event||(exports.Event={})).GAS_CHANGE="GAS_CHANGE",bt.SOCKET_SESSION_RESPONSE="SOCKET_SESSION",bt.SOCKET_ERR="SOCKET_ERR",bt.TRANSACTION_REQUEST="TRANSACTION_REQUEST",bt.TRANSACTION_CANCEL_REQUEST="TRANSACTION_CANCEL_REQUEST",bt.TRANSACTION_RESPONSE="TRANSACTION_RESPONSE",bt.TRANSACTION_DIAGNOSIS="TRANSACTION_DIAGNOSIS",bt.TRANSACTION_STATUS_REQUEST="TRANSACTION_STATUS_REQUEST",bt.TRANSACTION_CANCEL_RESPONSE="TRANSACTION_CANCEL_RESPONSE",(Ut=exports.Status||(exports.Status={})).PENDING_TRANSACTION="PENDING_TRANSACTION",Ut.FAILED_TRANSACTION="FAILED_TRANSACTION",Ut.SUCCESSFUL_TRANSACTION="SUCCESSFUL_TRANSACTION",Ut.CANCEL_TRANSACTION_SUCCESSFUL="CANCEL_TRANSACTION_SUCCESSFUL",(Pt=exports.Diagnosis||(exports.Diagnosis={})).LOWER_THAN_TAIL="LOWER_THAN_TAIL",Pt.NOT_A_FLASHBLOCK="NOT_A_FLASHBLOCK",Pt.BUNDLE_OUTBID="BUNDLE_OUTBID",Pt.ERROR_API_BEHIND="ERROR_API_BEHIND",Pt.MISSING_BLOCK_DATA="MISSING_BLOCK_DATA",Pt.ERROR_UNKNOWN="ERROR_UNKNOWN",exports.JSBI=c,exports.AbstractCurrency=et,exports.CurrencyAmount=st,exports.Ether=wt,exports.FACTORY_ADDRESS=x,exports.FIVE=R,exports.Fetcher=Ct,exports.Fraction=at,exports.GAS_ESTIMATES=P,exports.INIT_CODE_HASH=g,exports.InsufficientInputAmountError=tt,exports.InsufficientReservesError=z,exports.MINIMUM_LIQUIDITY=I,exports.MaxUint256=A,exports.NativeCurrency=ct,exports.ONE=k,exports.Pair=gt,exports.Percent=dt,exports.Price=pt,exports.ROUTER_ADDRESS=N,exports.Route=It,exports.Router=Dt,exports.SOLIDITY_TYPE_MAXIMA=U,exports.TEN=q,exports.THREE=S,exports.TWO=O,exports.Token=At,exports.Trade=Rt,exports.WETH=Nt,exports.ZERO=w,exports._100=_,exports._1000=F,exports._997=C,exports.currencyEquals=xt,exports.inputOutputComparator=kt,exports.tradeComparator=Ot;
>>>>>>> 6b87ec1... rebuild
=======
"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e,n,r,o,i,a,u,s,c=t(require("jsbi")),p=t(require("tiny-invariant")),f=t(require("big.js")),d=t(require("decimal.js-light")),h=t(require("toformat")),l=(t(require("tiny-warning")),require("@ethersproject/address")),m=require("@ethersproject/solidity"),T=require("@ethersproject/contracts"),E=require("@ethersproject/networks"),v=require("@ethersproject/providers"),y=require("socket.io-client");(i=exports.ChainId||(exports.ChainId={}))[i.MAINNET=1]="MAINNET",i[i.ROPSTEN=3]="ROPSTEN",i[i.RINKEBY=4]="RINKEBY",i[i["GÖRLI"]=5]="GÖRLI",i[i.KOVAN=42]="KOVAN",i[i.HARDHAT=1337]="HARDHAT",(a=exports.Exchange||(exports.Exchange={}))[a.UNI=0]="UNI",a[a.SUSHI=1]="SUSHI",a[a.UNDEFINED=2]="UNDEFINED",(u=exports.TradeType||(exports.TradeType={}))[u.EXACT_INPUT=0]="EXACT_INPUT",u[u.EXACT_OUTPUT=1]="EXACT_OUTPUT",(s=exports.Rounding||(exports.Rounding={}))[s.ROUND_DOWN=0]="ROUND_DOWN",s[s.ROUND_HALF_UP=1]="ROUND_HALF_UP",s[s.ROUND_UP=2]="ROUND_UP";var A,x=c.BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),N=((e={})[exports.Exchange.UNI]="0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f",e[exports.Exchange.SUSHI]="0xC0AEe478e3658e2610c5F7A4A2E1777cE9e4f2Ac",e[exports.Exchange.UNDEFINED]="0x0",e),I=((n={})[exports.Exchange.UNI]="0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D",n[exports.Exchange.SUSHI]="0xd9e1cE17f2641f24aE83637ab66a2cca9C378B9",n[exports.Exchange.UNDEFINED]="0x0",n),S=((r={})[exports.Exchange.UNI]="0x96e8ac4277198ff8b6f785478aa9a39f403cb768dd02cbee326c3e7da348845f",r[exports.Exchange.SUSHI]="0xe18a34eb0e04b04f7a0ac29a6e80748dca96319b42c54d679cb821dca90c6303",r[exports.Exchange.UNDEFINED]="0x0",r),g=c.BigInt(1e3),k=c.BigInt(0),O=c.BigInt(1),w=c.BigInt(2),R=c.BigInt(3),_=c.BigInt(5),C=c.BigInt(10),q=c.BigInt(100),F=c.BigInt(997),b=c.BigInt(1e3);(A=exports.SolidityType||(exports.SolidityType={})).uint8="uint8",A.uint256="uint256";var U,P=((o={})[exports.SolidityType.uint8]=c.BigInt("0xff"),o[exports.SolidityType.uint256]=c.BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),o);(U=exports.MethodName||(exports.MethodName={})).swapETHForExactTokens="swapETHForExactTokens",U.swapExactETHForTokens="swapExactETHForTokens",U.swapExactTokensForETH="swapExactTokensForETH",U.swapExactTokensForTokens="swapExactTokensForTokens",U.swapTokensForExactETH="swapTokensForExactETH",U.swapTokensForExactTokens="swapTokensForExactTokens";var D={swapETHForExactTokens:"155485",swapExactETHForTokens:"151393",swapExactTokensForETH:"165009",swapExactTokensForTokens:"170272",swapTokensForExactETH:"195192",swapTokensForExactTokens:"197365"};function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function B(t,e,n){return e&&H(t.prototype,e),n&&H(t,n),t}function L(){return(L=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function M(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function K(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function G(t,e,n){return(G=K()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&W(o,n.prototype),o}).apply(null,arguments)}function X(t){var e="function"==typeof Map?new Map:void 0;return(X=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return G(t,arguments,j(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),W(n,t)})(t)}function Q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Y(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return V(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}var J,Z,$,z="setPrototypeOf"in Object,tt=function(t){function e(){var n;return(n=t.call(this)||this).isInsufficientReservesError=!0,n.name=n.constructor.name,z&&Object.setPrototypeOf(Q(n),(this instanceof e?this.constructor:void 0).prototype),n}return M(e,t),e}(X(Error)),et=function(t){function e(){var n;return(n=t.call(this)||this).isInsufficientInputAmountError=!0,n.name=n.constructor.name,z&&Object.setPrototypeOf(Q(n),(this instanceof e?this.constructor:void 0).prototype),n}return M(e,t),e}(X(Error)),nt=function(t,e,n,r){Number.isSafeInteger(t)||p(!1),e>=0&&e<255&&Number.isInteger(e)||p(!1),this.chainId=t,this.decimals=e,this.symbol=n,this.name=r},rt=h(d),ot=h(f),it=((J={})[exports.Rounding.ROUND_DOWN]=rt.ROUND_DOWN,J[exports.Rounding.ROUND_HALF_UP]=rt.ROUND_HALF_UP,J[exports.Rounding.ROUND_UP]=rt.ROUND_UP,J),at=((Z={})[exports.Rounding.ROUND_DOWN]=0,Z[exports.Rounding.ROUND_HALF_UP]=1,Z[exports.Rounding.ROUND_UP]=3,Z),ut=function(){function t(t,e){void 0===e&&(e=c.BigInt(1)),this.numerator=c.BigInt(t),this.denominator=c.BigInt(e)}t.tryParseFraction=function(e){if(e instanceof c||"number"==typeof e||"string"==typeof e)return new t(e);if("numerator"in e&&"denominator"in e)return e;throw new Error("Could not parse fraction")};var e=t.prototype;return e.invert=function(){return new t(this.denominator,this.numerator)},e.add=function(e){var n=t.tryParseFraction(e);return c.equal(this.denominator,n.denominator)?new t(c.add(this.numerator,n.numerator),this.denominator):new t(c.add(c.multiply(this.numerator,n.denominator),c.multiply(n.numerator,this.denominator)),c.multiply(this.denominator,n.denominator))},e.subtract=function(e){var n=t.tryParseFraction(e);return c.equal(this.denominator,n.denominator)?new t(c.subtract(this.numerator,n.numerator),this.denominator):new t(c.subtract(c.multiply(this.numerator,n.denominator),c.multiply(n.numerator,this.denominator)),c.multiply(this.denominator,n.denominator))},e.lessThan=function(e){var n=t.tryParseFraction(e);return c.lessThan(c.multiply(this.numerator,n.denominator),c.multiply(n.numerator,this.denominator))},e.equalTo=function(e){var n=t.tryParseFraction(e);return c.equal(c.multiply(this.numerator,n.denominator),c.multiply(n.numerator,this.denominator))},e.greaterThan=function(e){var n=t.tryParseFraction(e);return c.greaterThan(c.multiply(this.numerator,n.denominator),c.multiply(n.numerator,this.denominator))},e.multiply=function(e){var n=t.tryParseFraction(e);return new t(c.multiply(this.numerator,n.numerator),c.multiply(this.denominator,n.denominator))},e.divide=function(e){var n=t.tryParseFraction(e);return new t(c.multiply(this.numerator,n.denominator),c.multiply(this.denominator,n.numerator))},e.toSignificant=function(t,e,n){void 0===e&&(e={groupSeparator:""}),void 0===n&&(n=exports.Rounding.ROUND_HALF_UP),Number.isInteger(t)||p(!1),t>0||p(!1),rt.set({precision:t+1,rounding:it[n]});var r=new rt(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(t);return r.toFormat(r.decimalPlaces(),e)},e.toFixed=function(t,e,n){return void 0===e&&(e={groupSeparator:""}),void 0===n&&(n=exports.Rounding.ROUND_HALF_UP),Number.isInteger(t)||p(!1),t>=0||p(!1),ot.DP=t,ot.RM=at[n],new ot(this.numerator.toString()).div(this.denominator.toString()).toFormat(t,e)},B(t,[{key:"quotient",get:function(){return c.divide(this.numerator,this.denominator)}},{key:"remainder",get:function(){return new t(c.remainder(this.numerator,this.denominator),this.denominator)}},{key:"asFraction",get:function(){return new t(this.numerator,this.denominator)}}]),t}(),st=h(f),ct=function(t){function e(e,n,r){var o;return o=t.call(this,n,r)||this,c.lessThanOrEqual(o.quotient,x)||p(!1),o.currency=e,o.decimalScale=c.exponentiate(c.BigInt(10),c.BigInt(e.decimals)),o}M(e,t),e.fromRawAmount=function(t,n){return new e(t,n)},e.fromFractionalAmount=function(t,n,r){return new e(t,n,r)};var n=e.prototype;return n.add=function(n){this.currency.equals(n.currency)||p(!1);var r=t.prototype.add.call(this,n);return e.fromFractionalAmount(this.currency,r.numerator,r.denominator)},n.subtract=function(n){this.currency.equals(n.currency)||p(!1);var r=t.prototype.subtract.call(this,n);return e.fromFractionalAmount(this.currency,r.numerator,r.denominator)},n.multiply=function(n){var r=t.prototype.multiply.call(this,n);return e.fromFractionalAmount(this.currency,r.numerator,r.denominator)},n.divide=function(n){var r=t.prototype.divide.call(this,n);return e.fromFractionalAmount(this.currency,r.numerator,r.denominator)},n.toSignificant=function(e,n,r){return void 0===e&&(e=6),void 0===r&&(r=exports.Rounding.ROUND_DOWN),t.prototype.divide.call(this,this.decimalScale).toSignificant(e,n,r)},n.toFixed=function(e,n,r){return void 0===e&&(e=this.currency.decimals),void 0===r&&(r=exports.Rounding.ROUND_DOWN),e<=this.currency.decimals||p(!1),t.prototype.divide.call(this,this.decimalScale).toFixed(e,n,r)},n.toExact=function(t){return void 0===t&&(t={groupSeparator:""}),st.DP=this.currency.decimals,new st(this.quotient.toString()).div(this.decimalScale.toString()).toFormat(t)},B(e,[{key:"wrapped",get:function(){return this.currency.isToken?this:e.fromFractionalAmount(this.currency.wrapped,this.numerator,this.denominator)}}]),e}(ut),pt=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).isNative=!0,e.isToken=!1,e}return M(e,t),e}(nt),ft=function(t){function e(){for(var e,n,r,o,i,a=arguments.length,u=new Array(a),s=0;s<a;s++)u[s]=arguments[s];if(4===u.length)n=u[0],r=u[1],o=u[2],i=u[3];else{var p=u[0].quoteAmount.divide(u[0].baseAmount),f=[u[0].baseAmount.currency,u[0].quoteAmount.currency,p.denominator,p.numerator];n=f[0],r=f[1],o=f[2],i=f[3]}return(e=t.call(this,i,o)||this).baseCurrency=n,e.quoteCurrency=r,e.scalar=new ut(c.exponentiate(c.BigInt(10),c.BigInt(n.decimals)),c.exponentiate(c.BigInt(10),c.BigInt(r.decimals))),e}M(e,t);var n=e.prototype;return n.invert=function(){return new e(this.quoteCurrency,this.baseCurrency,this.numerator,this.denominator)},n.multiply=function(n){this.quoteCurrency.equals(n.baseCurrency)||p(!1);var r=t.prototype.multiply.call(this,n);return new e(this.baseCurrency,n.quoteCurrency,r.denominator,r.numerator)},n.quote=function(e){e.currency.equals(this.baseCurrency)||p(!1);var n=t.prototype.multiply.call(this,e);return ct.fromFractionalAmount(this.quoteCurrency,n.numerator,n.denominator)},n.toSignificant=function(t,e,n){return void 0===t&&(t=6),this.adjustedForDecimals.toSignificant(t,e,n)},n.toFixed=function(t,e,n){return void 0===t&&(t=4),this.adjustedForDecimals.toFixed(t,e,n)},B(e,[{key:"adjustedForDecimals",get:function(){return t.prototype.multiply.call(this,this.scalar)}}]),e}(ut),dt=new ut(q),ht=function(t){function e(){return t.apply(this,arguments)||this}M(e,t);var n=e.prototype;return n.toSignificant=function(t,e,n){return void 0===t&&(t=5),this.multiply(dt).toSignificant(t,e,n)},n.toFixed=function(t,e,n){return void 0===t&&(t=2),this.multiply(dt).toFixed(t,e,n)},e}(ut);function lt(t){try{return l.getAddress(t)}catch(t){p(!1)}}function mt(t){return t instanceof c?t:c.BigInt(t)}function Tt(t,e){void 0===t&&(t="swapTokensForExactETH"),void 0===e&&(e="1");var n=mt(D[t]),r=mt("0"),o=c.multiply(mt(e),r);return c.add(n,o)}function Et(t,e,n){t=mt(t),e=mt(e);var r=vt(t,n);return c.multiply(r,e)}function vt(t,e){t=mt(t),e=c.multiply(mt(e),mt("100"));var n=c.multiply(t,c.add(mt("10000"),e)),r=mt("10000");return c.divide(n,r)}function yt(t){var e,n;e=t,n=exports.SolidityType.uint256,c.greaterThanOrEqual(e,k)||p(!1),c.lessThanOrEqual(e,P[n])||p(!1);var r,o=k;if(c.greaterThan(t,R))for(o=t,r=c.add(c.divide(t,w),O);c.lessThan(r,o);)o=r,r=c.divide(c.add(c.divide(t,r),r),w);else c.notEqual(t,k)&&(o=O);return o}function At(t,e,n,r){if(n>0||p(!1),t.length<=n||p(!1),0===t.length)return t.push(e),null;var o=t.length===n;if(o&&r(t[t.length-1],e)<=0)return e;for(var i=0,a=t.length;i<a;){var u=i+a>>>1;r(t[u],e)<=0?i=u+1:a=u}return t.splice(i,0,e),o?t.pop():null}var xt=function(t){function e(e,n,r,o,i){var a;return(a=t.call(this,e,r,o,i)||this).isNative=!1,a.isToken=!0,a.chainId=e,a.address=lt(n),a}M(e,t);var n=e.prototype;return n.equals=function(t){return t.isToken&&this.chainId===t.chainId&&this.address===t.address},n.sortsBefore=function(t){return this.chainId!==t.chainId&&p(!1),this.address===t.address&&p(!1),this.address.toLowerCase()<t.address.toLowerCase()},B(e,[{key:"wrapped",get:function(){return this}}]),e}(nt);function Nt(t,e){return t instanceof xt&&e instanceof xt?t.equals(e):!(t instanceof xt||e instanceof xt||t!==e)}var It=(($={})[exports.ChainId.MAINNET]=new xt(exports.ChainId.MAINNET,"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",18,"WETH","Wrapped Ether"),$[exports.ChainId.HARDHAT]=new xt(exports.ChainId.HARDHAT,"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",18,"WETH","Wrapped Ether"),$[exports.ChainId.ROPSTEN]=new xt(exports.ChainId.ROPSTEN,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),$[exports.ChainId.RINKEBY]=new xt(exports.ChainId.RINKEBY,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),$[exports.ChainId.GÖRLI]=new xt(exports.ChainId.GÖRLI,"0xB4FBF271143F4FBf7B91A5ded31805e42b2208d6",18,"WETH","Wrapped Ether"),$[exports.ChainId.KOVAN]=new xt(exports.ChainId.KOVAN,"0xd0A1E359811322d97991E03f863a0C30C2cF029C",18,"WETH","Wrapped Ether"),$),St=function(){function t(e,n,r){var o=e.currency.sortsBefore(n.currency)?[e,n]:[n,e];this.liquidityToken=new xt(o[0].currency.chainId,t.getAddress(o[0].currency,o[1].currency,r),18,"UNI-V2","Uniswap V2"),this.tokenAmounts=o,this.exchange=r}t.getAddress=function(t,e,n){return function(t){var e=t.exchange,n=t.tokenA,r=t.tokenB,o=n.sortsBefore(r)?[n,r]:[r,n];return l.getCreate2Address(N[e],m.keccak256(["bytes"],[m.pack(["address","address"],[o[0].address,o[1].address])]),S[e])}({exchange:n,tokenA:t,tokenB:e})};var e=t.prototype;return e.involvesToken=function(t){return t.equals(this.token0)||t.equals(this.token1)},e.priceOf=function(t){return this.involvesToken(t)||p(!1),t.equals(this.token0)?this.token0Price:this.token1Price},e.reserveOf=function(t){return this.involvesToken(t)||p(!1),t.equals(this.token0)?this.reserve0:this.reserve1},e.getOutputAmount=function(e){if(this.involvesToken(e.currency)||p(!1),c.equal(this.reserve0.quotient,k)||c.equal(this.reserve1.quotient,k))throw new tt;var n=this.reserveOf(e.currency),r=this.reserveOf(e.currency.equals(this.token0)?this.token1:this.token0),o=c.multiply(e.quotient,F),i=c.multiply(o,r.quotient),a=c.add(c.multiply(n.quotient,b),o),u=ct.fromRawAmount(e.currency.equals(this.token0)?this.token1:this.token0,c.divide(i,a));if(c.equal(u.quotient,k))throw new et;return[u,new t(n.add(e),r.subtract(u),this.exchange)]},e.getInputAmount=function(e){if(this.involvesToken(e.currency)||p(!1),c.equal(this.reserve0.quotient,k)||c.equal(this.reserve1.quotient,k)||c.greaterThanOrEqual(e.quotient,this.reserveOf(e.currency).quotient))throw new tt;var n=this.reserveOf(e.currency),r=this.reserveOf(e.currency.equals(this.token0)?this.token1:this.token0),o=c.multiply(c.multiply(r.quotient,e.quotient),b),i=c.multiply(c.subtract(n.quotient,e.quotient),F),a=ct.fromRawAmount(e.currency.equals(this.token0)?this.token1:this.token0,c.add(c.divide(o,i),O));return[a,new t(r.add(a),n.subtract(e),this.exchange)]},e.getLiquidityMinted=function(t,e,n){t.currency.equals(this.liquidityToken)||p(!1);var r,o=e.currency.sortsBefore(n.currency)?[e,n]:[n,e];if(o[0].currency.equals(this.token0)&&o[1].currency.equals(this.token1)||p(!1),c.equal(t.quotient,k))r=c.subtract(yt(c.multiply(o[0].quotient,o[1].quotient)),g);else{var i=c.divide(c.multiply(o[0].quotient,t.quotient),this.reserve0.quotient),a=c.divide(c.multiply(o[1].quotient,t.quotient),this.reserve1.quotient);r=c.lessThanOrEqual(i,a)?i:a}if(!c.greaterThan(r,k))throw new et;return ct.fromRawAmount(this.liquidityToken,r)},e.getLiquidityValue=function(t,e,n,r,o){var i;if(void 0===r&&(r=!1),this.involvesToken(t)||p(!1),e.currency.equals(this.liquidityToken)||p(!1),n.currency.equals(this.liquidityToken)||p(!1),c.lessThanOrEqual(n.quotient,e.quotient)||p(!1),r){o||p(!1);var a=c.BigInt(o);if(c.equal(a,k))i=e;else{var u=yt(c.multiply(this.reserve0.quotient,this.reserve1.quotient)),s=yt(a);if(c.greaterThan(u,s)){var f=c.multiply(e.quotient,c.subtract(u,s)),d=c.add(c.multiply(u,_),s),h=c.divide(f,d);i=e.add(ct.fromRawAmount(this.liquidityToken,h))}else i=e}}else i=e;return ct.fromRawAmount(t,c.divide(c.multiply(n.quotient,this.reserveOf(t).quotient),i.quotient))},B(t,[{key:"token0Price",get:function(){var t=this.tokenAmounts[1].divide(this.tokenAmounts[0]);return new ft(this.token0,this.token1,t.denominator,t.numerator)}},{key:"token1Price",get:function(){var t=this.tokenAmounts[0].divide(this.tokenAmounts[1]);return new ft(this.token1,this.token0,t.denominator,t.numerator)}},{key:"chainId",get:function(){return this.token0.chainId}},{key:"token0",get:function(){return this.tokenAmounts[0].currency}},{key:"token1",get:function(){return this.tokenAmounts[1].currency}},{key:"reserve0",get:function(){return this.tokenAmounts[0]}},{key:"reserve1",get:function(){return this.tokenAmounts[1]}}]),t}(),gt=function(){function t(t,e,n){this._midPrice=null,t.length>0||p(!1);var r=t[0].chainId;t.every((function(t){return t.chainId===r}))||p(!1);var o=e.wrapped;t[0].involvesToken(o)||p(!1),void 0===n||t[t.length-1].involvesToken(n.wrapped)||p(!1);for(var i,a=[o],u=Y(t.entries());!(i=u()).done;){var s=i.value,c=s[1],f=a[s[0]];f.equals(c.token0)||f.equals(c.token1)||p(!1);var d=f.equals(c.token0)?c.token1:c.token0;a.push(d)}this.pairs=t,this.path=a,this.input=e,this.output=n}return B(t,[{key:"midPrice",get:function(){if(null!==this._midPrice)return this._midPrice;for(var t,e=[],n=Y(this.pairs.entries());!(t=n()).done;){var r=t.value,o=r[1];e.push(this.path[r[0]].equals(o.token0)?new ft(o.reserve0.currency,o.reserve1.currency,o.reserve0.quotient,o.reserve1.quotient):new ft(o.reserve1.currency,o.reserve0.currency,o.reserve1.quotient,o.reserve0.quotient))}var i=e.slice(1).reduce((function(t,e){return t.multiply(e)}),e[0]);return this._midPrice=new ft(this.input,this.output,i.denominator,i.numerator)}},{key:"chainId",get:function(){return this.pairs[0].chainId}}]),t}(),kt=function(t){function e(e){return t.call(this,e,18,"ETH","Ether")||this}return M(e,t),e.onChain=function(t){var n;return null!==(n=this._etherCache[t])&&void 0!==n?n:this._etherCache[t]=new e(t)},e.prototype.equals=function(t){return t.isNative&&t.chainId===this.chainId},B(e,[{key:"wrapped",get:function(){var t=It[this.chainId];return t||p(!1),t}}]),e}(pt);function Ot(t,e){return t.inputAmount.currency.equals(e.inputAmount.currency)||p(!1),t.outputAmount.currency.equals(e.outputAmount.currency)||p(!1),t.outputAmount.equalTo(e.outputAmount)?t.inputAmount.equalTo(e.inputAmount)?0:t.inputAmount.lessThan(e.inputAmount)?-1:1:t.outputAmount.lessThan(e.outputAmount)?1:-1}function wt(t,e){var n=Ot(t,e);return 0!==n?n:t.priceImpact.lessThan(e.priceImpact)?-1:t.priceImpact.greaterThan(e.priceImpact)?1:t.route.path.length-e.route.path.length}kt._etherCache={};var Rt,_t=function(){function t(e,n,r,o,i){this.route=e,this.tradeType=r;var a=new Array(e.path.length),u=new Array(e.pairs.length),s=e.input.isNative,c=e.output.isNative,f=Tt(t.methodNameForTradeType(r,s,c),(e.path.length-1).toString()),d=Et(o,f,i);this.estimatedGas=f.toString(),this.minerBribe=ct.fromRawAmount(It[e.chainId],d);var h=n.wrapped,l=n.wrapped;if(r===exports.TradeType.EXACT_INPUT){Nt(n.currency,e.input)||p(!1),a[0]=n.wrapped;for(var m=0;m<e.path.length-1;m++){var T=e.pairs[m],E=a[m];if(s&&0===m){E.greaterThan(this.minerBribe)||p(!1);var v=E.subtract(this.minerBribe);E=v,h=v}var y=T.getOutputAmount(E),A=y[0],x=y[1];if(c&&m===e.path.length-2){A.greaterThan(this.minerBribe)||p(!1);var N=A.subtract(this.minerBribe);a[m+1]=N,l=A}else l=A,a[m+1]=A;u[m]=x}}else{Nt(n.currency,e.output)||p(!1),a[a.length-1]=n.wrapped;for(var I=e.path.length-1;I>0;I--){var S=a[I];if(c&&I===e.path.length-1){var g=S.add(this.minerBribe);S=g,l=g}else I===e.path.length-1&&(l=S);var k=e.pairs[I-1].getInputAmount(S),O=k[0],w=k[1];if(s&&1===I){var R=O.add(this.minerBribe);a[I-1]=R,h=O}else a[I-1]=1===I?h=O:O;u[I-1]=w}}this.exchange=e.pairs[0].exchange,this.inputAmount=ct.fromFractionalAmount(e.input,a[0].numerator,a[0].denominator),this.outputAmount=ct.fromFractionalAmount(e.output,a[a.length-1].numerator,a[a.length-1].denominator),this.executionPrice=new ft(e.input,e.output,h.quotient,l.quotient),this.priceImpact=function(t,e,n){var r=t.quote(e),o=r.subtract(n).divide(r);return new ht(o.numerator,o.denominator)}(e.midPrice,this.inputAmount,this.outputAmount)}t.exactIn=function(e,n,r,o){return new t(e,n,exports.TradeType.EXACT_INPUT,r,o)},t.exactOut=function(e,n,r,o){return new t(e,n,exports.TradeType.EXACT_OUTPUT,r,o)};var e=t.prototype;return e.minimumAmountOut=function(t){if(t.lessThan(k)&&p(!1),this.tradeType===exports.TradeType.EXACT_OUTPUT)return this.outputAmount;var e=new ut(O).add(t).invert().multiply(this.outputAmount.quotient).quotient;return ct.fromRawAmount(this.outputAmount.currency,e)},e.maximumAmountIn=function(t){if(t.lessThan(k)&&p(!1),this.tradeType===exports.TradeType.EXACT_INPUT)return this.inputAmount;var e=new ut(O).add(t).multiply(this.inputAmount.quotient).quotient;return ct.fromRawAmount(this.inputAmount.currency,e)},t.bestTradeExactIn=function(e,n,r,o,i,a,u,s,c){var f=void 0===a?{}:a,d=f.maxNumResults,h=void 0===d?3:d,l=f.maxHops,m=void 0===l?3:l;void 0===u&&(u=[]),void 0===s&&(s=n),void 0===c&&(c=[]),e.length>0||p(!1),m>0||p(!1),s===n||u.length>0||p(!1);for(var T=exports.TradeType.EXACT_INPUT,E=s.wrapped,v=r.wrapped,y=0;y<e.length;y++){var A=e[y];if((A.token0.equals(E.currency)||A.token1.equals(E.currency))&&!A.reserve0.equalTo(k)&&!A.reserve1.equalTo(k)){var x=void 0;try{x=A.getOutputAmount(E)[0]}catch(t){if(t.isInsufficientInputAmountError)continue;throw t}if(x.currency.equals(v))try{At(c,new t(new gt([].concat(u,[A]),n.currency,r),n,T,o,i),h,wt)}catch(t){}else if(m>1&&e.length>1){var N=e.slice(0,y).concat(e.slice(y+1,e.length));t.bestTradeExactIn(N,n,r,o,i,{maxNumResults:h,maxHops:m-1},[].concat(u,[A]),x,c)}}}return c},t.bestTradeExactOut=function(e,n,r,o,i,a,u,s,c){var f=void 0===a?{}:a,d=f.maxNumResults,h=void 0===d?3:d,l=f.maxHops,m=void 0===l?3:l;void 0===u&&(u=[]),void 0===s&&(s=r),void 0===c&&(c=[]),e.length>0||p(!1),m>0||p(!1),s===r||u.length>0||p(!1);for(var T=s.wrapped,E=n.wrapped,v=0;v<e.length;v++){var y=e[v];if((y.token0.equals(T.currency)||y.token1.equals(T.currency))&&!y.reserve0.equalTo(k)&&!y.reserve1.equalTo(k)){var A=void 0;try{A=y.getInputAmount(T)[0]}catch(t){if(t.isInsufficientReservesError)continue;throw t}if(A.currency.equals(E))try{At(c,new t(new gt([y].concat(u),n,r.currency),r,exports.TradeType.EXACT_OUTPUT,o,i),h,wt)}catch(t){}else if(m>1&&e.length>1){var x=e.slice(0,v).concat(e.slice(v+1,e.length));t.bestTradeExactOut(x,n,r,o,i,{maxNumResults:h,maxHops:m-1},[y].concat(u),A,c)}}}return c},t.methodNameForTradeType=function(t,e,n,r){var o;switch(t){case exports.TradeType.EXACT_INPUT:o=e?"swapExactETHForTokens":n?"swapExactTokensForETH":"swapExactTokensForTokens";break;case exports.TradeType.EXACT_OUTPUT:r&&p(!1),o=e?"swapETHForExactTokens":n?"swapTokensForExactETH":"swapTokensForExactTokens"}return o},t.estimateMinTradeAmounts=function(e,n,r,o,i,a,u){var s,c=(void 0===u?{}:u).maxHops,p=void 0===c?3:c,f=n.isNative,d=r.isNative;if(!f&&!d)return null;var h,l,m=Tt(t.methodNameForTradeType(exports.TradeType.EXACT_INPUT,f,d),p.toString()),T=Tt(t.methodNameForTradeType(exports.TradeType.EXACT_OUTPUT,f,d),p.toString()),E=vt(Et(o,m,i),a),v=vt(Et(o,T,i),a);if(f){var y=t.bestTradeExactOut(e,r,ct.fromRawAmount(n,v),"0","0")[0];y&&(h=ct.fromRawAmount(n,E),l=y.inputAmount)}else if(d){var A=t.bestTradeExactIn(e,ct.fromRawAmount(n,E),n,"0","0")[0];A&&(h=A.outputAmount,l=ct.fromRawAmount(n,v))}return h&&l?((s={})[exports.TradeType.EXACT_INPUT]=h,s[exports.TradeType.EXACT_OUTPUT]=l,s):null},t.estimateBribeAmounts=function(t,e){var n,r=kt.onChain(1),o=((n={})[exports.MethodName.swapETHForExactTokens]=ct.fromRawAmount(r,Et(t,Tt("swapETHForExactTokens"),e)),n[exports.MethodName.swapExactETHForTokens]=ct.fromRawAmount(r,Et(t,Tt("swapExactETHForTokens"),e)),n[exports.MethodName.swapExactTokensForETH]=ct.fromRawAmount(r,Et(t,Tt("swapExactTokensForETH"),e)),n[exports.MethodName.swapExactTokensForTokens]=ct.fromRawAmount(r,Et(t,Tt("swapExactTokensForTokens"),e)),n[exports.MethodName.swapTokensForExactETH]=ct.fromRawAmount(r,Et(t,Tt("swapTokensForExactETH"),e)),n[exports.MethodName.swapTokensForExactTokens]=ct.fromRawAmount(r,Et(t,Tt("swapTokensForExactTokens"),e)),n),i=ct.fromRawAmount(r,"1000000000000000000000000000000000000000000000000"),a=ct.fromRawAmount(r,"0"),u=ct.fromRawAmount(r,"0");for(var s in exports.MethodName){var p=o[s];u.add(p),p.lessThan(i)&&(i=p),p.greaterThan(a)&&(a=p)}var f=u.divide(String(Object.keys(exports.MethodName).length));return{estimates:o,minBribe:i,maxBribe:a,meanBribe:ct.fromRawAmount(r,c.divide(f.numerator,f.denominator))}},t}(),Ct=[{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],qt=((Rt={})[exports.ChainId.MAINNET]={"0xE0B7927c4aF23765Cb51314A0E0521A9645F0E2A":9},Rt),Ft=function(){function t(){}return t.fetchTokenData=function(t,e,n,r,o){try{var i,a,u=function(n){return new xt(t,e,n,r,o)};void 0===n&&(n=v.getDefaultProvider(E.getNetwork(t)));var s="number"==typeof(null===(i=qt)||void 0===i||null===(a=i[t])||void 0===a?void 0:a[e]);return Promise.resolve(s?u(qt[t][e]):Promise.resolve(new T.Contract(e,Ct,n).decimals().then((function(n){var r,o,i;return qt=L({},qt,((i={})[t]=L({},null===(r=qt)||void 0===r?void 0:r[t],((o={})[e]=n,o)),i)),n}))).then(u))}catch(t){return Promise.reject(t)}},t}();function bt(t){return"0x"+t.quotient.toString(16)}var Ut,Pt,Dt,Ht=function(){function t(){}return t.swapCallParameters=function(t,e){var n=t.inputAmount.currency.isNative,r=t.outputAmount.currency.isNative;n&&r&&p(!1),!("ttl"in e)||e.ttl>0||p(!1);var o,i=lt(e.recipient),a=bt(t.maximumAmountIn(e.allowedSlippage)),u=bt(t.minimumAmountOut(e.allowedSlippage)),s=bt(t.minerBribe),c=t.route.path.map((function(t){return t.address})),f="ttl"in e?"0x"+(Math.floor((new Date).getTime()/1e3)+e.ttl).toString(16):"0x"+e.deadline.toString(16),d=Boolean(e.feeOnTransfer),h={amount0:a,amount1:u,path:c,to:i,deadline:f},l=_t.methodNameForTradeType(t.tradeType,n,r,d);switch(l){case"swapExactETHForTokens":h.amount0=a,h.amount1=u,o=a;break;case"swapExactTokensForETH":h.amount0=a,h.amount1=u,o="0x0";break;case"swapExactTokensForTokens":h.amount0=a,h.amount1=u,o=s;break;case"swapETHForExactTokens":d&&p(!1),h.amount0=a,h.amount1=u,o=a;break;case"swapTokensForExactETH":case"swapTokensForExactTokens":d&&p(!1),h.amount0=u,h.amount1=a,o=s;break;default:o=""}var m=[[h.amount0,h.amount1,h.path,h.to,h.deadline],s];return l&&m&&o||p(!1),{methodName:l,args:m,value:o}},t}();(Ut=exports.Event||(exports.Event={})).GAS_CHANGE="GAS_CHANGE",Ut.SOCKET_SESSION_RESPONSE="SOCKET_SESSION",Ut.SOCKET_ERR="SOCKET_ERR",Ut.TRANSACTION_REQUEST="TRANSACTION_REQUEST",Ut.TRANSACTION_CANCEL_REQUEST="TRANSACTION_CANCEL_REQUEST",Ut.TRANSACTION_RESPONSE="TRANSACTION_RESPONSE",Ut.TRANSACTION_DIAGNOSIS="TRANSACTION_DIAGNOSIS",Ut.TRANSACTION_STATUS_REQUEST="TRANSACTION_STATUS_REQUEST",Ut.TRANSACTION_CANCEL_RESPONSE="TRANSACTION_CANCEL_RESPONSE",(Pt=exports.Status||(exports.Status={})).PENDING_TRANSACTION="PENDING_TRANSACTION",Pt.FAILED_TRANSACTION="FAILED_TRANSACTION",Pt.SUCCESSFUL_TRANSACTION="SUCCESSFUL_TRANSACTION",Pt.CANCEL_TRANSACTION_SUCCESSFUL="CANCEL_TRANSACTION_SUCCESSFUL",(Dt=exports.Diagnosis||(exports.Diagnosis={})).LOWER_THAN_TAIL="LOWER_THAN_TAIL",Dt.NOT_A_FLASHBLOCK="NOT_A_FLASHBLOCK",Dt.BUNDLE_OUTBID="BUNDLE_OUTBID",Dt.ERROR_API_BEHIND="ERROR_API_BEHIND",Dt.MISSING_BLOCK_DATA="MISSING_BLOCK_DATA",Dt.ERROR_UNKNOWN="ERROR_UNKNOWN";var Bt=localStorage.getItem("SESSION_TOKEN"),Lt=function(){function t(t){void 0===t&&(t="https://mistx-app-goerli.herokuapp.com");var e=y.io(t,{transports:["websocket"],auth:{token:Bt},reconnection:!0,reconnectionDelay:5e3,autoConnect:!0});this.socket=e}var e=t.prototype;return e.disconnect=function(){this.socket.off("connect"),this.socket.off("connect_error"),this.socket.off(exports.Event.SOCKET_ERR),this.socket.off(exports.Event.SOCKET_SESSION_RESPONSE),this.socket.off(exports.Event.GAS_CHANGE),this.socket.off(exports.Event.TRANSACTION_RESPONSE),this.socket.off(exports.Event.TRANSACTION_DIAGNOSIS)},e.init=function(t){var e=this,n=t.onConnect,r=t.onConnectError,o=t.onDisconnect,i=t.onError,a=t.onGasChange,u=t.onTransactionResponse,s=t.onTransactionUpdate;return this.socket.on("connect",(function(){n&&n()})),this.socket.on("connect_error",(function(t){r&&r(t)})),this.socket.on("disconnect",(function(t){o&&o(t)})),this.socket.on(exports.Event.SOCKET_ERR,(function(t){i&&i(t)})),this.socket.on(exports.Event.SOCKET_SESSION_RESPONSE,(function(t){localStorage.setItem("SESSION_TOKEN",t.token)})),this.socket.on(exports.Event.GAS_CHANGE,(function(t){a&&a(t)})),this.socket.on(exports.Event.TRANSACTION_RESPONSE,(function(t){u&&u(t)})),this.socket.on(exports.Event.TRANSACTION_DIAGNOSIS,(function(t){s&&s(t)})),function(){e.disconnect()}},e.emitTransactionRequest=function(t){this.socket.emit(exports.Event.TRANSACTION_REQUEST,t)},e.emitStatusRequest=function(t){this.socket.emit(exports.Event.TRANSACTION_STATUS_REQUEST,t)},e.emitTransactionCancellation=function(t){this.socket.emit(exports.Event.TRANSACTION_CANCEL_REQUEST,t)},t}();exports.JSBI=c,exports.AbstractCurrency=nt,exports.CurrencyAmount=ct,exports.Ether=kt,exports.FACTORY_ADDRESS=N,exports.FIVE=_,exports.Fetcher=Ft,exports.Fraction=ut,exports.GAS_ESTIMATES=D,exports.INIT_CODE_HASH=S,exports.InsufficientInputAmountError=et,exports.InsufficientReservesError=tt,exports.MINIMUM_LIQUIDITY=g,exports.MaxUint256=x,exports.MistxSocket=Lt,exports.NativeCurrency=pt,exports.ONE=O,exports.Pair=St,exports.Percent=ht,exports.Price=ft,exports.ROUTER_ADDRESS=I,exports.Route=gt,exports.Router=Ht,exports.SOLIDITY_TYPE_MAXIMA=P,exports.TEN=C,exports.THREE=R,exports.TWO=w,exports.Token=xt,exports.Trade=_t,exports.WETH=It,exports.ZERO=k,exports._100=q,exports._1000=b,exports._997=F,exports.currencyEquals=Nt,exports.inputOutputComparator=Ot,exports.tradeComparator=wt;
>>>>>>> 9963416... turn into class
//# sourceMappingURL=sdk.cjs.production.min.js.map
