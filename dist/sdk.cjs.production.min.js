"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e,r,n,o,i,a,u,s,c=t(require("jsbi")),p=t(require("tiny-invariant")),f=t(require("big.js")),d=t(require("decimal.js-light")),l=t(require("toformat")),h=(t(require("tiny-warning")),require("@ethersproject/address")),m=require("@ethersproject/solidity"),y=require("@ethersproject/contracts"),v=require("@ethersproject/networks"),T=require("@ethersproject/providers");(i=exports.ChainId||(exports.ChainId={}))[i.MAINNET=1]="MAINNET",i[i.ROPSTEN=3]="ROPSTEN",i[i.RINKEBY=4]="RINKEBY",i[i["GÖRLI"]=5]="GÖRLI",i[i.KOVAN=42]="KOVAN",i[i.HARDHAT=1337]="HARDHAT",(a=exports.Exchange||(exports.Exchange={}))[a.UNI=0]="UNI",a[a.SUSHI=1]="SUSHI",a[a.UNDEFINED=2]="UNDEFINED",(u=exports.TradeType||(exports.TradeType={}))[u.EXACT_INPUT=0]="EXACT_INPUT",u[u.EXACT_OUTPUT=1]="EXACT_OUTPUT",(s=exports.Rounding||(exports.Rounding={}))[s.ROUND_DOWN=0]="ROUND_DOWN",s[s.ROUND_HALF_UP=1]="ROUND_HALF_UP",s[s.ROUND_UP=2]="ROUND_UP";var x,E=c.BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),g=((e={})[exports.Exchange.UNI]="0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f",e[exports.Exchange.SUSHI]="0xC0AEe478e3658e2610c5F7A4A2E1777cE9e4f2Ac",e[exports.Exchange.UNDEFINED]="0x0",e),A=((r={})[exports.Exchange.UNI]="0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D",r[exports.Exchange.SUSHI]="0xd9e1cE17f2641f24aE83637ab66a2cca9C378B9",r[exports.Exchange.UNDEFINED]="0x0",r),w=((n={})[exports.Exchange.UNI]="0x96e8ac4277198ff8b6f785478aa9a39f403cb768dd02cbee326c3e7da348845f",n[exports.Exchange.SUSHI]="0xe18a34eb0e04b04f7a0ac29a6e80748dca96319b42c54d679cb821dca90c6303",n[exports.Exchange.UNDEFINED]="0x0",n),k=c.BigInt(1e3),I=c.BigInt(0),q=c.BigInt(1),F=c.BigInt(2),b=c.BigInt(3),N=c.BigInt(5),O=c.BigInt(10),R=c.BigInt(100),C=c.BigInt(997),U=c.BigInt(1e3);(x=exports.SolidityType||(exports.SolidityType={})).uint8="uint8",x.uint256="uint256";var P,_=((o={})[exports.SolidityType.uint8]=c.BigInt("0xff"),o[exports.SolidityType.uint256]=c.BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),o);(P=exports.MethodName||(exports.MethodName={})).swapETHForExactTokens="swapETHForExactTokens",P.swapExactETHForTokens="swapExactETHForTokens",P.swapExactTokensForETH="swapExactTokensForETH",P.swapExactTokensForTokens="swapExactTokensForTokens",P.swapTokensForExactETH="swapTokensForExactETH",P.swapTokensForExactTokens="swapTokensForExactTokens";var S={swapETHForExactTokens:"155485",swapExactETHForTokens:"151393",swapExactTokensForETH:"211606",swapExactTokensForTokens:"216959",swapTokensForExactETH:"241879",swapTokensForExactTokens:"244052"};function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function H(t,e,r){return e&&D(t.prototype,e),r&&D(t,r),t}function B(){return(B=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function M(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function L(t,e,r){return(L=X()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&W(o,r.prototype),o}).apply(null,arguments)}function K(t){var e="function"==typeof Map?new Map:void 0;return(K=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return L(t,arguments,j(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),W(r,t)})(t)}function V(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function G(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Y(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}var J,Q,Z,$="setPrototypeOf"in Object,z=function(t){function e(){var r;return(r=t.call(this)||this).isInsufficientReservesError=!0,r.name=r.constructor.name,$&&Object.setPrototypeOf(V(r),(this instanceof e?this.constructor:void 0).prototype),r}return M(e,t),e}(K(Error)),tt=function(t){function e(){var r;return(r=t.call(this)||this).isInsufficientInputAmountError=!0,r.name=r.constructor.name,$&&Object.setPrototypeOf(V(r),(this instanceof e?this.constructor:void 0).prototype),r}return M(e,t),e}(K(Error)),et=function(t,e,r,n){Number.isSafeInteger(t)||p(!1),e>=0&&e<255&&Number.isInteger(e)||p(!1),this.chainId=t,this.decimals=e,this.symbol=r,this.name=n},rt=l(d),nt=l(f),ot=((J={})[exports.Rounding.ROUND_DOWN]=rt.ROUND_DOWN,J[exports.Rounding.ROUND_HALF_UP]=rt.ROUND_HALF_UP,J[exports.Rounding.ROUND_UP]=rt.ROUND_UP,J),it=((Q={})[exports.Rounding.ROUND_DOWN]=0,Q[exports.Rounding.ROUND_HALF_UP]=1,Q[exports.Rounding.ROUND_UP]=3,Q),at=function(){function t(t,e){void 0===e&&(e=c.BigInt(1)),this.numerator=c.BigInt(t),this.denominator=c.BigInt(e)}t.tryParseFraction=function(e){if(e instanceof c||"number"==typeof e||"string"==typeof e)return new t(e);if("numerator"in e&&"denominator"in e)return e;throw new Error("Could not parse fraction")};var e=t.prototype;return e.invert=function(){return new t(this.denominator,this.numerator)},e.add=function(e){var r=t.tryParseFraction(e);return c.equal(this.denominator,r.denominator)?new t(c.add(this.numerator,r.numerator),this.denominator):new t(c.add(c.multiply(this.numerator,r.denominator),c.multiply(r.numerator,this.denominator)),c.multiply(this.denominator,r.denominator))},e.subtract=function(e){var r=t.tryParseFraction(e);return c.equal(this.denominator,r.denominator)?new t(c.subtract(this.numerator,r.numerator),this.denominator):new t(c.subtract(c.multiply(this.numerator,r.denominator),c.multiply(r.numerator,this.denominator)),c.multiply(this.denominator,r.denominator))},e.lessThan=function(e){var r=t.tryParseFraction(e);return c.lessThan(c.multiply(this.numerator,r.denominator),c.multiply(r.numerator,this.denominator))},e.equalTo=function(e){var r=t.tryParseFraction(e);return c.equal(c.multiply(this.numerator,r.denominator),c.multiply(r.numerator,this.denominator))},e.greaterThan=function(e){var r=t.tryParseFraction(e);return c.greaterThan(c.multiply(this.numerator,r.denominator),c.multiply(r.numerator,this.denominator))},e.multiply=function(e){var r=t.tryParseFraction(e);return new t(c.multiply(this.numerator,r.numerator),c.multiply(this.denominator,r.denominator))},e.divide=function(e){var r=t.tryParseFraction(e);return new t(c.multiply(this.numerator,r.denominator),c.multiply(this.denominator,r.numerator))},e.toSignificant=function(t,e,r){void 0===e&&(e={groupSeparator:""}),void 0===r&&(r=exports.Rounding.ROUND_HALF_UP),Number.isInteger(t)||p(!1),t>0||p(!1),rt.set({precision:t+1,rounding:ot[r]});var n=new rt(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(t);return n.toFormat(n.decimalPlaces(),e)},e.toFixed=function(t,e,r){return void 0===e&&(e={groupSeparator:""}),void 0===r&&(r=exports.Rounding.ROUND_HALF_UP),Number.isInteger(t)||p(!1),t>=0||p(!1),nt.DP=t,nt.RM=it[r],new nt(this.numerator.toString()).div(this.denominator.toString()).toFormat(t,e)},H(t,[{key:"quotient",get:function(){return c.divide(this.numerator,this.denominator)}},{key:"remainder",get:function(){return new t(c.remainder(this.numerator,this.denominator),this.denominator)}},{key:"asFraction",get:function(){return new t(this.numerator,this.denominator)}}]),t}(),ut=l(f),st=function(t){function e(e,r,n){var o;return o=t.call(this,r,n)||this,c.lessThanOrEqual(o.quotient,E)||p(!1),o.currency=e,o.decimalScale=c.exponentiate(c.BigInt(10),c.BigInt(e.decimals)),o}M(e,t),e.fromRawAmount=function(t,r){return new e(t,r)},e.fromFractionalAmount=function(t,r,n){return new e(t,r,n)};var r=e.prototype;return r.add=function(r){this.currency.equals(r.currency)||p(!1);var n=t.prototype.add.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},r.subtract=function(r){this.currency.equals(r.currency)||p(!1);var n=t.prototype.subtract.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},r.multiply=function(r){var n=t.prototype.multiply.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},r.divide=function(r){var n=t.prototype.divide.call(this,r);return e.fromFractionalAmount(this.currency,n.numerator,n.denominator)},r.toSignificant=function(e,r,n){return void 0===e&&(e=6),void 0===n&&(n=exports.Rounding.ROUND_DOWN),t.prototype.divide.call(this,this.decimalScale).toSignificant(e,r,n)},r.toFixed=function(e,r,n){return void 0===e&&(e=this.currency.decimals),void 0===n&&(n=exports.Rounding.ROUND_DOWN),e<=this.currency.decimals||p(!1),t.prototype.divide.call(this,this.decimalScale).toFixed(e,r,n)},r.toExact=function(t){return void 0===t&&(t={groupSeparator:""}),ut.DP=this.currency.decimals,new ut(this.quotient.toString()).div(this.decimalScale.toString()).toFormat(t)},H(e,[{key:"wrapped",get:function(){return this.currency.isToken?this:e.fromFractionalAmount(this.currency.wrapped,this.numerator,this.denominator)}}]),e}(at),ct=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).isNative=!0,e.isToken=!1,e}return M(e,t),e}(et),pt=function(t){function e(){for(var e,r,n,o,i,a=arguments.length,u=new Array(a),s=0;s<a;s++)u[s]=arguments[s];if(4===u.length)r=u[0],n=u[1],o=u[2],i=u[3];else{var p=u[0].quoteAmount.divide(u[0].baseAmount),f=[u[0].baseAmount.currency,u[0].quoteAmount.currency,p.denominator,p.numerator];r=f[0],n=f[1],o=f[2],i=f[3]}return(e=t.call(this,i,o)||this).baseCurrency=r,e.quoteCurrency=n,e.scalar=new at(c.exponentiate(c.BigInt(10),c.BigInt(r.decimals)),c.exponentiate(c.BigInt(10),c.BigInt(n.decimals))),e}M(e,t);var r=e.prototype;return r.invert=function(){return new e(this.quoteCurrency,this.baseCurrency,this.numerator,this.denominator)},r.multiply=function(r){this.quoteCurrency.equals(r.baseCurrency)||p(!1);var n=t.prototype.multiply.call(this,r);return new e(this.baseCurrency,r.quoteCurrency,n.denominator,n.numerator)},r.quote=function(e){e.currency.equals(this.baseCurrency)||p(!1);var r=t.prototype.multiply.call(this,e);return st.fromFractionalAmount(this.quoteCurrency,r.numerator,r.denominator)},r.toSignificant=function(t,e,r){return void 0===t&&(t=6),this.adjustedForDecimals.toSignificant(t,e,r)},r.toFixed=function(t,e,r){return void 0===t&&(t=4),this.adjustedForDecimals.toFixed(t,e,r)},H(e,[{key:"adjustedForDecimals",get:function(){return t.prototype.multiply.call(this,this.scalar)}}]),e}(at),ft=new at(R),dt=function(t){function e(){return t.apply(this,arguments)||this}M(e,t);var r=e.prototype;return r.toSignificant=function(t,e,r){return void 0===t&&(t=5),this.multiply(ft).toSignificant(t,e,r)},r.toFixed=function(t,e,r){return void 0===t&&(t=2),this.multiply(ft).toFixed(t,e,r)},e}(at);function lt(t){try{return h.getAddress(t)}catch(t){p(!1)}}function ht(t){return t instanceof c?t:c.BigInt(t)}function mt(t,e){void 0===t&&(t="swapTokensForExactETH"),void 0===e&&(e="1");var r=ht(S[t]),n=ht("0"),o=c.multiply(ht(e),n);return c.add(r,o)}function yt(t,e,r){t=ht(t),e=ht(e);var n=vt(t,r);return c.multiply(n,e)}function vt(t,e){t=ht(t),e=c.multiply(ht(e),ht("100"));var r=c.multiply(t,c.add(ht("10000"),e)),n=ht("10000");return c.divide(r,n)}function Tt(t){var e,r;e=t,r=exports.SolidityType.uint256,c.greaterThanOrEqual(e,I)||p(!1),c.lessThanOrEqual(e,_[r])||p(!1);var n,o=I;if(c.greaterThan(t,b))for(o=t,n=c.add(c.divide(t,F),q);c.lessThan(n,o);)o=n,n=c.divide(c.add(c.divide(t,n),n),F);else c.notEqual(t,I)&&(o=q);return o}function xt(t,e,r,n){if(r>0||p(!1),t.length<=r||p(!1),0===t.length)return t.push(e),null;var o=t.length===r;if(o&&n(t[t.length-1],e)<=0)return e;for(var i=0,a=t.length;i<a;){var u=i+a>>>1;n(t[u],e)<=0?i=u+1:a=u}return t.splice(i,0,e),o?t.pop():null}var Et=function(t){function e(e,r,n,o,i){var a;return(a=t.call(this,e,n,o,i)||this).isNative=!1,a.isToken=!0,a.chainId=e,a.address=lt(r),a}M(e,t);var r=e.prototype;return r.equals=function(t){return t.isToken&&this.chainId===t.chainId&&this.address===t.address},r.sortsBefore=function(t){return this.chainId!==t.chainId&&p(!1),this.address===t.address&&p(!1),this.address.toLowerCase()<t.address.toLowerCase()},H(e,[{key:"wrapped",get:function(){return this}}]),e}(et);function gt(t,e){return t instanceof Et&&e instanceof Et?t.equals(e):!(t instanceof Et||e instanceof Et||t!==e)}var At=((Z={})[exports.ChainId.MAINNET]=new Et(exports.ChainId.MAINNET,"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",18,"WETH","Wrapped Ether"),Z[exports.ChainId.HARDHAT]=new Et(exports.ChainId.HARDHAT,"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",18,"WETH","Wrapped Ether"),Z[exports.ChainId.ROPSTEN]=new Et(exports.ChainId.ROPSTEN,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),Z[exports.ChainId.RINKEBY]=new Et(exports.ChainId.RINKEBY,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),Z[exports.ChainId.GÖRLI]=new Et(exports.ChainId.GÖRLI,"0xB4FBF271143F4FBf7B91A5ded31805e42b2208d6",18,"WETH","Wrapped Ether"),Z[exports.ChainId.KOVAN]=new Et(exports.ChainId.KOVAN,"0xd0A1E359811322d97991E03f863a0C30C2cF029C",18,"WETH","Wrapped Ether"),Z),wt=function(){function t(e,r,n){var o=e.currency.sortsBefore(r.currency)?[e,r]:[r,e];this.liquidityToken=new Et(o[0].currency.chainId,t.getAddress(o[0].currency,o[1].currency,n),18,"UNI-V2","Uniswap V2"),this.tokenAmounts=o,this.exchange=n}t.getAddress=function(t,e,r){return function(t){var e=t.exchange,r=t.tokenA,n=t.tokenB,o=r.sortsBefore(n)?[r,n]:[n,r];return h.getCreate2Address(g[e],m.keccak256(["bytes"],[m.pack(["address","address"],[o[0].address,o[1].address])]),w[e])}({exchange:r,tokenA:t,tokenB:e})};var e=t.prototype;return e.involvesToken=function(t){return t.equals(this.token0)||t.equals(this.token1)},e.priceOf=function(t){return this.involvesToken(t)||p(!1),t.equals(this.token0)?this.token0Price:this.token1Price},e.reserveOf=function(t){return this.involvesToken(t)||p(!1),t.equals(this.token0)?this.reserve0:this.reserve1},e.getOutputAmount=function(e){if(this.involvesToken(e.currency)||p(!1),c.equal(this.reserve0.quotient,I)||c.equal(this.reserve1.quotient,I))throw new z;var r=this.reserveOf(e.currency),n=this.reserveOf(e.currency.equals(this.token0)?this.token1:this.token0),o=c.multiply(e.quotient,C),i=c.multiply(o,n.quotient),a=c.add(c.multiply(r.quotient,U),o),u=st.fromRawAmount(e.currency.equals(this.token0)?this.token1:this.token0,c.divide(i,a));if(c.equal(u.quotient,I))throw new tt;return[u,new t(r.add(e),n.subtract(u),this.exchange)]},e.getInputAmount=function(e){if(this.involvesToken(e.currency)||p(!1),c.equal(this.reserve0.quotient,I)||c.equal(this.reserve1.quotient,I)||c.greaterThanOrEqual(e.quotient,this.reserveOf(e.currency).quotient))throw new z;var r=this.reserveOf(e.currency),n=this.reserveOf(e.currency.equals(this.token0)?this.token1:this.token0),o=c.multiply(c.multiply(n.quotient,e.quotient),U),i=c.multiply(c.subtract(r.quotient,e.quotient),C),a=st.fromRawAmount(e.currency.equals(this.token0)?this.token1:this.token0,c.add(c.divide(o,i),q));return[a,new t(n.add(a),r.subtract(e),this.exchange)]},e.getLiquidityMinted=function(t,e,r){t.currency.equals(this.liquidityToken)||p(!1);var n,o=e.currency.sortsBefore(r.currency)?[e,r]:[r,e];if(o[0].currency.equals(this.token0)&&o[1].currency.equals(this.token1)||p(!1),c.equal(t.quotient,I))n=c.subtract(Tt(c.multiply(o[0].quotient,o[1].quotient)),k);else{var i=c.divide(c.multiply(o[0].quotient,t.quotient),this.reserve0.quotient),a=c.divide(c.multiply(o[1].quotient,t.quotient),this.reserve1.quotient);n=c.lessThanOrEqual(i,a)?i:a}if(!c.greaterThan(n,I))throw new tt;return st.fromRawAmount(this.liquidityToken,n)},e.getLiquidityValue=function(t,e,r,n,o){var i;if(void 0===n&&(n=!1),this.involvesToken(t)||p(!1),e.currency.equals(this.liquidityToken)||p(!1),r.currency.equals(this.liquidityToken)||p(!1),c.lessThanOrEqual(r.quotient,e.quotient)||p(!1),n){o||p(!1);var a=c.BigInt(o);if(c.equal(a,I))i=e;else{var u=Tt(c.multiply(this.reserve0.quotient,this.reserve1.quotient)),s=Tt(a);if(c.greaterThan(u,s)){var f=c.multiply(e.quotient,c.subtract(u,s)),d=c.add(c.multiply(u,N),s),l=c.divide(f,d);i=e.add(st.fromRawAmount(this.liquidityToken,l))}else i=e}}else i=e;return st.fromRawAmount(t,c.divide(c.multiply(r.quotient,this.reserveOf(t).quotient),i.quotient))},H(t,[{key:"token0Price",get:function(){var t=this.tokenAmounts[1].divide(this.tokenAmounts[0]);return new pt(this.token0,this.token1,t.denominator,t.numerator)}},{key:"token1Price",get:function(){var t=this.tokenAmounts[0].divide(this.tokenAmounts[1]);return new pt(this.token1,this.token0,t.denominator,t.numerator)}},{key:"chainId",get:function(){return this.token0.chainId}},{key:"token0",get:function(){return this.tokenAmounts[0].currency}},{key:"token1",get:function(){return this.tokenAmounts[1].currency}},{key:"reserve0",get:function(){return this.tokenAmounts[0]}},{key:"reserve1",get:function(){return this.tokenAmounts[1]}}]),t}(),kt=function(){function t(t,e,r){this._midPrice=null,t.length>0||p(!1);var n=t[0].chainId;t.every((function(t){return t.chainId===n}))||p(!1);var o=e.wrapped;t[0].involvesToken(o)||p(!1),void 0===r||t[t.length-1].involvesToken(r.wrapped)||p(!1);for(var i,a=[o],u=G(t.entries());!(i=u()).done;){var s=i.value,c=s[1],f=a[s[0]];f.equals(c.token0)||f.equals(c.token1)||p(!1);var d=f.equals(c.token0)?c.token1:c.token0;a.push(d)}this.pairs=t,this.path=a,this.input=e,this.output=r}return H(t,[{key:"midPrice",get:function(){if(null!==this._midPrice)return this._midPrice;for(var t,e=[],r=G(this.pairs.entries());!(t=r()).done;){var n=t.value,o=n[1];e.push(this.path[n[0]].equals(o.token0)?new pt(o.reserve0.currency,o.reserve1.currency,o.reserve0.quotient,o.reserve1.quotient):new pt(o.reserve1.currency,o.reserve0.currency,o.reserve1.quotient,o.reserve0.quotient))}var i=e.slice(1).reduce((function(t,e){return t.multiply(e)}),e[0]);return this._midPrice=new pt(this.input,this.output,i.denominator,i.numerator)}},{key:"chainId",get:function(){return this.pairs[0].chainId}}]),t}(),It=function(t){function e(e){return t.call(this,e,18,"ETH","Ether")||this}return M(e,t),e.onChain=function(t){var r;return null!==(r=this._etherCache[t])&&void 0!==r?r:this._etherCache[t]=new e(t)},e.prototype.equals=function(t){return t.isNative&&t.chainId===this.chainId},H(e,[{key:"wrapped",get:function(){var t=At[this.chainId];return t||p(!1),t}}]),e}(ct);function qt(t,e){return t.inputAmount.currency.equals(e.inputAmount.currency)||p(!1),t.outputAmount.currency.equals(e.outputAmount.currency)||p(!1),t.outputAmount.equalTo(e.outputAmount)?t.inputAmount.equalTo(e.inputAmount)?0:t.inputAmount.lessThan(e.inputAmount)?-1:1:t.outputAmount.lessThan(e.outputAmount)?1:-1}function Ft(t,e){var r=qt(t,e);return 0!==r?r:t.priceImpact.lessThan(e.priceImpact)?-1:t.priceImpact.greaterThan(e.priceImpact)?1:t.route.path.length-e.route.path.length}It._etherCache={};var bt=function(){function t(e,r,n,o,i){this.route=e,this.tradeType=n;var a=new Array(e.path.length),u=new Array(e.pairs.length),s=e.input.isNative,c=e.output.isNative,f=mt(t.methodNameForTradeType(n,s,c),(e.path.length-1).toString()),d=yt(o,f,i);this.estimatedGas=f.toString(),this.minerBribe=st.fromRawAmount(At[e.chainId],d);var l=r.wrapped,h=r.wrapped;if(n===exports.TradeType.EXACT_INPUT){gt(r.currency,e.input)||p(!1),a[0]=r.wrapped;for(var m=0;m<e.path.length-1;m++){var y=e.pairs[m],v=a[m];if(s&&0===m){v.greaterThan(this.minerBribe)||p(!1);var T=v.subtract(this.minerBribe);v=T,l=T}var x=y.getOutputAmount(v),E=x[0],g=x[1];if(c&&m===e.path.length-2){E.greaterThan(this.minerBribe)||p(!1);var A=E.subtract(this.minerBribe);a[m+1]=A,h=E}else h=E,a[m+1]=E;u[m]=g}}else{gt(r.currency,e.output)||p(!1),a[a.length-1]=r.wrapped;for(var w=e.path.length-1;w>0;w--){var k=a[w];if(c&&w===e.path.length-1){var I=k.add(this.minerBribe);k=I,h=I}else w===e.path.length-1&&(h=k);var q=e.pairs[w-1].getInputAmount(k),F=q[0],b=q[1];if(s&&1===w){var N=F.add(this.minerBribe);a[w-1]=N,l=F}else a[w-1]=1===w?l=F:F;u[w-1]=b}}this.exchange=e.pairs[0].exchange,this.inputAmount=st.fromFractionalAmount(e.input,a[0].numerator,a[0].denominator),this.outputAmount=st.fromFractionalAmount(e.output,a[a.length-1].numerator,a[a.length-1].denominator),this.executionPrice=new pt(e.input,e.output,l.quotient,h.quotient),this.priceImpact=function(t,e,r){var n=t.quote(e),o=n.subtract(r).divide(n);return new dt(o.numerator,o.denominator)}(e.midPrice,st.fromFractionalAmount(e.input,l.numerator,l.denominator),st.fromFractionalAmount(e.output,h.numerator,h.denominator))}t.exactIn=function(e,r,n,o){return new t(e,r,exports.TradeType.EXACT_INPUT,n,o)},t.exactOut=function(e,r,n,o){return new t(e,r,exports.TradeType.EXACT_OUTPUT,n,o)};var e=t.prototype;return e.minimumAmountOut=function(t){if(t.lessThan(I)&&p(!1),this.tradeType===exports.TradeType.EXACT_OUTPUT)return this.outputAmount;var e=new at(q).add(t).invert().multiply(this.outputAmount.quotient).quotient;return st.fromRawAmount(this.outputAmount.currency,e)},e.maximumAmountIn=function(t){if(t.lessThan(I)&&p(!1),this.tradeType===exports.TradeType.EXACT_INPUT)return this.inputAmount;var e=new at(q).add(t).multiply(this.inputAmount.quotient).quotient;return st.fromRawAmount(this.inputAmount.currency,e)},t.bestTradeExactIn=function(e,r,n,o,i,a,u,s,c){var f=void 0===a?{}:a,d=f.maxNumResults,l=void 0===d?3:d,h=f.maxHops,m=void 0===h?3:h;void 0===u&&(u=[]),void 0===s&&(s=r),void 0===c&&(c=[]),e.length>0||p(!1),m>0||p(!1),s===r||u.length>0||p(!1);for(var y=exports.TradeType.EXACT_INPUT,v=s.wrapped,T=n.wrapped,x=0;x<e.length;x++){var E=e[x];if((E.token0.equals(v.currency)||E.token1.equals(v.currency))&&!E.reserve0.equalTo(I)&&!E.reserve1.equalTo(I)){var g=void 0;try{g=E.getOutputAmount(v)[0]}catch(t){if(t.isInsufficientInputAmountError)continue;throw t}if(g.currency.equals(T))try{xt(c,new t(new kt([].concat(u,[E]),r.currency,n),r,y,o,i),l,Ft)}catch(t){}else if(m>1&&e.length>1){var A=e.slice(0,x).concat(e.slice(x+1,e.length));t.bestTradeExactIn(A,r,n,o,i,{maxNumResults:l,maxHops:m-1},[].concat(u,[E]),g,c)}}}return c},t.bestTradeExactOut=function(e,r,n,o,i,a,u,s,c){var f=void 0===a?{}:a,d=f.maxNumResults,l=void 0===d?3:d,h=f.maxHops,m=void 0===h?3:h;void 0===u&&(u=[]),void 0===s&&(s=n),void 0===c&&(c=[]),e.length>0||p(!1),m>0||p(!1),s===n||u.length>0||p(!1);for(var y=s.wrapped,v=r.wrapped,T=0;T<e.length;T++){var x=e[T];if((x.token0.equals(y.currency)||x.token1.equals(y.currency))&&!x.reserve0.equalTo(I)&&!x.reserve1.equalTo(I)){var E=void 0;try{E=x.getInputAmount(y)[0]}catch(t){if(t.isInsufficientReservesError)continue;throw t}if(E.currency.equals(v))try{xt(c,new t(new kt([x].concat(u),r,n.currency),n,exports.TradeType.EXACT_OUTPUT,o,i),l,Ft)}catch(t){}else if(m>1&&e.length>1){var g=e.slice(0,T).concat(e.slice(T+1,e.length));t.bestTradeExactOut(g,r,n,o,i,{maxNumResults:l,maxHops:m-1},[x].concat(u),E,c)}}}return c},t.methodNameForTradeType=function(t,e,r,n){var o;switch(t){case exports.TradeType.EXACT_INPUT:o=e?"swapExactETHForTokens":r?"swapExactTokensForETH":"swapExactTokensForTokens";break;case exports.TradeType.EXACT_OUTPUT:n&&p(!1),o=e?"swapETHForExactTokens":r?"swapTokensForExactETH":"swapTokensForExactTokens"}return o},t.estimateMinTradeAmounts=function(e,r,n,o,i,a,u){var s,c=(void 0===u?{}:u).maxHops,p=void 0===c?3:c,f=r.isNative,d=n.isNative;if(!f&&!d)return null;var l,h,m=mt(t.methodNameForTradeType(exports.TradeType.EXACT_INPUT,f,d),p.toString()),y=mt(t.methodNameForTradeType(exports.TradeType.EXACT_OUTPUT,f,d),p.toString()),v=vt(yt(o,m,i),a),T=vt(yt(o,y,i),a);if(f){var x=t.bestTradeExactOut(e,n,st.fromRawAmount(r,T),"0","0")[0];x&&(l=st.fromRawAmount(r,v),h=x.inputAmount)}else if(d){var E=t.bestTradeExactIn(e,st.fromRawAmount(r,v),r,"0","0")[0];E&&(l=E.outputAmount,h=st.fromRawAmount(r,T))}return l&&h?((s={})[exports.TradeType.EXACT_INPUT]=l,s[exports.TradeType.EXACT_OUTPUT]=h,s):null},t.estimateBribeAmounts=function(t,e){var r,n=It.onChain(1),o=((r={})[exports.MethodName.swapETHForExactTokens]=st.fromRawAmount(n,yt(t,mt("swapETHForExactTokens"),e)),r[exports.MethodName.swapExactETHForTokens]=st.fromRawAmount(n,yt(t,mt("swapExactETHForTokens"),e)),r[exports.MethodName.swapExactTokensForETH]=st.fromRawAmount(n,yt(t,mt("swapExactTokensForETH"),e)),r[exports.MethodName.swapExactTokensForTokens]=st.fromRawAmount(n,yt(t,mt("swapExactTokensForTokens"),e)),r[exports.MethodName.swapTokensForExactETH]=st.fromRawAmount(n,yt(t,mt("swapTokensForExactETH"),e)),r[exports.MethodName.swapTokensForExactTokens]=st.fromRawAmount(n,yt(t,mt("swapTokensForExactTokens"),e)),r),i=st.fromRawAmount(n,"1000000000000000000000000000000000000000000000000"),a=st.fromRawAmount(n,"0"),u=st.fromRawAmount(n,"0");for(var s in exports.MethodName){var p=o[s];u.add(p),p.lessThan(i)&&(i=p),p.greaterThan(a)&&(a=p)}var f=u.divide(String(Object.keys(exports.MethodName).length));return{estimates:o,minBribe:i,maxBribe:a,meanBribe:st.fromRawAmount(n,c.divide(f.numerator,f.denominator))}},t}();function Nt(t){return"0x"+t.quotient.toString(16)}var Ot,Rt=function(){function t(){}return t.swapCallParameters=function(t,e){var r=t.inputAmount.currency.isNative,n=t.outputAmount.currency.isNative;r&&n&&p(!1),!("ttl"in e)||e.ttl>0||p(!1);var o,i=lt(e.recipient),a=Nt(t.maximumAmountIn(e.allowedSlippage)),u=Nt(t.minimumAmountOut(e.allowedSlippage)),s=Nt(t.minerBribe),c=t.route.path.map((function(t){return t.address})),f="ttl"in e?"0x"+(Math.floor((new Date).getTime()/1e3)+e.ttl).toString(16):"0x"+e.deadline.toString(16),d=Boolean(e.feeOnTransfer),l={amount0:a,amount1:u,path:c,to:i,deadline:f},h=bt.methodNameForTradeType(t.tradeType,r,n,d);switch(h){case"swapExactETHForTokens":l.amount0=a,l.amount1=u,o=a;break;case"swapExactTokensForETH":l.amount0=a,l.amount1=u,o="0x0";break;case"swapExactTokensForTokens":l.amount0=a,l.amount1=u,o=s;break;case"swapETHForExactTokens":d&&p(!1),l.amount0=a,l.amount1=u,o=a;break;case"swapTokensForExactETH":case"swapTokensForExactTokens":d&&p(!1),l.amount0=u,l.amount1=a,o=s;break;default:o=""}var m=[[l.amount0,l.amount1,l.path,l.to,l.deadline],s];return h&&m&&o||p(!1),{methodName:h,args:m,value:o}},t}(),Ct=[{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],Ut=((Ot={})[exports.ChainId.MAINNET]={"0xE0B7927c4aF23765Cb51314A0E0521A9645F0E2A":9},Ot),Pt=function(){function t(){}return t.fetchTokenData=function(t,e,r,n,o){try{var i,a,u=function(r){return new Et(t,e,r,n,o)};void 0===r&&(r=T.getDefaultProvider(v.getNetwork(t)));var s="number"==typeof(null===(i=Ut)||void 0===i||null===(a=i[t])||void 0===a?void 0:a[e]);return Promise.resolve(s?u(Ut[t][e]):Promise.resolve(new y.Contract(e,Ct,r).decimals().then((function(r){var n,o,i;return Ut=B({},Ut,((i={})[t]=B({},null===(n=Ut)||void 0===n?void 0:n[t],((o={})[e]=r,o)),i)),r}))).then(u))}catch(t){return Promise.reject(t)}},t}();exports.JSBI=c,exports.AbstractCurrency=et,exports.CurrencyAmount=st,exports.Ether=It,exports.FACTORY_ADDRESS=g,exports.FIVE=N,exports.Fetcher=Pt,exports.Fraction=at,exports.GAS_ESTIMATES=S,exports.INIT_CODE_HASH=w,exports.InsufficientInputAmountError=tt,exports.InsufficientReservesError=z,exports.MINIMUM_LIQUIDITY=k,exports.MaxUint256=E,exports.NativeCurrency=ct,exports.ONE=q,exports.Pair=wt,exports.Percent=dt,exports.Price=pt,exports.ROUTER_ADDRESS=A,exports.Route=kt,exports.Router=Rt,exports.SOLIDITY_TYPE_MAXIMA=_,exports.TEN=O,exports.THREE=b,exports.TWO=F,exports.Token=Et,exports.Trade=bt,exports.WETH=At,exports.ZERO=I,exports._100=R,exports._1000=U,exports._997=C,exports.currencyEquals=gt,exports.inputOutputComparator=qt,exports.tradeComparator=Ft;
//# sourceMappingURL=sdk.cjs.production.min.js.map
