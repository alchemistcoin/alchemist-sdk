"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,E,o,e=require("socket.io-client");(t=exports.Event||(exports.Event={})).GAS_CHANGE="GAS_CHANGE",t.SOCKET_SESSION="SOCKET_SESSION",t.SOCKET_ERR="SOCKET_ERR",t.MISTX_BUNDLE_REQUEST="MISTX_BUNDLE_REQUEST",t.BUNDLE_STATUS_REQUEST="BUNDLE_STATUS_REQUEST",t.BUNDLE_STATUS_RESPONSE="BUNDLE_STATUS_RESPONSE",t.BUNDLE_RESPONSE="BUNDLE_RESPONSE",t.BUNDLE_CANCEL_REQUEST="BUNDLE_CANCEL_REQUEST",(E=exports.Status||(exports.Status={})).PENDING_BUNDLE="PENDING_BUNDLE",E.FAILED_BUNDLE="FAILED_BUNDLE",E.SUCCESSFUL_BUNDLE="SUCCESSFUL_BUNDLE",E.CANCEL_BUNDLE_SUCCESSFUL="CANCEL_BUNDLE_SUCCESSFUL",E.BUNDLE_NOT_FOUND="BUNDLE_NOT_FOUND",(o=exports.Diagnosis||(exports.Diagnosis={})).LOWER_THAN_TAIL="LOWER_THAN_TAIL",o.NOT_A_FLASHBLOCK="NOT_A_FLASHBLOCK",o.BUNDLE_OUTBID="BUNDLE_OUTBID",o.ERROR_API_BEHIND="ERROR_API_BEHIND",o.MISSING_BLOCK_DATA="MISSING_BLOCK_DATA",o.ERROR_UNKNOWN="ERROR_UNKNOWN",exports.MistxSocket=function(){function t(t){void 0===t&&(t="https://mistx-app-goerli.herokuapp.com");var E=localStorage.getItem("SESSION_TOKEN"),o=e.io(t,{transports:["websocket"],auth:{token:E},reconnection:!0,reconnectionDelay:5e3,autoConnect:!0});this.socket=o}var E=t.prototype;return E.disconnect=function(){this.socket.off("connect"),this.socket.off("connect_error"),this.socket.off(exports.Event.SOCKET_ERR),this.socket.off(exports.Event.SOCKET_SESSION),this.socket.off(exports.Event.GAS_CHANGE),this.socket.off(exports.Event.BUNDLE_RESPONSE),this.socket.off(exports.Event.BUNDLE_STATUS_RESPONSE)},E.init=function(t){var E=this,o=t.onConnect,e=t.onConnectError,n=t.onDisconnect,S=t.onError,s=t.onGasChange,_=t.onSocketSession,N=t.onTransactionResponse,c=t.onTransactionUpdate;return this.socket.on("connect",(function(){o&&o()})),this.socket.on("connect_error",(function(t){e&&e(t)})),this.socket.on("disconnect",(function(t){n&&n(t)})),this.socket.on(exports.Event.SOCKET_ERR,(function(t){S&&S(t)})),this.socket.on(exports.Event.SOCKET_SESSION,(function(t){localStorage.setItem("SESSION_TOKEN",t.token),_&&_(t)})),this.socket.on(exports.Event.GAS_CHANGE,(function(t){s&&s(t)})),this.socket.on(exports.Event.BUNDLE_RESPONSE,(function(t){N&&N(t)})),this.socket.on(exports.Event.BUNDLE_STATUS_RESPONSE,(function(t){c&&c(t)})),function(){E.disconnect()}},E.emitTransactionRequest=function(t){this.socket.emit(exports.Event.MISTX_BUNDLE_REQUEST,t)},E.emitStatusRequest=function(t){this.socket.emit(exports.Event.BUNDLE_STATUS_REQUEST,{id:t})},E.emitTransactionCancellation=function(t){this.socket.emit(exports.Event.BUNDLE_CANCEL_REQUEST,{id:t})},t}(),exports.STATUS_LOCALES={PENDING_BUNDLE:"Flashbots working on including your swap",FAILED_BUNDLE:"Failed",SUCCESSFUL_BUNDLE:"Success",CANCEL_BUNDLE_SUCCESSFUL:"Cancelled",BUNDLE_NOT_FOUND:"Failed"};
//# sourceMappingURL=mistx-connect.cjs.production.min.js.map
