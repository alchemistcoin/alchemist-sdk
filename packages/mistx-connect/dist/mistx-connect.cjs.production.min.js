"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t,o,E=require("socket.io-client"),n=require("@ethersproject/bignumber");(e=exports.Event||(exports.Event={})).FEES_CHANGE="FEES_CHANGE",e.SOCKET_SESSION="SOCKET_SESSION",e.SOCKET_ERR="SOCKET_ERR",e.BUNDLE_REQUEST="BUNDLE_REQUEST",e.MISTX_BUNDLE_REQUEST="MISTX_BUNDLE_REQUEST",e.BUNDLE_STATUS_REQUEST="BUNDLE_STATUS_REQUEST",e.BUNDLE_STATUS_RESPONSE="BUNDLE_STATUS_RESPONSE",e.BUNDLE_RESPONSE="BUNDLE_RESPONSE",e.BUNDLE_CANCEL_REQUEST="BUNDLE_CANCEL_REQUEST",(t=exports.Status||(exports.Status={})).PENDING_BUNDLE="PENDING_BUNDLE",t.FAILED_BUNDLE="FAILED_BUNDLE",t.SUCCESSFUL_BUNDLE="SUCCESSFUL_BUNDLE",t.CANCEL_BUNDLE_SUCCESSFUL="CANCEL_BUNDLE_SUCCESSFUL",t.BUNDLE_NOT_FOUND="BUNDLE_NOT_FOUND",(o=exports.Diagnosis||(exports.Diagnosis={})).LOWER_THAN_TAIL="LOWER_THAN_TAIL",o.NOT_A_FLASHBLOCK="NOT_A_FLASHBLOCK",o.BUNDLE_OUTBID="BUNDLE_OUTBID",o.ERROR_API_BEHIND="ERROR_API_BEHIND",o.MISSING_BLOCK_DATA="MISSING_BLOCK_DATA",o.ERROR_UNKNOWN="ERROR_UNKNOWN",exports.MistxSocket=function(){function e(e){void 0===e&&(e="https://mistx-app-goerli.herokuapp.com");var t=localStorage.getItem("SESSION_TOKEN"),o=E.io(e,{transports:["websocket"],auth:{token:t},reconnection:!0,reconnectionDelay:5e3,autoConnect:!0});this.socket=o}var t=e.prototype;return t.disconnect=function(){this.socket.off("connect"),this.socket.off("connect_error"),this.socket.off(exports.Event.SOCKET_ERR),this.socket.off(exports.Event.SOCKET_SESSION),this.socket.off(exports.Event.FEES_CHANGE),this.socket.off(exports.Event.BUNDLE_RESPONSE),this.socket.off(exports.Event.BUNDLE_STATUS_RESPONSE)},t.closeConnection=function(){this.socket.disconnect()},t.init=function(e){var t=this,o=e.onConnect,E=e.onConnectError,s=e.onDisconnect,r=e.onError,i=e.onFeesChange,S=e.onSocketSession,N=e.onTransactionResponse,_=e.onTransactionUpdate;return this.socket.on("connect",(function(){o&&o()})),this.socket.on("connect_error",(function(e){E&&E(e)})),this.socket.on("disconnect",(function(e){s&&s(e)})),this.socket.on(exports.Event.SOCKET_ERR,(function(e){r&&r(e)})),this.socket.on(exports.Event.SOCKET_SESSION,(function(e){localStorage.setItem("SESSION_TOKEN",e.token),S&&S(e)})),this.socket.on(exports.Event.FEES_CHANGE,(function(e){if(i){var t={block:e.block,baseFeePerGas:n.BigNumber.from(e.baseFeePerGas),default:{maxFeePerGas:n.BigNumber.from(e.default.maxFeePerGas),maxPriorityFeePerGas:n.BigNumber.from(e.default.maxPriorityFeePerGas)},low:{maxFeePerGas:n.BigNumber.from(e.low.maxFeePerGas),maxPriorityFeePerGas:n.BigNumber.from(e.low.maxPriorityFeePerGas)},med:{maxFeePerGas:n.BigNumber.from(e.med.maxFeePerGas),maxPriorityFeePerGas:n.BigNumber.from(e.med.maxPriorityFeePerGas)},high:{maxFeePerGas:n.BigNumber.from(e.high.maxFeePerGas),maxPriorityFeePerGas:n.BigNumber.from(e.high.maxPriorityFeePerGas)}};i(t)}})),this.socket.on(exports.Event.BUNDLE_RESPONSE,(function(e){N&&N(e)})),this.socket.on(exports.Event.BUNDLE_STATUS_RESPONSE,(function(e){_&&_(e)})),function(){t.disconnect()}},t.emitBundleRequest=function(e){this.socket.emit(exports.Event.BUNDLE_REQUEST,e)},t.emitTransactionRequest=function(e){this.socket.emit(exports.Event.MISTX_BUNDLE_REQUEST,e)},t.emitStatusRequest=function(e){this.socket.emit(exports.Event.BUNDLE_STATUS_REQUEST,{serialized:e})},t.emitTransactionCancellation=function(e){this.socket.emit(exports.Event.BUNDLE_CANCEL_REQUEST,{serialized:e})},e}(),exports.STATUS_LOCALES={PENDING_BUNDLE:"Flashbots working on including your swap",FAILED_BUNDLE:"Failed",SUCCESSFUL_BUNDLE:"Success",CANCEL_BUNDLE_SUCCESSFUL:"Cancelled",BUNDLE_NOT_FOUND:"Failed"};
//# sourceMappingURL=mistx-connect.cjs.production.min.js.map
